var wu=Object.defineProperty;var zs=e=>{throw TypeError(e)};var yu=(e,t,n)=>t in e?wu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var M=(e,t,n)=>yu(e,typeof t!="symbol"?t+"":t,n),Po=(e,t,n)=>t.has(e)||zs("Cannot "+n);var k=(e,t,n)=>(Po(e,t,"read from private field"),n?n.call(e):t.get(e)),X=(e,t,n)=>t.has(e)?zs("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),F=(e,t,n,r)=>(Po(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),re=(e,t,n)=>(Po(e,t,"access private method"),n);var Dc;typeof window<"u"&&((Dc=window.__svelte??(window.__svelte={})).v??(Dc.v=new Set)).add("5");const bu=1,vu=2,zc=4,mu=8,Eu=16,xu=1,_u=2,pe=Symbol(),Au="http://www.w3.org/1999/xhtml",ui=!1;var Fc=Array.isArray,Bu=Array.prototype.indexOf,wo=Array.from,Kc=Object.defineProperty,bn=Object.getOwnPropertyDescriptor,Su=Object.getOwnPropertyDescriptors,Tu=Object.prototype,Iu=Array.prototype,Zc=Object.getPrototypeOf,Fs=Object.isExtensible;function sr(e){return typeof e=="function"}const Kt=()=>{};function Wc(e){for(var t=0;t<e.length;t++)e[t]()}function Gc(){var e,t,n=new Promise((r,o)=>{e=r,t=o});return{promise:n,resolve:e,reject:t}}const ge=2,Fi=4,Ki=8,$u=1<<24,Bt=16,St=32,In=64,yo=128,Ge=512,ye=1024,ke=2048,Tt=4096,Oe=8192,Zt=16384,Zi=32768,xn=65536,Ks=1<<17,Yc=1<<18,Jn=1<<19,ku=1<<20,vt=1<<25,_n=32768,di=1<<21,Wi=1<<22,Wt=1<<23,hr=Symbol("$state"),Lu=Symbol("legacy props"),Uu=Symbol(""),Cn=new class extends Error{constructor(){super(...arguments);M(this,"name","StaleReactionError");M(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Xc(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Nu(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ru(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ou(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Cu(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Hu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Mu(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Pu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function qu(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Vu(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function ju(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Jc(e){return e===this.v}function Qc(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ea(e){return!Qc(e,this.v)}let Du=!1,Le=null;function Fn(e){Le=e}function zu(e,t=!1,n){Le={p:Le,i:!1,c:null,e:null,s:e,x:null,l:null}}function Fu(e){var t=Le,n=t.e;if(n!==null){t.e=null;for(var r of n)va(r)}return t.i=!0,Le=t.p,{}}function ta(){return!0}let sn=[];function na(){var e=sn;sn=[],Wc(e)}function Qn(e){if(sn.length===0&&!gr){var t=sn;queueMicrotask(()=>{t===sn&&na()})}sn.push(e)}function Ku(){for(;sn.length>0;)na()}function ra(e){var t=ee;if(t===null)return Y.f|=Wt,e;if((t.f&Zi)===0){if((t.f&yo)===0)throw e;t.b.error(e)}else Kn(e,t)}function Kn(e,t){for(;t!==null;){if((t.f&yo)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const Lr=new Set;let G=null,Hr=null,se=null,Fe=[],bo=null,hi=!1,gr=!1;var Vn,jn,dn,hn,xr,Dn,zn,fe,gi,tn,pi,oa,ia;const ho=class ho{constructor(){X(this,fe);M(this,"committed",!1);M(this,"current",new Map);M(this,"previous",new Map);X(this,Vn,new Set);X(this,jn,new Set);X(this,dn,0);X(this,hn,0);X(this,xr,null);X(this,Dn,[]);X(this,zn,[]);M(this,"skipped_effects",new Set);M(this,"is_fork",!1)}is_deferred(){return this.is_fork||k(this,hn)>0}process(t){var r;Fe=[],Hr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const o of t)re(this,fe,gi).call(this,o,n);this.is_fork||re(this,fe,oa).call(this),this.is_deferred()?(re(this,fe,tn).call(this,n.effects),re(this,fe,tn).call(this,n.render_effects),re(this,fe,tn).call(this,n.block_effects)):(Hr=this,G=null,Zs(n.render_effects),Zs(n.effects),Hr=null,(r=k(this,xr))==null||r.resolve()),se=null}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&Wt)===0&&(this.current.set(t,t.v),se==null||se.set(t,t.v))}activate(){G=this,this.apply()}deactivate(){G===this&&(G=null,se=null)}flush(){if(this.activate(),Fe.length>0){if(sa(),G!==null&&G!==this)return}else k(this,dn)===0&&this.process([]);this.deactivate()}discard(){for(const t of k(this,jn))t(this);k(this,jn).clear()}increment(t){F(this,dn,k(this,dn)+1),t&&F(this,hn,k(this,hn)+1)}decrement(t){F(this,dn,k(this,dn)-1),t&&F(this,hn,k(this,hn)-1),this.revive()}revive(){for(const t of k(this,Dn))me(t,ke),An(t);for(const t of k(this,zn))me(t,Tt),An(t);F(this,Dn,[]),F(this,zn,[]),this.flush()}oncommit(t){k(this,Vn).add(t)}ondiscard(t){k(this,jn).add(t)}settled(){return(k(this,xr)??F(this,xr,Gc())).promise}static ensure(){if(G===null){const t=G=new ho;Lr.add(G),gr||ho.enqueue(()=>{G===t&&t.flush()})}return G}static enqueue(t){Qn(t)}apply(){}};Vn=new WeakMap,jn=new WeakMap,dn=new WeakMap,hn=new WeakMap,xr=new WeakMap,Dn=new WeakMap,zn=new WeakMap,fe=new WeakSet,gi=function(t,n){var u;t.f^=ye;for(var r=t.first;r!==null;){var o=r.f,i=(o&(St|In))!==0,s=i&&(o&ye)!==0,c=s||(o&Oe)!==0||this.skipped_effects.has(r);if((r.f&yo)!==0&&((u=r.b)!=null&&u.is_pending())&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!c&&r.fn!==null){i?r.f^=ye:(o&Fi)!==0?n.effects.push(r):Sr(r)&&((r.f&Bt)!==0&&n.block_effects.push(r),vr(r));var a=r.first;if(a!==null){r=a;continue}}var f=r.parent;for(r=r.next;r===null&&f!==null;)f===n.effect&&(re(this,fe,tn).call(this,n.effects),re(this,fe,tn).call(this,n.render_effects),re(this,fe,tn).call(this,n.block_effects),n=n.parent),r=f.next,f=f.parent}},tn=function(t){for(const n of t)((n.f&ke)!==0?k(this,Dn):k(this,zn)).push(n),re(this,fe,pi).call(this,n.deps),me(n,ye)},pi=function(t){if(t!==null)for(const n of t)(n.f&ge)===0||(n.f&_n)===0||(n.f^=_n,re(this,fe,pi).call(this,n.deps))},oa=function(){if(k(this,hn)===0){for(const t of k(this,Vn))t();k(this,Vn).clear()}k(this,dn)===0&&re(this,fe,ia).call(this)},ia=function(){var i;if(Lr.size>1){this.previous.clear();var t=se,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Lr){if(s===this){n=!1;continue}const c=[];for(const[f,u]of this.current){if(s.current.has(f))if(n&&u!==s.current.get(f))s.current.set(f,u);else continue;c.push(f)}if(c.length===0)continue;const a=[...s.current.keys()].filter(f=>!this.current.has(f));if(a.length>0){var o=Fe;Fe=[];const f=new Set,u=new Map;for(const l of c)ca(l,a,f,u);if(Fe.length>0){G=s,s.apply();for(const l of Fe)re(i=s,fe,gi).call(i,l,r);s.deactivate()}Fe=o}}G=null,se=t}this.committed=!0,Lr.delete(this)};let mt=ho;function Zu(e){var t=gr;gr=!0;try{for(var n;;){if(Ku(),Fe.length===0&&(G==null||G.flush(),Fe.length===0))return bo=null,n;sa()}}finally{gr=t}}function sa(){var e=mn;hi=!0;var t=null;try{var n=0;for(Kr(!0);Fe.length>0;){var r=mt.ensure();if(n++>1e3){var o,i;Wu()}r.process(Fe),Gt.clear()}}finally{hi=!1,Kr(e),bo=null}}function Wu(){try{Hu()}catch(e){Kn(e,bo)}}let Ze=null;function Zs(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(Zt|Oe))===0&&Sr(r)&&(Ze=new Set,vr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?xa(r):r.fn=null),(Ze==null?void 0:Ze.size)>0)){Gt.clear();for(const o of Ze){if((o.f&(Zt|Oe))!==0)continue;const i=[o];let s=o.parent;for(;s!==null;)Ze.has(s)&&(Ze.delete(s),i.push(s)),s=s.parent;for(let c=i.length-1;c>=0;c--){const a=i[c];(a.f&(Zt|Oe))===0&&vr(a)}}Ze.clear()}}Ze=null}}function ca(e,t,n,r){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const o of e.reactions){const i=o.f;(i&ge)!==0?ca(o,t,n,r):(i&(Wi|Bt))!==0&&(i&ke)===0&&aa(o,t,r)&&(me(o,ke),An(o))}}function aa(e,t,n){const r=n.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const o of e.deps){if(t.includes(o))return!0;if((o.f&ge)!==0&&aa(o,t,n))return n.set(o,!0),!0}return n.set(e,!1),!1}function An(e){for(var t=bo=e;t.parent!==null;){t=t.parent;var n=t.f;if(hi&&t===ee&&(n&Bt)!==0&&(n&Yc)===0)return;if((n&(In|St))!==0){if((n&ye)===0)return;t.f^=ye}}Fe.push(t)}function Gu(e){let t=0,n=Bn(0),r;return()=>{yr()&&(st(n),mo(()=>(t===0&&(r=$n(()=>e(()=>pr(n)))),t+=1,()=>{Qn(()=>{t-=1,t===0&&(r==null||r(),r=void 0,pr(n))})})))}}var Yu=xn|Jn|yo;function Xu(e,t,n){new Ju(e,t,n)}var qe,Ve,zi,et,gn,tt,je,Be,nt,wt,jt,pn,Dt,wn,zt,go,ue,Qu,ed,wi,Mr,Pr,yi;class Ju{constructor(t,n,r){X(this,ue);M(this,"parent");X(this,qe,!1);X(this,Ve);X(this,zi,null);X(this,et);X(this,gn);X(this,tt);X(this,je,null);X(this,Be,null);X(this,nt,null);X(this,wt,null);X(this,jt,null);X(this,pn,0);X(this,Dt,0);X(this,wn,!1);X(this,zt,null);X(this,go,Gu(()=>(F(this,zt,Bn(k(this,pn))),()=>{F(this,zt,null)})));F(this,Ve,t),F(this,et,n),F(this,gn,r),this.parent=ee.b,F(this,qe,!!k(this,et).pending),F(this,tt,Eo(()=>{ee.b=this;{var o=re(this,ue,wi).call(this);try{F(this,je,Ke(()=>r(o)))}catch(i){this.error(i)}k(this,Dt)>0?re(this,ue,Pr).call(this):F(this,qe,!1)}return()=>{var i;(i=k(this,jt))==null||i.remove()}},Yu))}is_pending(){return k(this,qe)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!k(this,et).pending}update_pending_count(t){re(this,ue,yi).call(this,t),F(this,pn,k(this,pn)+t),k(this,zt)&&Zn(k(this,zt),k(this,pn))}get_effect_pending(){return k(this,go).call(this),st(k(this,zt))}error(t){var n=k(this,et).onerror;let r=k(this,et).failed;if(k(this,wn)||!n&&!r)throw t;k(this,je)&&(Ie(k(this,je)),F(this,je,null)),k(this,Be)&&(Ie(k(this,Be)),F(this,Be,null)),k(this,nt)&&(Ie(k(this,nt)),F(this,nt,null));var o=!1,i=!1;const s=()=>{if(o){ju();return}o=!0,i&&Vu(),mt.ensure(),F(this,pn,0),k(this,nt)!==null&&vn(k(this,nt),()=>{F(this,nt,null)}),F(this,qe,this.has_pending_snippet()),F(this,je,re(this,ue,Mr).call(this,()=>(F(this,wn,!1),Ke(()=>k(this,gn).call(this,k(this,Ve)))))),k(this,Dt)>0?re(this,ue,Pr).call(this):F(this,qe,!1)};var c=Y;try{Se(null),i=!0,n==null||n(t,s),i=!1}catch(a){Kn(a,k(this,tt)&&k(this,tt).parent)}finally{Se(c)}r&&Qn(()=>{F(this,nt,re(this,ue,Mr).call(this,()=>{mt.ensure(),F(this,wn,!0);try{return Ke(()=>{r(k(this,Ve),()=>t,()=>s)})}catch(a){return Kn(a,k(this,tt).parent),null}finally{F(this,wn,!1)}}))})}}qe=new WeakMap,Ve=new WeakMap,zi=new WeakMap,et=new WeakMap,gn=new WeakMap,tt=new WeakMap,je=new WeakMap,Be=new WeakMap,nt=new WeakMap,wt=new WeakMap,jt=new WeakMap,pn=new WeakMap,Dt=new WeakMap,wn=new WeakMap,zt=new WeakMap,go=new WeakMap,ue=new WeakSet,Qu=function(){try{F(this,je,Ke(()=>k(this,gn).call(this,k(this,Ve))))}catch(t){this.error(t)}F(this,qe,!1)},ed=function(){const t=k(this,et).pending;t&&(F(this,Be,Ke(()=>t(k(this,Ve)))),mt.enqueue(()=>{var n=re(this,ue,wi).call(this);F(this,je,re(this,ue,Mr).call(this,()=>(mt.ensure(),Ke(()=>k(this,gn).call(this,n))))),k(this,Dt)>0?re(this,ue,Pr).call(this):(vn(k(this,Be),()=>{F(this,Be,null)}),F(this,qe,!1))}))},wi=function(){var t=k(this,Ve);return k(this,qe)&&(F(this,jt,_t()),k(this,Ve).before(k(this,jt)),t=k(this,jt)),t},Mr=function(t){var n=ee,r=Y,o=Le;at(k(this,tt)),Se(k(this,tt)),Fn(k(this,tt).ctx);try{return t()}catch(i){return ra(i),null}finally{at(n),Se(r),Fn(o)}},Pr=function(){const t=k(this,et).pending;k(this,je)!==null&&(F(this,wt,document.createDocumentFragment()),k(this,wt).append(k(this,jt)),Ba(k(this,je),k(this,wt))),k(this,Be)===null&&F(this,Be,Ke(()=>t(k(this,Ve))))},yi=function(t){var n;if(!this.has_pending_snippet()){this.parent&&re(n=this.parent,ue,yi).call(n,t);return}F(this,Dt,k(this,Dt)+t),k(this,Dt)===0&&(F(this,qe,!1),k(this,Be)&&vn(k(this,Be),()=>{F(this,Be,null)}),k(this,wt)&&(k(this,Ve).before(k(this,wt)),F(this,wt,null)))};function td(e,t,n,r){const o=Gi;if(n.length===0&&e.length===0){r(t.map(o));return}var i=G,s=ee,c=nd();function a(){Promise.all(n.map(f=>rd(f))).then(f=>{c();try{r([...t.map(o),...f])}catch(u){(s.f&Zt)===0&&Kn(u,s)}i==null||i.deactivate(),zr()}).catch(f=>{Kn(f,s)})}e.length>0?Promise.all(e).then(()=>{c();try{return a()}finally{i==null||i.deactivate(),zr()}}):a()}function nd(){var e=ee,t=Y,n=Le,r=G;return function(i=!0){at(e),Se(t),Fn(n),i&&(r==null||r.activate())}}function zr(){at(null),Se(null),Fn(null)}function Gi(e){var t=ge|ke,n=Y!==null&&(Y.f&ge)!==0?Y:null;return ee!==null&&(ee.f|=Jn),{ctx:Le,deps:null,effects:null,equals:Jc,f:t,fn:e,reactions:null,rv:0,v:pe,wv:0,parent:n??ee,ac:null}}function rd(e,t){let n=ee;n===null&&Nu();var r=n.b,o=void 0,i=Bn(pe),s=!Y,c=new Map;return pd(()=>{var d;var a=Gc();o=a.promise;try{Promise.resolve(e()).then(a.resolve,a.reject).then(()=>{f===G&&f.committed&&f.deactivate(),zr()})}catch(h){a.reject(h),zr()}var f=G;if(s){var u=!r.is_pending();r.update_pending_count(1),f.increment(u),(d=c.get(f))==null||d.reject(Cn),c.delete(f),c.set(f,a)}const l=(h,p=void 0)=>{if(f.activate(),p)p!==Cn&&(i.f|=Wt,Zn(i,p));else{(i.f&Wt)!==0&&(i.f^=Wt),Zn(i,h);for(const[g,y]of c){if(c.delete(g),g===f)break;y.reject(Cn)}}s&&(r.update_pending_count(-1),f.decrement(u))};a.promise.then(l,h=>l(null,h||"unknown"))}),Xi(()=>{for(const a of c.values())a.reject(Cn)}),new Promise(a=>{function f(u){function l(){u===o?a(i):f(o)}u.then(l,l)}f(o)})}function Jy(e){const t=Gi(e);return Sa(t),t}function od(e){const t=Gi(e);return t.equals=ea,t}function fa(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ie(t[n])}}function id(e){for(var t=e.parent;t!==null;){if((t.f&ge)===0)return(t.f&Zt)===0?t:null;t=t.parent}return null}function Yi(e){var t,n=ee;at(id(e));try{e.f&=~_n,fa(e),t=ka(e)}finally{at(n)}return t}function la(e){var t=Yi(e);if(e.equals(t)||(G!=null&&G.is_fork||(e.v=t),e.wv=Ia()),!er)if(se!==null)(yr()||G!=null&&G.is_fork)&&se.set(e,t);else{var n=(e.f&Ge)===0?Tt:ye;me(e,n)}}let bi=new Set;const Gt=new Map;let ua=!1;function Bn(e,t){var n={f:0,v:e,reactions:null,equals:Jc,rv:0,wv:0};return n}function Nt(e,t){const n=Bn(e);return Sa(n),n}function da(e,t=!1,n=!0){const r=Bn(e);return t||(r.equals=ea),r}function Vt(e,t,n=!1){Y!==null&&(!it||(Y.f&Ks)!==0)&&ta()&&(Y.f&(ge|Bt|Wi|Ks))!==0&&!(xe!=null&&xe.includes(e))&&qu();let r=n?lr(t):t;return Zn(e,r)}function Zn(e,t){if(!e.equals(t)){var n=e.v;er?Gt.set(e,t):Gt.set(e,n),e.v=t;var r=mt.ensure();r.capture(e,n),(e.f&ge)!==0&&((e.f&ke)!==0&&Yi(e),me(e,(e.f&Ge)!==0?ye:Tt)),e.wv=Ia(),ha(e,ke),ee!==null&&(ee.f&ye)!==0&&(ee.f&(St|In))===0&&(Pe===null?bd([e]):Pe.push(e)),!r.is_fork&&bi.size>0&&!ua&&sd()}return t}function sd(){ua=!1;var e=mn;Kr(!0);const t=Array.from(bi);try{for(const n of t)(n.f&ye)!==0&&me(n,Tt),Sr(n)&&vr(n)}finally{Kr(e)}bi.clear()}function pr(e){Vt(e,e.v+1)}function ha(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,o=0;o<r;o++){var i=n[o],s=i.f,c=(s&ke)===0;if(c&&me(i,t),(s&ge)!==0){var a=i;se==null||se.delete(a),(s&_n)===0&&(s&Ge&&(i.f|=_n),ha(a,Tt))}else c&&((s&Bt)!==0&&Ze!==null&&Ze.add(i),An(i))}}function lr(e){if(typeof e!="object"||e===null||hr in e)return e;const t=Zc(e);if(t!==Tu&&t!==Iu)return e;var n=new Map,r=Fc(e),o=Nt(0),i=En,s=c=>{if(En===i)return c();var a=Y,f=En;Se(null),Xs(i);var u=c();return Se(a),Xs(f),u};return r&&n.set("length",Nt(e.length)),new Proxy(e,{defineProperty(c,a,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Mu();var u=n.get(a);return u===void 0?u=s(()=>{var l=Nt(f.value);return n.set(a,l),l}):Vt(u,f.value,!0),!0},deleteProperty(c,a){var f=n.get(a);if(f===void 0){if(a in c){const u=s(()=>Nt(pe));n.set(a,u),pr(o)}}else Vt(f,pe),pr(o);return!0},get(c,a,f){var h;if(a===hr)return e;var u=n.get(a),l=a in c;if(u===void 0&&(!l||(h=bn(c,a))!=null&&h.writable)&&(u=s(()=>{var p=lr(l?c[a]:pe),g=Nt(p);return g}),n.set(a,u)),u!==void 0){var d=st(u);return d===pe?void 0:d}return Reflect.get(c,a,f)},getOwnPropertyDescriptor(c,a){var f=Reflect.getOwnPropertyDescriptor(c,a);if(f&&"value"in f){var u=n.get(a);u&&(f.value=st(u))}else if(f===void 0){var l=n.get(a),d=l==null?void 0:l.v;if(l!==void 0&&d!==pe)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return f},has(c,a){var d;if(a===hr)return!0;var f=n.get(a),u=f!==void 0&&f.v!==pe||Reflect.has(c,a);if(f!==void 0||ee!==null&&(!u||(d=bn(c,a))!=null&&d.writable)){f===void 0&&(f=s(()=>{var h=u?lr(c[a]):pe,p=Nt(h);return p}),n.set(a,f));var l=st(f);if(l===pe)return!1}return u},set(c,a,f,u){var $;var l=n.get(a),d=a in c;if(r&&a==="length")for(var h=f;h<l.v;h+=1){var p=n.get(h+"");p!==void 0?Vt(p,pe):h in c&&(p=s(()=>Nt(pe)),n.set(h+"",p))}if(l===void 0)(!d||($=bn(c,a))!=null&&$.writable)&&(l=s(()=>Nt(void 0)),Vt(l,lr(f)),n.set(a,l));else{d=l.v!==pe;var g=s(()=>lr(f));Vt(l,g)}var y=Reflect.getOwnPropertyDescriptor(c,a);if(y!=null&&y.set&&y.set.call(u,f),!d){if(r&&typeof a=="string"){var m=n.get("length"),I=Number(a);Number.isInteger(I)&&I>=m.v&&Vt(m,I+1)}pr(o)}return!0},ownKeys(c){st(o);var a=Reflect.ownKeys(c).filter(l=>{var d=n.get(l);return d===void 0||d.v!==pe});for(var[f,u]of n)u.v!==pe&&!(f in c)&&a.push(f);return a},setPrototypeOf(){Pu()}})}var Ws,ga,pa,wa;function cd(){if(Ws===void 0){Ws=window,ga=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;pa=bn(t,"firstChild").get,wa=bn(t,"nextSibling").get,Fs(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Fs(n)&&(n.__t=void 0)}}function _t(e=""){return document.createTextNode(e)}function Fr(e){return pa.call(e)}function Br(e){return wa.call(e)}function Qy(e,t){return Fr(e)}function eb(e,t=!1){{var n=Fr(e);return n instanceof Comment&&n.data===""?Br(n):n}}function tb(e,t=1,n=!1){let r=e;for(;t--;)r=Br(r);return r}function ad(e){e.textContent=""}function ya(){return!1}let Gs=!1;function fd(){Gs||(Gs=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function vo(e){var t=Y,n=ee;Se(null),at(null);try{return e()}finally{Se(t),at(n)}}function ba(e,t,n,r=n){e.addEventListener(t,()=>vo(n));const o=e.__on_r;o?e.__on_r=()=>{o(),r(!0)}:e.__on_r=()=>r(!0),fd()}function ld(e){ee===null&&(Y===null&&Cu(),Ou()),er&&Ru()}function ud(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function It(e,t,n){var r=ee;r!==null&&(r.f&Oe)!==0&&(e|=Oe);var o={ctx:Le,deps:null,nodes:null,f:e|ke|Ge,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{vr(o),o.f|=Zi}catch(c){throw Ie(o),c}else t!==null&&An(o);var i=o;if(n&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Jn)===0&&(i=i.first,(e&Bt)!==0&&(e&xn)!==0&&i!==null&&(i.f|=xn)),i!==null&&(i.parent=r,r!==null&&ud(i,r),Y!==null&&(Y.f&ge)!==0&&(e&In)===0)){var s=Y;(s.effects??(s.effects=[])).push(i)}return o}function yr(){return Y!==null&&!it}function Xi(e){const t=It(Ki,null,!1);return me(t,ye),t.teardown=e,t}function dd(e){ld();var t=ee.f,n=!Y&&(t&St)!==0&&(t&Zi)===0;if(n){var r=Le;(r.e??(r.e=[])).push(e)}else return va(e)}function va(e){return It(Fi|ku,e,!1)}function hd(e){mt.ensure();const t=It(In|Jn,e,!0);return(n={})=>new Promise(r=>{n.outro?vn(t,()=>{Ie(t),r(void 0)}):(Ie(t),r(void 0))})}function gd(e){return It(Fi,e,!1)}function pd(e){return It(Wi|Jn,e,!0)}function mo(e,t=0){return It(Ki|t,e,!0)}function nb(e,t=[],n=[],r=[]){td(r,t,n,o=>{It(Ki,()=>e(...o.map(st)),!0)})}function Eo(e,t=0){var n=It(Bt|t,e,!0);return n}function Ke(e){return It(St|Jn,e,!0)}function ma(e){var t=e.teardown;if(t!==null){const n=er,r=Y;Ys(!0),Se(null);try{t.call(null)}finally{Ys(n),Se(r)}}}function Ea(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const o=n.ac;o!==null&&vo(()=>{o.abort(Cn)});var r=n.next;(n.f&In)!==0?n.parent=null:Ie(n,t),n=r}}function wd(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&St)===0&&Ie(t),t=n}}function Ie(e,t=!0){var n=!1;(t||(e.f&Yc)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(yd(e.nodes.start,e.nodes.end),n=!0),Ea(e,t&&!n),Zr(e,0),me(e,Zt);var r=e.nodes&&e.nodes.t;if(r!==null)for(const i of r)i.stop();ma(e);var o=e.parent;o!==null&&o.first!==null&&xa(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function yd(e,t){for(;e!==null;){var n=e===t?null:Br(e);e.remove(),e=n}}function xa(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function vn(e,t,n=!0){var r=[];_a(e,r,!0);var o=()=>{n&&Ie(e),t&&t()},i=r.length;if(i>0){var s=()=>--i||o();for(var c of r)c.out(s)}else o()}function _a(e,t,n){if((e.f&Oe)===0){e.f^=Oe;var r=e.nodes&&e.nodes.t;if(r!==null)for(const c of r)(c.is_global||n)&&t.push(c);for(var o=e.first;o!==null;){var i=o.next,s=(o.f&xn)!==0||(o.f&St)!==0&&(e.f&Bt)!==0;_a(o,t,s?n:!1),o=i}}}function Ji(e){Aa(e,!0)}function Aa(e,t){if((e.f&Oe)!==0){e.f^=Oe,(e.f&ye)===0&&(me(e,ke),An(e));for(var n=e.first;n!==null;){var r=n.next,o=(n.f&xn)!==0||(n.f&St)!==0;Aa(n,o?t:!1),n=r}var i=e.nodes&&e.nodes.t;if(i!==null)for(const s of i)(s.is_global||t)&&s.in()}}function Ba(e,t){if(e.nodes)for(var n=e.nodes.start,r=e.nodes.end;n!==null;){var o=n===r?null:Br(n);t.append(n),n=o}}let mn=!1;function Kr(e){mn=e}let er=!1;function Ys(e){er=e}let Y=null,it=!1;function Se(e){Y=e}let ee=null;function at(e){ee=e}let xe=null;function Sa(e){Y!==null&&(xe===null?xe=[e]:xe.push(e))}let Ee=null,Ne=0,Pe=null;function bd(e){Pe=e}let Ta=1,br=0,En=br;function Xs(e){En=e}function Ia(){return++Ta}function Sr(e){var t=e.f;if((t&ke)!==0)return!0;if(t&ge&&(e.f&=~_n),(t&Tt)!==0){var n=e.deps;if(n!==null)for(var r=n.length,o=0;o<r;o++){var i=n[o];if(Sr(i)&&la(i),i.wv>e.wv)return!0}(t&Ge)!==0&&se===null&&me(e,ye)}return!1}function $a(e,t,n=!0){var r=e.reactions;if(r!==null&&!(xe!=null&&xe.includes(e)))for(var o=0;o<r.length;o++){var i=r[o];(i.f&ge)!==0?$a(i,t,!1):t===i&&(n?me(i,ke):(i.f&ye)!==0&&me(i,Tt),An(i))}}function ka(e){var p;var t=Ee,n=Ne,r=Pe,o=Y,i=xe,s=Le,c=it,a=En,f=e.f;Ee=null,Ne=0,Pe=null,Y=(f&(St|In))===0?e:null,xe=null,Fn(e.ctx),it=!1,En=++br,e.ac!==null&&(vo(()=>{e.ac.abort(Cn)}),e.ac=null);try{e.f|=di;var u=e.fn,l=u(),d=e.deps;if(Ee!==null){var h;if(Zr(e,Ne),d!==null&&Ne>0)for(d.length=Ne+Ee.length,h=0;h<Ee.length;h++)d[Ne+h]=Ee[h];else e.deps=d=Ee;if(yr()&&(e.f&Ge)!==0)for(h=Ne;h<d.length;h++)((p=d[h]).reactions??(p.reactions=[])).push(e)}else d!==null&&Ne<d.length&&(Zr(e,Ne),d.length=Ne);if(ta()&&Pe!==null&&!it&&d!==null&&(e.f&(ge|Tt|ke))===0)for(h=0;h<Pe.length;h++)$a(Pe[h],e);return o!==null&&o!==e&&(br++,Pe!==null&&(r===null?r=Pe:r.push(...Pe))),(e.f&Wt)!==0&&(e.f^=Wt),l}catch(g){return ra(g)}finally{e.f^=di,Ee=t,Ne=n,Pe=r,Y=o,xe=i,Fn(s),it=c,En=a}}function vd(e,t){let n=t.reactions;if(n!==null){var r=Bu.call(n,e);if(r!==-1){var o=n.length-1;o===0?n=t.reactions=null:(n[r]=n[o],n.pop())}}n===null&&(t.f&ge)!==0&&(Ee===null||!Ee.includes(t))&&(me(t,Tt),(t.f&Ge)!==0&&(t.f^=Ge,t.f&=~_n),fa(t),Zr(t,0))}function Zr(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)vd(e,n[r])}function vr(e){var t=e.f;if((t&Zt)===0){me(e,ye);var n=ee,r=mn;ee=e,mn=!0;try{(t&(Bt|$u))!==0?wd(e):Ea(e),ma(e);var o=ka(e);e.teardown=typeof o=="function"?o:null,e.wv=Ta;var i;ui&&Du&&(e.f&ke)!==0&&e.deps}finally{mn=r,ee=n}}}async function md(){await Promise.resolve(),Zu()}function st(e){var t=e.f,n=(t&ge)!==0;if(Y!==null&&!it){var r=ee!==null&&(ee.f&Zt)!==0;if(!r&&!(xe!=null&&xe.includes(e))){var o=Y.deps;if((Y.f&di)!==0)e.rv<br&&(e.rv=br,Ee===null&&o!==null&&o[Ne]===e?Ne++:Ee===null?Ee=[e]:Ee.includes(e)||Ee.push(e));else{(Y.deps??(Y.deps=[])).push(e);var i=e.reactions;i===null?e.reactions=[Y]:i.includes(Y)||i.push(Y)}}}if(er){if(Gt.has(e))return Gt.get(e);if(n){var s=e,c=s.v;return((s.f&ye)===0&&s.reactions!==null||Ua(s))&&(c=Yi(s)),Gt.set(s,c),c}}else n&&(!(se!=null&&se.has(e))||G!=null&&G.is_fork&&!yr())&&(s=e,Sr(s)&&la(s),mn&&yr()&&(s.f&Ge)===0&&La(s));if(se!=null&&se.has(e))return se.get(e);if((e.f&Wt)!==0)throw e.v;return e.v}function La(e){if(e.deps!==null){e.f^=Ge;for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&ge)!==0&&(t.f&Ge)===0&&La(t)}}function Ua(e){if(e.v===pe)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Gt.has(t)||(t.f&ge)!==0&&Ua(t))return!0;return!1}function $n(e){var t=it;try{return it=!0,e()}finally{it=t}}const Ed=-7169;function me(e,t){e.f=e.f&Ed|t}const Na=new Set,vi=new Set;function xd(e,t,n,r={}){function o(i){if(r.capture||ur.call(t,i),!i.cancelBubble)return vo(()=>n==null?void 0:n.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Qn(()=>{t.addEventListener(e,o,r)}):t.addEventListener(e,o,r),o}function rb(e,t,n,r,o){var i={capture:r,passive:o},s=xd(e,t,n,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Xi(()=>{t.removeEventListener(e,s,i)})}function ob(e){for(var t=0;t<e.length;t++)Na.add(e[t]);for(var n of vi)n(e)}let Js=null;function ur(e){var y;var t=this,n=t.ownerDocument,r=e.type,o=((y=e.composedPath)==null?void 0:y.call(e))||[],i=o[0]||e.target;Js=e;var s=0,c=Js===e&&e.__root;if(c){var a=o.indexOf(c);if(a!==-1&&(t===document||t===window)){e.__root=t;return}var f=o.indexOf(t);if(f===-1)return;a<=f&&(s=a)}if(i=o[s]||e.target,i!==t){Kc(e,"currentTarget",{configurable:!0,get(){return i||n}});var u=Y,l=ee;Se(null),at(null);try{for(var d,h=[];i!==null;){var p=i.assignedSlot||i.parentNode||i.host||null;try{var g=i["__"+r];g!=null&&(!i.disabled||e.target===i)&&g.call(i,e)}catch(m){d?h.push(m):d=m}if(e.cancelBubble||p===t||p===null)break;i=p}if(d){for(let m of h)queueMicrotask(()=>{throw m});throw d}}finally{e.__root=t,delete e.currentTarget,Se(u),at(l)}}}function _d(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Wr(e,t){var n=ee;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function ib(e,t){var n=(t&xu)!==0,r=(t&_u)!==0,o,i=!e.startsWith("<!>");return()=>{o===void 0&&(o=_d(i?e:"<!>"+e),n||(o=Fr(o)));var s=r||ga?document.importNode(o,!0):o.cloneNode(!0);if(n){var c=Fr(s),a=s.lastChild;Wr(c,a)}else Wr(s,s);return s}}function sb(e=""){{var t=_t(e+"");return Wr(t,t),t}}function cb(){var e=document.createDocumentFragment(),t=document.createComment(""),n=_t();return e.append(t,n),Wr(t,n),e}function ab(e,t){e!==null&&e.before(t)}const Ad=["touchstart","touchmove"];function Bd(e){return Ad.includes(e)}function fb(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function lb(e,t){return Sd(e,t)}const Un=new Map;function Sd(e,{target:t,anchor:n,props:r={},events:o,context:i,intro:s=!0}){cd();var c=new Set,a=l=>{for(var d=0;d<l.length;d++){var h=l[d];if(!c.has(h)){c.add(h);var p=Bd(h);t.addEventListener(h,ur,{passive:p});var g=Un.get(h);g===void 0?(document.addEventListener(h,ur,{passive:p}),Un.set(h,1)):Un.set(h,g+1)}}};a(wo(Na)),vi.add(a);var f=void 0,u=hd(()=>{var l=n??t.appendChild(_t());return Xu(l,{pending:()=>{}},d=>{if(i){zu({});var h=Le;h.c=i}o&&(r.$$events=o),f=e(d,r)||{},i&&Fu()}),()=>{var p;for(var d of c){t.removeEventListener(d,ur);var h=Un.get(d);--h===0?(document.removeEventListener(d,ur),Un.delete(d)):Un.set(d,h)}vi.delete(a),l!==n&&((p=l.parentNode)==null||p.removeChild(l))}});return Td.set(f,u),f}let Td=new WeakMap;var We,rt,Re,yn,_r,Ar,po;class Ra{constructor(t,n=!0){M(this,"anchor");X(this,We,new Map);X(this,rt,new Map);X(this,Re,new Map);X(this,yn,new Set);X(this,_r,!0);X(this,Ar,()=>{var t=G;if(k(this,We).has(t)){var n=k(this,We).get(t),r=k(this,rt).get(n);if(r)Ji(r),k(this,yn).delete(n);else{var o=k(this,Re).get(n);o&&(k(this,rt).set(n,o.effect),k(this,Re).delete(n),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[i,s]of k(this,We)){if(k(this,We).delete(i),i===t)break;const c=k(this,Re).get(s);c&&(Ie(c.effect),k(this,Re).delete(s))}for(const[i,s]of k(this,rt)){if(i===n||k(this,yn).has(i))continue;const c=()=>{if(Array.from(k(this,We).values()).includes(i)){var f=document.createDocumentFragment();Ba(s,f),f.append(_t()),k(this,Re).set(i,{effect:s,fragment:f})}else Ie(s);k(this,yn).delete(i),k(this,rt).delete(i)};k(this,_r)||!r?(k(this,yn).add(i),vn(s,c,!1)):c()}}});X(this,po,t=>{k(this,We).delete(t);const n=Array.from(k(this,We).values());for(const[r,o]of k(this,Re))n.includes(r)||(Ie(o.effect),k(this,Re).delete(r))});this.anchor=t,F(this,_r,n)}ensure(t,n){var r=G,o=ya();if(n&&!k(this,rt).has(t)&&!k(this,Re).has(t))if(o){var i=document.createDocumentFragment(),s=_t();i.append(s),k(this,Re).set(t,{effect:Ke(()=>n(s)),fragment:i})}else k(this,rt).set(t,Ke(()=>n(this.anchor)));if(k(this,We).set(r,t),o){for(const[c,a]of k(this,rt))c===t?r.skipped_effects.delete(a):r.skipped_effects.add(a);for(const[c,a]of k(this,Re))c===t?r.skipped_effects.delete(a.effect):r.skipped_effects.add(a.effect);r.oncommit(k(this,Ar)),r.ondiscard(k(this,po))}else k(this,Ar).call(this)}}We=new WeakMap,rt=new WeakMap,Re=new WeakMap,yn=new WeakMap,_r=new WeakMap,Ar=new WeakMap,po=new WeakMap;function Id(e){Le===null&&Xc(),dd(()=>{const t=$n(e);if(typeof t=="function")return t})}function ub(e){Le===null&&Xc(),Id(()=>()=>$n(e))}function db(e,t,n=!1){var r=new Ra(e),o=n?xn:0;function i(s,c){r.ensure(s,c)}Eo(()=>{var s=!1;t((c,a=!0)=>{s=!0,i(a,c)}),s||i(!1,null)},o)}function $d(e,t,n){for(var r=[],o=t.length,i,s=t.length,c=0;c<o;c++){let l=t[c];vn(l,()=>{if(i){if(i.pending.delete(l),i.done.add(l),i.pending.size===0){var d=e.outrogroups;mi(wo(i.done)),d.delete(i),d.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var a=r.length===0&&n!==null;if(a){var f=n,u=f.parentNode;ad(u),u.append(f),e.items.clear()}mi(t,!a)}else i={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(i)}function mi(e,t=!0){for(var n=0;n<e.length;n++)Ie(e[n],t)}var Qs;function hb(e,t,n,r,o,i=null){var s=e,c=new Map,a=(t&zc)!==0;if(a){var f=e;s=f.appendChild(_t())}var u=null,l=od(()=>{var m=n();return Fc(m)?m:m==null?[]:wo(m)}),d,h=!0;function p(){y.fallback=u,kd(y,d,s,t,r),u!==null&&(d.length===0?(u.f&vt)===0?Ji(u):(u.f^=vt,dr(u,null,s)):vn(u,()=>{u=null}))}var g=Eo(()=>{d=st(l);for(var m=d.length,I=new Set,$=G,H=ya(),P=0;P<m;P+=1){var U=d[P],R=r(U,P),O=h?null:c.get(R);O?(O.v&&Zn(O.v,U),O.i&&Zn(O.i,P),H&&$.skipped_effects.delete(O.e)):(O=Ld(c,h?s:Qs??(Qs=_t()),U,R,P,o,t,n),h||(O.e.f|=vt),c.set(R,O)),I.add(R)}if(m===0&&i&&!u&&(h?u=Ke(()=>i(s)):(u=Ke(()=>i(Qs??(Qs=_t()))),u.f|=vt)),!h)if(H){for(const[C,q]of c)I.has(C)||$.skipped_effects.add(q.e);$.oncommit(p),$.ondiscard(()=>{})}else p();st(l)}),y={effect:g,items:c,outrogroups:null,fallback:u};h=!1}function kd(e,t,n,r,o){var q,_,x,b,E,w,v,A,S;var i=(r&mu)!==0,s=t.length,c=e.items,a=e.effect.first,f,u=null,l,d=[],h=[],p,g,y,m;if(i)for(m=0;m<s;m+=1)p=t[m],g=o(p,m),y=c.get(g).e,(y.f&vt)===0&&((_=(q=y.nodes)==null?void 0:q.a)==null||_.measure(),(l??(l=new Set)).add(y));for(m=0;m<s;m+=1){if(p=t[m],g=o(p,m),y=c.get(g).e,e.outrogroups!==null)for(const B of e.outrogroups)B.pending.delete(y),B.done.delete(y);if((y.f&vt)!==0)if(y.f^=vt,y===a)dr(y,null,n);else{var I=u?u.next:a;y===e.effect.last&&(e.effect.last=y.prev),y.prev&&(y.prev.next=y.next),y.next&&(y.next.prev=y.prev),Rt(e,u,y),Rt(e,y,I),dr(y,I,n),u=y,d=[],h=[],a=u.next;continue}if((y.f&Oe)!==0&&(Ji(y),i&&((b=(x=y.nodes)==null?void 0:x.a)==null||b.unfix(),(l??(l=new Set)).delete(y))),y!==a){if(f!==void 0&&f.has(y)){if(d.length<h.length){var $=h[0],H;u=$.prev;var P=d[0],U=d[d.length-1];for(H=0;H<d.length;H+=1)dr(d[H],$,n);for(H=0;H<h.length;H+=1)f.delete(h[H]);Rt(e,P.prev,U.next),Rt(e,u,P),Rt(e,U,$),a=$,u=U,m-=1,d=[],h=[]}else f.delete(y),dr(y,a,n),Rt(e,y.prev,y.next),Rt(e,y,u===null?e.effect.first:u.next),Rt(e,u,y),u=y;continue}for(d=[],h=[];a!==null&&a!==y;)(f??(f=new Set)).add(a),h.push(a),a=a.next;if(a===null)continue}(y.f&vt)===0&&d.push(y),u=y,a=y.next}if(e.outrogroups!==null){for(const B of e.outrogroups)B.pending.size===0&&(mi(wo(B.done)),(E=e.outrogroups)==null||E.delete(B));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||f!==void 0){var R=[];if(f!==void 0)for(y of f)(y.f&Oe)===0&&R.push(y);for(;a!==null;)(a.f&Oe)===0&&a!==e.fallback&&R.push(a),a=a.next;var O=R.length;if(O>0){var C=(r&zc)!==0&&s===0?n:null;if(i){for(m=0;m<O;m+=1)(v=(w=R[m].nodes)==null?void 0:w.a)==null||v.measure();for(m=0;m<O;m+=1)(S=(A=R[m].nodes)==null?void 0:A.a)==null||S.fix()}$d(e,R,C)}}i&&Qn(()=>{var B,L;if(l!==void 0)for(y of l)(L=(B=y.nodes)==null?void 0:B.a)==null||L.apply()})}function Ld(e,t,n,r,o,i,s,c){var a=(s&bu)!==0?(s&Eu)===0?da(n,!1,!1):Bn(n):null,f=(s&vu)!==0?Bn(o):null;return{v:a,i:f,e:Ke(()=>(i(t,a??n,f??o,c),()=>{e.delete(r)}))}}function dr(e,t,n){if(e.nodes)for(var r=e.nodes.start,o=e.nodes.end,i=t&&(t.f&vt)===0?t.nodes.start:n;r!==null;){var s=Br(r);if(i.before(r),r===o)return;r=s}}function Rt(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function gb(e,t,n,r,o){var c;var i=(c=t.$$slots)==null?void 0:c[n],s=!1;i===!0&&(i=t.children,s=!0),i===void 0||i(e,s?()=>r:r)}function pb(e,t,n){var r=new Ra(e);Eo(()=>{var o=t()??null;r.ensure(o,o&&(i=>n(i,o)))},xn)}function Oa(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Oa(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ud(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Oa(e))&&(r&&(r+=" "),r+=t);return r}function wb(e){return typeof e=="object"?Ud(e):e??""}function Nd(e,t,n){var r=e==null?"":""+e;return t&&(r=r?r+" "+t:t),r===""?null:r}function Rd(e,t){return e==null?null:String(e)}function yb(e,t,n,r,o,i){var s=e.__className;if(s!==n||s===void 0){var c=Nd(n,r);c==null?e.removeAttribute("class"):e.className=c,e.__className=n}return i}function bb(e,t,n,r){var o=e.__style;if(o!==t){var i=Rd(t);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}return r}const Od=Symbol("is custom element"),Cd=Symbol("is html");function vb(e,t){var n=Qi(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function mb(e,t){var n=Qi(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function Eb(e,t,n,r){var o=Qi(e);o[t]!==(o[t]=n)&&(t==="loading"&&(e[Uu]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Hd(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Qi(e){return e.__attributes??(e.__attributes={[Od]:e.nodeName.includes("-"),[Cd]:e.namespaceURI===Au})}var ec=new Map;function Hd(e){var t=e.getAttribute("is")||e.nodeName,n=ec.get(t);if(n)return n;ec.set(t,n=[]);for(var r,o=e,i=Element.prototype;i!==o;){r=Su(o);for(var s in r)r[s].set&&n.push(s);o=Zc(o)}return n}function xb(e,t,n=t){var r=new WeakSet;ba(e,"input",async o=>{var i=o?e.defaultValue:e.value;if(i=qo(e)?Vo(i):i,n(i),G!==null&&r.add(G),await md(),i!==(i=t())){var s=e.selectionStart,c=e.selectionEnd,a=e.value.length;if(e.value=i??"",c!==null){var f=e.value.length;s===c&&c===a&&f>a?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=s,e.selectionEnd=Math.min(c,f))}}}),$n(t)==null&&e.value&&(n(qo(e)?Vo(e.value):e.value),G!==null&&r.add(G)),mo(()=>{var o=t();if(e===document.activeElement){var i=Hr??G;if(r.has(i))return}qo(e)&&o===Vo(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function _b(e,t,n=t){ba(e,"change",r=>{var o=r?e.defaultChecked:e.checked;n(o)}),$n(t)==null&&n(e.checked),mo(()=>{var r=t();e.checked=!!r})}function qo(e){var t=e.type;return t==="number"||t==="range"}function Vo(e){return e===""?null:+e}function tc(e,t){return e===t||(e==null?void 0:e[hr])===t}function Ab(e={},t,n,r){return gd(()=>{var o,i;return mo(()=>{o=i,i=[],$n(()=>{e!==n(...i)&&(t(e,...i),o&&tc(n(...o),e)&&t(null,...o))})}),()=>{Qn(()=>{i&&tc(n(...i),e)&&t(null,...i)})}}),e}function es(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Kt;const r=$n(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const Nn=[];function Md(e,t){return{subscribe:Pd(e,t).subscribe}}function Pd(e,t=Kt){let n=null;const r=new Set;function o(c){if(Qc(e,c)&&(e=c,n)){const a=!Nn.length;for(const f of r)f[1](),Nn.push(f,e);if(a){for(let f=0;f<Nn.length;f+=2)Nn[f][0](Nn[f+1]);Nn.length=0}}}function i(c){o(c(e))}function s(c,a=Kt){const f=[c,a];return r.add(f),r.size===1&&(n=t(o,i)||Kt),c(e),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:o,update:i,subscribe:s}}function Bb(e,t,n){const r=!Array.isArray(e),o=r?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return Md(n,(s,c)=>{let a=!1;const f=[];let u=0,l=Kt;const d=()=>{if(u)return;l();const p=t(r?f[0]:f,s,c);i?s(p):l=typeof p=="function"?p:Kt},h=o.map((p,g)=>es(p,y=>{f[g]=y,u&=~(1<<g),a&&d()},()=>{u|=1<<g}));return a=!0,d(),function(){Wc(h),l(),a=!1}})}function qd(e){let t;return es(e,n=>t=n)(),t}let Ei=Symbol();function Sb(e,t,n){const r=n[t]??(n[t]={store:null,source:da(void 0),unsubscribe:Kt});if(r.store!==e&&!(Ei in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=Kt;else{var o=!0;r.unsubscribe=es(e,i=>{o?r.source.v=i:Vt(r.source,i)}),o=!1}return e&&Ei in n?qd(e):st(r.source)}function Tb(){const e={};function t(){Xi(()=>{for(var n in e)e[n].unsubscribe();Kc(e,Ei,{enumerable:!1,value:!0})})}return[e,t]}const Vd={get(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(sr(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r)return r[t]}},set(e,t,n){let r=e.props.length;for(;r--;){let o=e.props[r];sr(o)&&(o=o());const i=bn(o,t);if(i&&i.set)return i.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let r=e.props[n];if(sr(r)&&(r=r()),typeof r=="object"&&r!==null&&t in r){const o=bn(r,t);return o&&!o.configurable&&(o.configurable=!0),o}}},has(e,t){if(t===hr||t===Lu)return!1;for(let n of e.props)if(sr(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props)if(sr(n)&&(n=n()),!!n){for(const r in n)t.includes(r)||t.push(r);for(const r of Object.getOwnPropertySymbols(n))t.includes(r)||t.push(r)}return t}};function Ib(...e){return new Proxy({props:e},Vd)}function $b(e,t,n,r){var o=r,i=!0,s=()=>(i&&(i=!1,o=r),o),c;c=e[t],c===void 0&&r!==void 0&&(c=s());var a;return a=()=>{var f=e[t];return f===void 0?s():(i=!0,f)},a}function nc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Ca(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function jd(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");nc(e.outputLen),nc(e.blockLen)}function Gr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Dd(e,t){Ca(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const jo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ha=e=>e instanceof Uint8Array,Do=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Xe=(e,t)=>e<<32-t|e>>>t,zd=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!zd)throw new Error("Non little-endian hardware is not supported");function Fd(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ts(e){if(typeof e=="string"&&(e=Fd(e)),!Ha(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Kd(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Ha(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let Ma=class{clone(){return this._cloneInto()}};function Zd(e){const t=r=>e().update(ts(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Pa(e=32){if(jo&&typeof jo.getRandomValues=="function")return jo.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Wd(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),c=Number(n&i),a=r?4:0,f=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}let Gd=class extends Ma{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Do(this.buffer)}update(t){Gr(this);const{view:n,buffer:r,blockLen:o}=this;t=ts(t);const i=t.length;for(let s=0;s<i;){const c=Math.min(o-this.pos,i-s);if(c===o){const a=Do(t);for(;o<=i-s;s+=o)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Gr(this),Dd(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:i}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(r,0),s=0);for(let l=s;l<o;l++)n[l]=0;Wd(r,o-8,BigInt(this.length*8),i),this.process(r,0);const c=Do(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=a/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)c.setUint32(4*l,u[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:c}=this;return t.length=o,t.pos=c,t.finished=i,t.destroyed=s,o%n&&t.buffer.set(r),t}};const Yd=(e,t,n)=>e&t^~e&n,Xd=(e,t,n)=>e&t^e&n^t&n,Jd=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ot=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ct=new Uint32Array(64);let Qd=class extends Gd{constructor(){super(64,32,8,!1),this.A=Ot[0]|0,this.B=Ot[1]|0,this.C=Ot[2]|0,this.D=Ot[3]|0,this.E=Ot[4]|0,this.F=Ot[5]|0,this.G=Ot[6]|0,this.H=Ot[7]|0}get(){const{A:t,B:n,C:r,D:o,E:i,F:s,G:c,H:a}=this;return[t,n,r,o,i,s,c,a]}set(t,n,r,o,i,s,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,n){for(let l=0;l<16;l++,n+=4)Ct[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const d=Ct[l-15],h=Ct[l-2],p=Xe(d,7)^Xe(d,18)^d>>>3,g=Xe(h,17)^Xe(h,19)^h>>>10;Ct[l]=g+Ct[l-7]+p+Ct[l-16]|0}let{A:r,B:o,C:i,D:s,E:c,F:a,G:f,H:u}=this;for(let l=0;l<64;l++){const d=Xe(c,6)^Xe(c,11)^Xe(c,25),h=u+d+Yd(c,a,f)+Jd[l]+Ct[l]|0,g=(Xe(r,2)^Xe(r,13)^Xe(r,22))+Xd(r,o,i)|0;u=f,f=a,a=c,c=s+h|0,s=i,i=o,o=r,r=h+g|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(r,o,i,s,c,a,f,u)}roundClean(){Ct.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const xi=Zd(()=>new Qd);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qa=BigInt(0),xo=BigInt(1),eh=BigInt(2),_o=e=>e instanceof Uint8Array,th=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Wn(e){if(!_o(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=th[e[n]];return t}function Va(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function ns(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Gn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,i=e.slice(o,o+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function $e(e){return ns(Wn(e))}function rs(e){if(!_o(e))throw new Error("Uint8Array expected");return ns(Wn(Uint8Array.from(e).reverse()))}function Xt(e,t){return Gn(e.toString(16).padStart(t*2,"0"))}function os(e,t){return Xt(e,t).reverse()}function nh(e){return Gn(Va(e))}function we(e,t,n){let r;if(typeof t=="string")try{r=Gn(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(_o(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Sn(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!_o(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function rh(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function oh(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ih(e){let t;for(t=0;e>qa;e>>=xo,t+=1);return t}function sh(e,t){return e>>BigInt(t)&xo}const ch=(e,t,n)=>e|(n?xo:qa)<<BigInt(t),is=e=>(eh<<BigInt(e-1))-xo,zo=e=>new Uint8Array(e),rc=e=>Uint8Array.from(e);function ja(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=zo(e),o=zo(e),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},c=(...l)=>n(o,r,...l),a=(l=zo())=>{o=c(rc([0]),l),r=c(),l.length!==0&&(o=c(rc([1]),l),r=c())},f=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const d=[];for(;l<t;){r=c();const h=r.slice();d.push(h),l+=r.length}return Sn(...d)};return(l,d)=>{s(),a(l);let h;for(;!(h=d(f()));)a();return s(),h}}const ah={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Tr(e,t,n={}){const r=(o,i,s)=>{const c=ah[i];if(typeof c!="function")throw new Error(`Invalid validator "${i}", expected function`);const a=e[o];if(!(s&&a===void 0)&&!c(a,e))throw new Error(`Invalid param ${String(o)}=${a} (${typeof a}), expected ${i}`)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(n))r(o,i,!0);return e}const fh=Object.freeze(Object.defineProperty({__proto__:null,bitGet:sh,bitLen:ih,bitMask:is,bitSet:ch,bytesToHex:Wn,bytesToNumberBE:$e,bytesToNumberLE:rs,concatBytes:Sn,createHmacDrbg:ja,ensureBytes:we,equalBytes:rh,hexToBytes:Gn,hexToNumber:ns,numberToBytesBE:Xt,numberToBytesLE:os,numberToHexUnpadded:Va,numberToVarBytesBE:nh,utf8ToBytes:oh,validateObject:Tr},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const le=BigInt(0),ie=BigInt(1),rn=BigInt(2),lh=BigInt(3),_i=BigInt(4),oc=BigInt(5),ic=BigInt(8);BigInt(9);BigInt(16);function he(e,t){const n=e%t;return n>=le?n:t+n}function uh(e,t,n){if(n<=le||t<le)throw new Error("Expected power/modulo > 0");if(n===ie)return le;let r=ie;for(;t>le;)t&ie&&(r=r*e%n),e=e*e%n,t>>=ie;return r}function He(e,t,n){let r=e;for(;t-- >le;)r*=r,r%=n;return r}function Ai(e,t){if(e===le||t<=le)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=he(e,t),r=t,o=le,i=ie;for(;n!==le;){const c=r/n,a=r%n,f=o-i*c;r=n,n=a,o=i,i=f}if(r!==ie)throw new Error("invert: does not exist");return he(o,t)}function dh(e){const t=(e-ie)/rn;let n,r,o;for(n=e-ie,r=0;n%rn===le;n/=rn,r++);for(o=rn;o<e&&uh(o,t,e)!==e-ie;o++);if(r===1){const s=(e+ie)/_i;return function(a,f){const u=a.pow(f,s);if(!a.eql(a.sqr(u),f))throw new Error("Cannot find square root");return u}}const i=(n+ie)/rn;return function(c,a){if(c.pow(a,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let f=r,u=c.pow(c.mul(c.ONE,o),n),l=c.pow(a,i),d=c.pow(a,n);for(;!c.eql(d,c.ONE);){if(c.eql(d,c.ZERO))return c.ZERO;let h=1;for(let g=c.sqr(d);h<f&&!c.eql(g,c.ONE);h++)g=c.sqr(g);const p=c.pow(u,ie<<BigInt(f-h-1));u=c.sqr(p),l=c.mul(l,p),d=c.mul(d,u),f=h}return l}}function hh(e){if(e%_i===lh){const t=(e+ie)/_i;return function(r,o){const i=r.pow(o,t);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%ic===oc){const t=(e-oc)/ic;return function(r,o){const i=r.mul(o,rn),s=r.pow(i,t),c=r.mul(o,s),a=r.mul(r.mul(c,rn),s),f=r.mul(c,r.sub(a,r.ONE));if(!r.eql(r.sqr(f),o))throw new Error("Cannot find square root");return f}}return dh(e)}const gh=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ph(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=gh.reduce((r,o)=>(r[o]="function",r),t);return Tr(e,n)}function wh(e,t,n){if(n<le)throw new Error("Expected power > 0");if(n===le)return e.ONE;if(n===ie)return t;let r=e.ONE,o=t;for(;n>le;)n&ie&&(r=e.mul(r,o)),o=e.sqr(o),n>>=ie;return r}function yh(e,t){const n=new Array(t.length),r=t.reduce((i,s,c)=>e.is0(s)?i:(n[c]=i,e.mul(i,s)),e.ONE),o=e.inv(r);return t.reduceRight((i,s,c)=>e.is0(s)?i:(n[c]=e.mul(i,n[c]),e.mul(i,s)),o),n}function Da(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function bh(e,t,n=!1,r={}){if(e<=le)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:i}=Da(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=hh(e),c=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:is(o),ZERO:le,ONE:ie,create:a=>he(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof a}`);return le<=a&&a<e},is0:a=>a===le,isOdd:a=>(a&ie)===ie,neg:a=>he(-a,e),eql:(a,f)=>a===f,sqr:a=>he(a*a,e),add:(a,f)=>he(a+f,e),sub:(a,f)=>he(a-f,e),mul:(a,f)=>he(a*f,e),pow:(a,f)=>wh(c,a,f),div:(a,f)=>he(a*Ai(f,e),e),sqrN:a=>a*a,addN:(a,f)=>a+f,subN:(a,f)=>a-f,mulN:(a,f)=>a*f,inv:a=>Ai(a,e),sqrt:r.sqrt||(a=>s(c,a)),invertBatch:a=>yh(c,a),cmov:(a,f,u)=>u?f:a,toBytes:a=>n?os(a,i):Xt(a,i),fromBytes:a=>{if(a.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${a.length}`);return n?rs(a):$e(a)}});return Object.freeze(c)}function za(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Fa(e){const t=za(e);return t+Math.ceil(t/2)}function vh(e,t,n=!1){const r=e.length,o=za(t),i=Fa(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const s=n?$e(e):rs(e),c=he(s,t-ie)+ie;return n?os(c,o):Xt(c,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mh=BigInt(0),Fo=BigInt(1);function Eh(e,t){const n=(o,i)=>{const s=i.negate();return o?s:i},r=o=>{const i=Math.ceil(t/o)+1,s=2**(o-1);return{windows:i,windowSize:s}};return{constTimeNegate:n,unsafeLadder(o,i){let s=e.ZERO,c=o;for(;i>mh;)i&Fo&&(s=s.add(c)),c=c.double(),i>>=Fo;return s},precomputeWindow(o,i){const{windows:s,windowSize:c}=r(i),a=[];let f=o,u=f;for(let l=0;l<s;l++){u=f,a.push(u);for(let d=1;d<c;d++)u=u.add(f),a.push(u);f=u.double()}return a},wNAF(o,i,s){const{windows:c,windowSize:a}=r(o);let f=e.ZERO,u=e.BASE;const l=BigInt(2**o-1),d=2**o,h=BigInt(o);for(let p=0;p<c;p++){const g=p*a;let y=Number(s&l);s>>=h,y>a&&(y-=d,s+=Fo);const m=g,I=g+Math.abs(y)-1,$=p%2!==0,H=y<0;y===0?u=u.add(n($,i[m])):f=f.add(n(H,i[I]))}return{p:f,f:u}},wNAFCached(o,i,s,c){const a=o._WINDOW_SIZE||1;let f=i.get(o);return f||(f=this.precomputeWindow(o,a),a!==1&&i.set(o,c(f))),this.wNAF(a,f,s)}}}function Ka(e){return ph(e.Fp),Tr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Da(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xh(e){const t=Ka(e);Tr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:_h,hexToBytes:Ah}=fh,cn={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=cn;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:_h(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=cn,n=typeof e=="string"?Ah(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:i}=cn._parseInt(n.subarray(2)),{d:s,l:c}=cn._parseInt(i);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s}},hexFromSig(e){const t=f=>Number.parseInt(f[0],16)&8?"00"+f:f,n=f=>{const u=f.toString(16);return u.length&1?`0${u}`:u},r=t(n(e.s)),o=t(n(e.r)),i=r.length/2,s=o.length/2,c=n(i),a=n(s);return`30${n(s+i+4)}02${a}${o}02${c}${r}`}},yt=BigInt(0),De=BigInt(1);BigInt(2);const sc=BigInt(3);BigInt(4);function Bh(e){const t=xh(e),{Fp:n}=t,r=t.toBytes||((p,g,y)=>{const m=g.toAffine();return Sn(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),o=t.fromBytes||(p=>{const g=p.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),m=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:m}});function i(p){const{a:g,b:y}=t,m=n.sqr(p),I=n.mul(m,p);return n.add(n.add(I,n.mul(p,g)),y)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function s(p){return typeof p=="bigint"&&yt<p&&p<t.n}function c(p){if(!s(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function a(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:m,n:I}=t;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=Wn(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let $;try{$=typeof p=="bigint"?p:$e(we("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return m&&($=he($,I)),c($),$}const f=new Map;function u(p){if(!(p instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(g,y,m){if(this.px=g,this.py=y,this.pz=m,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(g){const{x:y,y:m}=g||{};if(!g||!n.isValid(y)||!n.isValid(m))throw new Error("invalid affine point");if(g instanceof l)throw new Error("projective point not allowed");const I=$=>n.eql($,n.ZERO);return I(y)&&I(m)?l.ZERO:new l(y,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(m=>m.pz));return g.map((m,I)=>m.toAffine(y[I])).map(l.fromAffine)}static fromHex(g){const y=l.fromAffine(o(we("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return l.BASE.multiply(a(g))}_setWindowSize(g){this._WINDOW_SIZE=g,f.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const m=n.sqr(y),I=i(g);if(!n.eql(m,I))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:m,pz:I}=this,{px:$,py:H,pz:P}=g,U=n.eql(n.mul(y,P),n.mul($,I)),R=n.eql(n.mul(m,P),n.mul(H,I));return U&&R}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=t,m=n.mul(y,sc),{px:I,py:$,pz:H}=this;let P=n.ZERO,U=n.ZERO,R=n.ZERO,O=n.mul(I,I),C=n.mul($,$),q=n.mul(H,H),_=n.mul(I,$);return _=n.add(_,_),R=n.mul(I,H),R=n.add(R,R),P=n.mul(g,R),U=n.mul(m,q),U=n.add(P,U),P=n.sub(C,U),U=n.add(C,U),U=n.mul(P,U),P=n.mul(_,P),R=n.mul(m,R),q=n.mul(g,q),_=n.sub(O,q),_=n.mul(g,_),_=n.add(_,R),R=n.add(O,O),O=n.add(R,O),O=n.add(O,q),O=n.mul(O,_),U=n.add(U,O),q=n.mul($,H),q=n.add(q,q),O=n.mul(q,_),P=n.sub(P,O),R=n.mul(q,C),R=n.add(R,R),R=n.add(R,R),new l(P,U,R)}add(g){u(g);const{px:y,py:m,pz:I}=this,{px:$,py:H,pz:P}=g;let U=n.ZERO,R=n.ZERO,O=n.ZERO;const C=t.a,q=n.mul(t.b,sc);let _=n.mul(y,$),x=n.mul(m,H),b=n.mul(I,P),E=n.add(y,m),w=n.add($,H);E=n.mul(E,w),w=n.add(_,x),E=n.sub(E,w),w=n.add(y,I);let v=n.add($,P);return w=n.mul(w,v),v=n.add(_,b),w=n.sub(w,v),v=n.add(m,I),U=n.add(H,P),v=n.mul(v,U),U=n.add(x,b),v=n.sub(v,U),O=n.mul(C,w),U=n.mul(q,b),O=n.add(U,O),U=n.sub(x,O),O=n.add(x,O),R=n.mul(U,O),x=n.add(_,_),x=n.add(x,_),b=n.mul(C,b),w=n.mul(q,w),x=n.add(x,b),b=n.sub(_,b),b=n.mul(C,b),w=n.add(w,b),_=n.mul(x,w),R=n.add(R,_),_=n.mul(v,w),U=n.mul(E,U),U=n.sub(U,_),_=n.mul(E,x),O=n.mul(v,O),O=n.add(O,_),new l(U,R,O)}subtract(g){return this.add(g.negate())}is0(){return this.equals(l.ZERO)}wNAF(g){return h.wNAFCached(this,f,g,y=>{const m=n.invertBatch(y.map(I=>I.pz));return y.map((I,$)=>I.toAffine(m[$])).map(l.fromAffine)})}multiplyUnsafe(g){const y=l.ZERO;if(g===yt)return y;if(c(g),g===De)return this;const{endo:m}=t;if(!m)return h.unsafeLadder(this,g);let{k1neg:I,k1:$,k2neg:H,k2:P}=m.splitScalar(g),U=y,R=y,O=this;for(;$>yt||P>yt;)$&De&&(U=U.add(O)),P&De&&(R=R.add(O)),O=O.double(),$>>=De,P>>=De;return I&&(U=U.negate()),H&&(R=R.negate()),R=new l(n.mul(R.px,m.beta),R.py,R.pz),U.add(R)}multiply(g){c(g);let y=g,m,I;const{endo:$}=t;if($){const{k1neg:H,k1:P,k2neg:U,k2:R}=$.splitScalar(y);let{p:O,f:C}=this.wNAF(P),{p:q,f:_}=this.wNAF(R);O=h.constTimeNegate(H,O),q=h.constTimeNegate(U,q),q=new l(n.mul(q.px,$.beta),q.py,q.pz),m=O.add(q),I=C.add(_)}else{const{p:H,f:P}=this.wNAF(y);m=H,I=P}return l.normalizeZ([m,I])[0]}multiplyAndAddUnsafe(g,y,m){const I=l.BASE,$=(P,U)=>U===yt||U===De||!P.equals(I)?P.multiplyUnsafe(U):P.multiply(U),H=$(this,y).add($(g,m));return H.is0()?void 0:H}toAffine(g){const{px:y,py:m,pz:I}=this,$=this.is0();g==null&&(g=$?n.ONE:n.inv(I));const H=n.mul(y,g),P=n.mul(m,g),U=n.mul(I,g);if($)return{x:n.ZERO,y:n.ZERO};if(!n.eql(U,n.ONE))throw new Error("invZ was invalid");return{x:H,y:P}}isTorsionFree(){const{h:g,isTorsionFree:y}=t;if(g===De)return!0;if(y)return y(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=t;return g===De?this:y?y(l,this):this.multiplyUnsafe(t.h)}toRawBytes(g=!0){return this.assertValidity(),r(l,this,g)}toHex(g=!0){return Wn(this.toRawBytes(g))}}l.BASE=new l(t.Gx,t.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const d=t.nBitLength,h=Eh(l,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:a,weierstrassEquation:i,isWithinCurveOrder:s}}function Sh(e){const t=Ka(e);return Tr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Th(e){const t=Sh(e),{Fp:n,n:r}=t,o=n.BYTES+1,i=2*n.BYTES+1;function s(w){return yt<w&&w<n.ORDER}function c(w){return he(w,r)}function a(w){return Ai(w,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:d}=Bh({...t,toBytes(w,v,A){const S=v.toAffine(),B=n.toBytes(S.x),L=Sn;return A?L(Uint8Array.from([v.hasEvenY()?2:3]),B):L(Uint8Array.from([4]),B,n.toBytes(S.y))},fromBytes(w){const v=w.length,A=w[0],S=w.subarray(1);if(v===o&&(A===2||A===3)){const B=$e(S);if(!s(B))throw new Error("Point is not on curve");const L=l(B);let T=n.sqrt(L);const N=(T&De)===De;return(A&1)===1!==N&&(T=n.neg(T)),{x:B,y:T}}else if(v===i&&A===4){const B=n.fromBytes(S.subarray(0,n.BYTES)),L=n.fromBytes(S.subarray(n.BYTES,2*n.BYTES));return{x:B,y:L}}else throw new Error(`Point of length ${v} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),h=w=>Wn(Xt(w,t.nByteLength));function p(w){const v=r>>De;return w>v}function g(w){return p(w)?c(-w):w}const y=(w,v,A)=>$e(w.slice(v,A));class m{constructor(v,A,S){this.r=v,this.s=A,this.recovery=S,this.assertValidity()}static fromCompact(v){const A=t.nByteLength;return v=we("compactSignature",v,A*2),new m(y(v,0,A),y(v,A,2*A))}static fromDER(v){const{r:A,s:S}=cn.toSig(we("DER",v));return new m(A,S)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(v){return new m(this.r,this.s,v)}recoverPublicKey(v){const{r:A,s:S,recovery:B}=this,L=R(we("msgHash",v));if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");const T=B===2||B===3?A+t.n:A;if(T>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const N=(B&1)===0?"02":"03",z=f.fromHex(N+h(T)),j=a(T),D=c(-L*j),K=c(S*j),Z=f.BASE.multiplyAndAddUnsafe(z,D,K);if(!Z)throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Gn(this.toDERHex())}toDERHex(){return cn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Gn(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const I={isValidPrivateKey(w){try{return u(w),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const w=Fa(t.n);return vh(t.randomBytes(w),t.n)},precompute(w=8,v=f.BASE){return v._setWindowSize(w),v.multiply(BigInt(3)),v}};function $(w,v=!0){return f.fromPrivateKey(w).toRawBytes(v)}function H(w){const v=w instanceof Uint8Array,A=typeof w=="string",S=(v||A)&&w.length;return v?S===o||S===i:A?S===2*o||S===2*i:w instanceof f}function P(w,v,A=!0){if(H(w))throw new Error("first arg must be private key");if(!H(v))throw new Error("second arg must be public key");return f.fromHex(v).multiply(u(w)).toRawBytes(A)}const U=t.bits2int||function(w){const v=$e(w),A=w.length*8-t.nBitLength;return A>0?v>>BigInt(A):v},R=t.bits2int_modN||function(w){return c(U(w))},O=is(t.nBitLength);function C(w){if(typeof w!="bigint")throw new Error("bigint expected");if(!(yt<=w&&w<O))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Xt(w,t.nByteLength)}function q(w,v,A=_){if(["recovered","canonical"].some(W=>W in A))throw new Error("sign() legacy options not supported");const{hash:S,randomBytes:B}=t;let{lowS:L,prehash:T,extraEntropy:N}=A;L==null&&(L=!0),w=we("msgHash",w),T&&(w=we("prehashed msgHash",S(w)));const z=R(w),j=u(v),D=[C(j),C(z)];if(N!=null){const W=N===!0?B(n.BYTES):N;D.push(we("extraEntropy",W))}const K=Sn(...D),Z=z;function Q(W){const ne=U(W);if(!d(ne))return;const Qt=a(ne),lt=f.BASE.multiply(ne).toAffine(),Ae=c(lt.x);if(Ae===yt)return;const Ln=c(Qt*c(Z+Ae*j));if(Ln===yt)return;let js=(lt.x===Ae?0:2)|Number(lt.y&De),Ds=Ln;return L&&p(Ln)&&(Ds=g(Ln),js^=1),new m(Ae,Ds,js)}return{seed:K,k2sig:Q}}const _={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};function b(w,v,A=_){const{seed:S,k2sig:B}=q(w,v,A),L=t;return ja(L.hash.outputLen,L.nByteLength,L.hmac)(S,B)}f.BASE._setWindowSize(8);function E(w,v,A,S=x){var lt;const B=w;if(v=we("msgHash",v),A=we("publicKey",A),"strict"in S)throw new Error("options.strict was renamed to lowS");const{lowS:L,prehash:T}=S;let N,z;try{if(typeof B=="string"||B instanceof Uint8Array)try{N=m.fromDER(B)}catch(Ae){if(!(Ae instanceof cn.Err))throw Ae;N=m.fromCompact(B)}else if(typeof B=="object"&&typeof B.r=="bigint"&&typeof B.s=="bigint"){const{r:Ae,s:Ln}=B;N=new m(Ae,Ln)}else throw new Error("PARSE");z=f.fromHex(A)}catch(Ae){if(Ae.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(L&&N.hasHighS())return!1;T&&(v=t.hash(v));const{r:j,s:D}=N,K=R(v),Z=a(D),Q=c(K*Z),W=c(j*Z),ne=(lt=f.BASE.multiplyAndAddUnsafe(z,Q,W))==null?void 0:lt.toAffine();return ne?c(ne.x)===j:!1}return{CURVE:t,getPublicKey:$,getSharedSecret:P,sign:b,verify:E,ProjectivePoint:f,Signature:m,utils:I}}let Za=class extends Ma{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,jd(t);const r=ts(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return Gr(this),this.iHash.update(t),this}digestInto(t){Gr(this),Ca(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:s,outputLen:c}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Wa=(e,t,n)=>new Za(e,t).update(n).digest();Wa.create=(e,t)=>new Za(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ih(e){return{hash:e,hmac:(t,...n)=>Wa(e,t,Kd(...n)),randomBytes:Pa}}function $h(e,t){const n=r=>Th({...e,...Ih(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ao=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Yr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ga=BigInt(1),Xr=BigInt(2),cc=(e,t)=>(e+t/Xr)/t;function Ya(e){const t=Ao,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),c=BigInt(44),a=BigInt(88),f=e*e*e%t,u=f*f*e%t,l=He(u,n,t)*u%t,d=He(l,n,t)*u%t,h=He(d,Xr,t)*f%t,p=He(h,o,t)*h%t,g=He(p,i,t)*p%t,y=He(g,c,t)*g%t,m=He(y,a,t)*y%t,I=He(m,c,t)*g%t,$=He(I,n,t)*u%t,H=He($,s,t)*p%t,P=He(H,r,t)*f%t,U=He(P,Xr,t);if(!Bi.eql(Bi.sqr(U),e))throw new Error("Cannot find square root");return U}const Bi=bh(Ao,void 0,void 0,{sqrt:Ya}),tr=$h({a:BigInt(0),b:BigInt(7),Fp:Bi,n:Yr,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Yr,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ga*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),c=cc(i*e,t),a=cc(-r*e,t);let f=he(e-c*n-a*o,t),u=he(-c*r-a*i,t);const l=f>s,d=u>s;if(l&&(f=t-f),d&&(u=t-u),f>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:f,k2neg:d,k2:u}}}},xi),Bo=BigInt(0),Xa=e=>typeof e=="bigint"&&Bo<e&&e<Ao,kh=e=>typeof e=="bigint"&&Bo<e&&e<Yr,ac={};function Jr(e,...t){let n=ac[e];if(n===void 0){const r=xi(Uint8Array.from(e,o=>o.charCodeAt(0)));n=Sn(r,r),ac[e]=n}return xi(Sn(n,...t))}const ss=e=>e.toRawBytes(!0).slice(1),Si=e=>Xt(e,32),Ko=e=>he(e,Ao),mr=e=>he(e,Yr),cs=tr.ProjectivePoint,Lh=(e,t,n)=>cs.BASE.multiplyAndAddUnsafe(e,t,n);function Ti(e){let t=tr.utils.normPrivateKeyToScalar(e),n=cs.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:mr(-t),bytes:ss(n)}}function Ja(e){if(!Xa(e))throw new Error("bad x: need 0 < x < p");const t=Ko(e*e),n=Ko(t*e+BigInt(7));let r=Ya(n);r%Xr!==Bo&&(r=Ko(-r));const o=new cs(e,r,Ga);return o.assertValidity(),o}function Qa(...e){return mr($e(Jr("BIP0340/challenge",...e)))}function Uh(e){return Ti(e).bytes}function Nh(e,t,n=Pa(32)){const r=we("message",e),{bytes:o,scalar:i}=Ti(t),s=we("auxRand",n,32),c=Si(i^$e(Jr("BIP0340/aux",s))),a=Jr("BIP0340/nonce",c,o,r),f=mr($e(a));if(f===Bo)throw new Error("sign failed: k is zero");const{bytes:u,scalar:l}=Ti(f),d=Qa(u,o,r),h=new Uint8Array(64);if(h.set(u,0),h.set(Si(mr(l+d*i)),32),!ef(h,r,o))throw new Error("sign: Invalid signature produced");return h}function ef(e,t,n){const r=we("signature",e,64),o=we("message",t),i=we("publicKey",n,32);try{const s=Ja($e(i)),c=$e(r.subarray(0,32));if(!Xa(c))return!1;const a=$e(r.subarray(32,64));if(!kh(a))return!1;const f=Qa(Si(c),ss(s),o),u=Lh(s,a,mr(-f));return!(!u||!u.hasEvenY()||u.toAffine().x!==c)}catch{return!1}}const cr={getPublicKey:Uh,sign:Nh,verify:ef,utils:{randomPrivateKey:tr.utils.randomPrivateKey,lift_x:Ja,pointToBytes:ss,numberToBytesBE:Xt,bytesToNumberBE:$e,taggedHash:Jr,mod:he}},Zo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const as=e=>e instanceof Uint8Array,Wo=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),qr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Je=(e,t)=>e<<32-t|e>>>t,Rh=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Rh)throw new Error("Non little-endian hardware is not supported");const Oh=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function oe(e){if(!as(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Oh[e[n]];return t}function Ce(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,i=e.slice(o,o+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function Ch(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Tn(e){if(typeof e=="string"&&(e=Ch(e)),!as(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function nr(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!as(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let tf=class{clone(){return this._cloneInto()}};const Hh=e=>Object.prototype.toString.call(e)==="[object Object]"&&e.constructor===Object;function nf(e,t){if(t!==void 0&&(typeof t!="object"||!Hh(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)}function rf(e){const t=r=>e().update(Tn(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Qr(e=32){if(Zo&&typeof Zo.getRandomValues=="function")return Zo.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Ii(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Mh(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function of(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Ph(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ii(e.outputLen),Ii(e.blockLen)}function qh(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Vh(e,t){of(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const ce={number:Ii,bool:Mh,bytes:of,hash:Ph,exists:qh,output:Vh};function jh(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),c=Number(n&i),a=r?4:0,f=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}class Dh extends tf{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=qr(this.buffer)}update(t){ce.exists(this);const{view:n,buffer:r,blockLen:o}=this;t=Tn(t);const i=t.length;for(let s=0;s<i;){const c=Math.min(o-this.pos,i-s);if(c===o){const a=qr(t);for(;o<=i-s;s+=o)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ce.exists(this),ce.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:i}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(r,0),s=0);for(let l=s;l<o;l++)n[l]=0;jh(r,o-8,BigInt(this.length*8),i),this.process(r,0);const c=qr(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=a/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)c.setUint32(4*l,u[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:c}=this;return t.length=o,t.pos=c,t.finished=i,t.destroyed=s,o%n&&t.buffer.set(r),t}}const zh=(e,t,n)=>e&t^~e&n,Fh=(e,t,n)=>e&t^e&n^t&n,Kh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ht=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mt=new Uint32Array(64);let sf=class extends Dh{constructor(){super(64,32,8,!1),this.A=Ht[0]|0,this.B=Ht[1]|0,this.C=Ht[2]|0,this.D=Ht[3]|0,this.E=Ht[4]|0,this.F=Ht[5]|0,this.G=Ht[6]|0,this.H=Ht[7]|0}get(){const{A:t,B:n,C:r,D:o,E:i,F:s,G:c,H:a}=this;return[t,n,r,o,i,s,c,a]}set(t,n,r,o,i,s,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,n){for(let l=0;l<16;l++,n+=4)Mt[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const d=Mt[l-15],h=Mt[l-2],p=Je(d,7)^Je(d,18)^d>>>3,g=Je(h,17)^Je(h,19)^h>>>10;Mt[l]=g+Mt[l-7]+p+Mt[l-16]|0}let{A:r,B:o,C:i,D:s,E:c,F:a,G:f,H:u}=this;for(let l=0;l<64;l++){const d=Je(c,6)^Je(c,11)^Je(c,25),h=u+d+zh(c,a,f)+Kh[l]+Mt[l]|0,g=(Je(r,2)^Je(r,13)^Je(r,22))+Fh(r,o,i)|0;u=f,f=a,a=c,c=s+h|0,s=i,i=o,o=r,r=h+g|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(r,o,i,s,c,a,f,u)}roundClean(){Mt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};class Zh extends sf{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const $t=rf(()=>new sf);rf(()=>new Zh);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function rr(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function kt(...e){const t=(o,i)=>s=>o(i(s)),n=Array.from(e).reverse().reduce((o,i)=>o?t(o,i.encode):i.encode,void 0),r=e.reduce((o,i)=>o?t(o,i.decode):i.decode,void 0);return{encode:n,decode:r}}function Lt(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(rr(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function Ut(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function So(e,t="="){if(rr(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function cf(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function fc(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],i=Array.from(e);for(i.forEach(s=>{if(rr(s),s<0||s>=t)throw new Error(`Wrong integer: ${s}`)});;){let s=0,c=!0;for(let a=r;a<i.length;a++){const f=i[a],u=t*s+f;if(!Number.isSafeInteger(u)||t*s/t!==s||u-f!==t*s)throw new Error("convertRadix: carry overflow");if(s=u%n,i[a]=Math.floor(u/n),!Number.isSafeInteger(i[a])||i[a]*n+s!==u)throw new Error("convertRadix: carry overflow");if(c)i[a]?c=!1:r=a;else continue}if(o.push(s),c)break}for(let s=0;s<e.length-1&&e[s]===0;s++)o.push(0);return o.reverse()}const af=(e,t)=>t?af(t,e%t):e,eo=(e,t)=>e+(t-af(e,t));function $i(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(eo(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${eo(t,n)}`);let o=0,i=0;const s=2**n-1,c=[];for(const a of e){if(rr(a),a>=2**t)throw new Error(`convertRadix2: invalid data word=${a} from=${t}`);if(o=o<<t|a,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)c.push((o>>i-n&s)>>>0);o&=2**i-1}if(o=o<<n-i&s,!r&&i>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&c.push(o>>>0),c}function Wh(e){return rr(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return fc(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(fc(t,e,2**8))}}}function Jt(e,t=!1){if(rr(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(eo(8,e)>32||eo(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return $i(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from($i(n,e,8,t))}}}function lc(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const Gh=kt(Jt(4),Lt("0123456789ABCDEF"),Ut("")),Yh=kt(Jt(5),Lt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),So(5),Ut(""));kt(Jt(5),Lt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),So(5),Ut(""));kt(Jt(5),Lt("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Ut(""),cf(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const At=kt(Jt(6),Lt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),So(6),Ut("")),Xh=kt(Jt(6),Lt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),So(6),Ut("")),fs=e=>kt(Wh(58),Lt(e),Ut("")),ki=fs("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");fs("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");fs("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const uc=[0,2,3,5,6,7,9,10,11],Jh={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=ki.encode(r).padStart(uc[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=uc.indexOf(r.length),i=ki.decode(r);for(let s=0;s<i.length-o;s++)if(i[s]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-o)))}return Uint8Array.from(t)}},Li=kt(Lt("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Ut("")),dc=[996825010,642813549,513874426,1027748829,705979059];function ar(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<dc.length;r++)(t>>r&1)===1&&(n^=dc[r]);return n}function hc(e,t,n=1){const r=e.length;let o=1;for(let i=0;i<r;i++){const s=e.charCodeAt(i);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);o=ar(o)^s>>5}o=ar(o);for(let i=0;i<r;i++)o=ar(o)^e.charCodeAt(i)&31;for(let i of t)o=ar(o)^i;for(let i=0;i<6;i++)o=ar(o);return o^=n,Li.encode($i([o%2**30],30,5,!1))}function ff(e){const t=e==="bech32"?1:734539939,n=Jt(5),r=n.decode,o=n.encode,i=lc(r);function s(u,l,d=90){if(typeof u!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof u}`);if(!Array.isArray(l)||l.length&&typeof l[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof l}`);const h=u.length+7+l.length;if(d!==!1&&h>d)throw new TypeError(`Length ${h} exceeds limit ${d}`);return u=u.toLowerCase(),`${u}1${Li.encode(l)}${hc(u,l,t)}`}function c(u,l=90){if(typeof u!="string")throw new Error(`bech32.decode input should be string, not ${typeof u}`);if(u.length<8||l!==!1&&u.length>l)throw new TypeError(`Wrong string length: ${u.length} (${u}). Expected (8..${l})`);const d=u.toLowerCase();if(u!==d&&u!==u.toUpperCase())throw new Error("String must be lowercase or uppercase");u=d;const h=u.lastIndexOf("1");if(h===0||h===-1)throw new Error('Letter "1" must be present between prefix and data only');const p=u.slice(0,h),g=u.slice(h+1);if(g.length<6)throw new Error("Data must be at least 6 characters long");const y=Li.decode(g).slice(0,-6),m=hc(p,y,t);if(!g.endsWith(m))throw new Error(`Invalid checksum in ${u}: expected "${m}"`);return{prefix:p,words:y}}const a=lc(c);function f(u){const{prefix:l,words:d}=c(u,!1);return{prefix:l,words:d,bytes:r(d)}}return{encode:s,decode:c,decodeToBytes:f,decodeUnsafe:a,fromWords:r,fromWordsUnsafe:i,toWords:o}}const Ue=ff("bech32");ff("bech32m");const Qh={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},e0=kt(Jt(4),Lt("0123456789abcdef"),Ut(""),cf(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),t0={utf8:Qh,hex:e0,base16:Gh,base32:Yh,base64:At,base64url:Xh,base58:ki,base58xmr:Jh};`${Object.keys(t0).join(", ")}`;function Go(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function gc(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function lf(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function be(e,...t){if(!lf(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function pc(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function n0(e,t){be(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const ve=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),r0=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),o0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!o0)throw new Error("Non little-endian hardware is not supported");const i0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Rn(e){be(e);let t="";for(let n=0;n<e.length;n++)t+=i0[e[n]];return t}const ut={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function wc(e){if(e>=ut._0&&e<=ut._9)return e-ut._0;if(e>=ut._A&&e<=ut._F)return e-(ut._A-10);if(e>=ut._a&&e<=ut._f)return e-(ut._a-10)}function uf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const s=wc(e.charCodeAt(i)),c=wc(e.charCodeAt(i+1));if(s===void 0||c===void 0){const a=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+i)}r[o]=s*16+c}return r}function s0(e){if(typeof e!="string")throw new Error(`string expected, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ui(e){if(typeof e=="string")e=s0(e);else if(lf(e))e=e.slice();else throw new Error(`Uint8Array expected, got ${typeof e}`);return e}function c0(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function df(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const hf=(e,t)=>(Object.assign(t,e),t);function yc(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),c=Number(n&i),a=4,f=0;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}const Yt=16,a0=283;function ls(e){return e<<1^a0&-(e>>7)}function Hn(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(t&1),e=ls(e);return n}const Ni=(()=>{let e=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=ls(r))e[n]=r;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=(r^r>>4^r>>5^r>>6^r>>7^99)&255}return t})(),f0=Ni.map((e,t)=>Ni.indexOf(t)),l0=e=>e<<24|e>>>8,Yo=e=>e<<8|e>>>24;function gf(e,t){if(e.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((f,u)=>t(e[u])),r=n.map(Yo),o=r.map(Yo),i=o.map(Yo),s=new Uint32Array(256*256),c=new Uint32Array(256*256),a=new Uint16Array(256*256);for(let f=0;f<256;f++)for(let u=0;u<256;u++){const l=f*256+u;s[l]=n[f]^r[u],c[l]=o[f]^i[u],a[l]=e[f]<<8|e[u]}return{sbox:e,sbox2:a,T0:n,T1:r,T2:o,T3:i,T01:s,T23:c}}const us=gf(Ni,e=>Hn(e,3)<<24|e<<16|e<<8|Hn(e,2)),pf=gf(f0,e=>Hn(e,11)<<24|Hn(e,13)<<16|Hn(e,9)<<8|Hn(e,14)),u0=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=ls(n))e[t]=n;return e})();function wf(e){be(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:n}=us,r=ve(e),o=r.length,i=c=>ct(n,c,c,c,c),s=new Uint32Array(t+28);s.set(r);for(let c=o;c<s.length;c++){let a=s[c-1];c%o===0?a=i(l0(a))^u0[c/o-1]:o>6&&c%o===4&&(a=i(a)),s[c]=s[c-o]^a}return s}function d0(e){const t=wf(e),n=t.slice(),r=t.length,{sbox2:o}=us,{T0:i,T1:s,T2:c,T3:a}=pf;for(let f=0;f<r;f+=4)for(let u=0;u<4;u++)n[f+u]=t[r-f-4+u];t.fill(0);for(let f=4;f<r-4;f++){const u=n[f],l=ct(o,u,u,u,u);n[f]=i[l&255]^s[l>>>8&255]^c[l>>>16&255]^a[l>>>24]}return n}function Ft(e,t,n,r,o,i){return e[n<<8&65280|r>>>8&255]^t[o>>>8&65280|i>>>24&255]}function ct(e,t,n,r,o){return e[t&255|n&65280]|e[r>>>16&255|o>>>16&65280]<<16}function bc(e,t,n,r,o){const{sbox2:i,T01:s,T23:c}=us;let a=0;t^=e[a++],n^=e[a++],r^=e[a++],o^=e[a++];const f=e.length/4-2;for(let p=0;p<f;p++){const g=e[a++]^Ft(s,c,t,n,r,o),y=e[a++]^Ft(s,c,n,r,o,t),m=e[a++]^Ft(s,c,r,o,t,n),I=e[a++]^Ft(s,c,o,t,n,r);t=g,n=y,r=m,o=I}const u=e[a++]^ct(i,t,n,r,o),l=e[a++]^ct(i,n,r,o,t),d=e[a++]^ct(i,r,o,t,n),h=e[a++]^ct(i,o,t,n,r);return{s0:u,s1:l,s2:d,s3:h}}function h0(e,t,n,r,o){const{sbox2:i,T01:s,T23:c}=pf;let a=0;t^=e[a++],n^=e[a++],r^=e[a++],o^=e[a++];const f=e.length/4-2;for(let p=0;p<f;p++){const g=e[a++]^Ft(s,c,t,o,r,n),y=e[a++]^Ft(s,c,n,t,o,r),m=e[a++]^Ft(s,c,r,n,t,o),I=e[a++]^Ft(s,c,o,r,n,t);t=g,n=y,r=m,o=I}const u=e[a++]^ct(i,t,o,r,n),l=e[a++]^ct(i,n,t,o,r),d=e[a++]^ct(i,r,n,t,o),h=e[a++]^ct(i,o,r,n,t);return{s0:u,s1:l,s2:d,s3:h}}function yf(e,t){if(!t)return new Uint8Array(e);if(be(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function g0(e){if(be(e),e.length%Yt!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${Yt}`)}function p0(e,t,n){let r=e.length;const o=r%Yt;if(!t&&o!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const i=ve(e);if(t){let a=Yt-o;a||(a=Yt),r=r+a}const s=yf(r,n),c=ve(s);return{b:i,o:c,out:s}}function w0(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=e[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const o=e.subarray(0,-r);for(let i=0;i<r;i++)if(e[n-i-1]!==r)throw new Error("aes/pcks5: wrong padding");return o}function y0(e){const t=new Uint8Array(16),n=ve(t);t.set(e);const r=Yt-e.length;for(let o=Yt-r;o<Yt;o++)t[o]=r;return n}const bf=hf({blockSize:16,nonceLength:16},function(t,n,r={}){be(t),be(n,16);const o=!r.disablePadding;return{encrypt:(i,s)=>{const c=wf(t),{b:a,o:f,out:u}=p0(i,o,s),l=ve(n);let d=l[0],h=l[1],p=l[2],g=l[3],y=0;for(;y+4<=a.length;)d^=a[y+0],h^=a[y+1],p^=a[y+2],g^=a[y+3],{s0:d,s1:h,s2:p,s3:g}=bc(c,d,h,p,g),f[y++]=d,f[y++]=h,f[y++]=p,f[y++]=g;if(o){const m=y0(i.subarray(y*4));d^=m[0],h^=m[1],p^=m[2],g^=m[3],{s0:d,s1:h,s2:p,s3:g}=bc(c,d,h,p,g),f[y++]=d,f[y++]=h,f[y++]=p,f[y++]=g}return c.fill(0),u},decrypt:(i,s)=>{g0(i);const c=d0(t),a=ve(n),f=yf(i.length,s),u=ve(i),l=ve(f);let d=a[0],h=a[1],p=a[2],g=a[3];for(let y=0;y+4<=u.length;){const m=d,I=h,$=p,H=g;d=u[y+0],h=u[y+1],p=u[y+2],g=u[y+3];const{s0:P,s1:U,s2:R,s3:O}=h0(c,d,h,p,g);l[y++]=P^m,l[y++]=U^I,l[y++]=R^$,l[y++]=O^H}return c.fill(0),w0(f,o)}}}),de=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class b0{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=Ui(t),be(t,32);const n=de(t,0),r=de(t,2),o=de(t,4),i=de(t,6),s=de(t,8),c=de(t,10),a=de(t,12),f=de(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|o<<6)&7939,this.r[3]=(o>>>7|i<<9)&8191,this.r[4]=(i>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|c<<2)&8191,this.r[7]=(c>>>11|a<<5)&8065,this.r[8]=(a>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let u=0;u<8;u++)this.pad[u]=de(t,16+2*u)}process(t,n,r=!1){const o=r?0:2048,{h:i,r:s}=this,c=s[0],a=s[1],f=s[2],u=s[3],l=s[4],d=s[5],h=s[6],p=s[7],g=s[8],y=s[9],m=de(t,n+0),I=de(t,n+2),$=de(t,n+4),H=de(t,n+6),P=de(t,n+8),U=de(t,n+10),R=de(t,n+12),O=de(t,n+14);let C=i[0]+(m&8191),q=i[1]+((m>>>13|I<<3)&8191),_=i[2]+((I>>>10|$<<6)&8191),x=i[3]+(($>>>7|H<<9)&8191),b=i[4]+((H>>>4|P<<12)&8191),E=i[5]+(P>>>1&8191),w=i[6]+((P>>>14|U<<2)&8191),v=i[7]+((U>>>11|R<<5)&8191),A=i[8]+((R>>>8|O<<8)&8191),S=i[9]+(O>>>5|o),B=0,L=B+C*c+q*(5*y)+_*(5*g)+x*(5*p)+b*(5*h);B=L>>>13,L&=8191,L+=E*(5*d)+w*(5*l)+v*(5*u)+A*(5*f)+S*(5*a),B+=L>>>13,L&=8191;let T=B+C*a+q*c+_*(5*y)+x*(5*g)+b*(5*p);B=T>>>13,T&=8191,T+=E*(5*h)+w*(5*d)+v*(5*l)+A*(5*u)+S*(5*f),B+=T>>>13,T&=8191;let N=B+C*f+q*a+_*c+x*(5*y)+b*(5*g);B=N>>>13,N&=8191,N+=E*(5*p)+w*(5*h)+v*(5*d)+A*(5*l)+S*(5*u),B+=N>>>13,N&=8191;let z=B+C*u+q*f+_*a+x*c+b*(5*y);B=z>>>13,z&=8191,z+=E*(5*g)+w*(5*p)+v*(5*h)+A*(5*d)+S*(5*l),B+=z>>>13,z&=8191;let j=B+C*l+q*u+_*f+x*a+b*c;B=j>>>13,j&=8191,j+=E*(5*y)+w*(5*g)+v*(5*p)+A*(5*h)+S*(5*d),B+=j>>>13,j&=8191;let D=B+C*d+q*l+_*u+x*f+b*a;B=D>>>13,D&=8191,D+=E*c+w*(5*y)+v*(5*g)+A*(5*p)+S*(5*h),B+=D>>>13,D&=8191;let K=B+C*h+q*d+_*l+x*u+b*f;B=K>>>13,K&=8191,K+=E*a+w*c+v*(5*y)+A*(5*g)+S*(5*p),B+=K>>>13,K&=8191;let Z=B+C*p+q*h+_*d+x*l+b*u;B=Z>>>13,Z&=8191,Z+=E*f+w*a+v*c+A*(5*y)+S*(5*g),B+=Z>>>13,Z&=8191;let Q=B+C*g+q*p+_*h+x*d+b*l;B=Q>>>13,Q&=8191,Q+=E*u+w*f+v*a+A*c+S*(5*y),B+=Q>>>13,Q&=8191;let W=B+C*y+q*g+_*p+x*h+b*d;B=W>>>13,W&=8191,W+=E*l+w*u+v*f+A*a+S*c,B+=W>>>13,W&=8191,B=(B<<2)+B|0,B=B+L|0,L=B&8191,B=B>>>13,T+=B,i[0]=L,i[1]=T,i[2]=N,i[3]=z,i[4]=j,i[5]=D,i[6]=K,i[7]=Z,i[8]=Q,i[9]=W}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let o=t[1]>>>13;t[1]&=8191;for(let c=2;c<10;c++)t[c]+=o,o=t[c]>>>13,t[c]&=8191;t[0]+=o*5,o=t[0]>>>13,t[0]&=8191,t[1]+=o,o=t[1]>>>13,t[1]&=8191,t[2]+=o,r[0]=t[0]+5,o=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=t[c]+o,o=r[c]>>>13,r[c]&=8191;r[9]-=8192;let i=(o^1)-1;for(let c=0;c<10;c++)r[c]&=i;i=~i;for(let c=0;c<10;c++)t[c]=t[c]&i|r[c];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let s=t[0]+n[0];t[0]=s&65535;for(let c=1;c<8;c++)s=(t[c]+n[c]|0)+(s>>>16)|0,t[c]=s&65535}update(t){pc(this);const{buffer:n,blockLen:r}=this;t=Ui(t);const o=t.length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s===r){for(;r<=o-i;i+=r)this.process(t,i);continue}n.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(t){pc(this),n0(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:o}=this;if(o){for(n[o++]=1;o<16;o++)n[o]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let s=0;s<8;s++)t[i++]=r[s]>>>0,t[i++]=r[s]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function v0(e){const t=(r,o)=>e(o).update(Ui(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const m0=v0(e=>new b0(e)),vf=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),E0=vf("expand 16-byte k"),x0=vf("expand 32-byte k"),_0=ve(E0),mf=ve(x0);mf.slice();function V(e,t){return e<<t|e>>>32-t}function Ri(e){return e.byteOffset%4===0}const Ur=64,A0=16,Ef=2**32-1,vc=new Uint32Array;function B0(e,t,n,r,o,i,s,c){const a=o.length,f=new Uint8Array(Ur),u=ve(f),l=Ri(o)&&Ri(i),d=l?ve(o):vc,h=l?ve(i):vc;for(let p=0;p<a;s++){if(e(t,n,r,u,s,c),s>=Ef)throw new Error("arx: counter overflow");const g=Math.min(Ur,a-p);if(l&&g===Ur){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let m=0,I;m<A0;m++)I=y+m,h[I]=d[I]^u[m];p+=Ur;continue}for(let y=0,m;y<g;y++)m=p+y,i[m]=o[m]^f[y];p+=g}}function xf(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:i,rounds:s}=c0({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Go(o),Go(s),gc(i),gc(n),(c,a,f,u,l=0)=>{be(c),be(a),be(f);const d=f.length;if(u||(u=new Uint8Array(d)),be(u),Go(l),l<0||l>=Ef)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const h=[];let p=c.length,g,y;if(p===32)g=c.slice(),h.push(g),y=mf;else if(p===16&&n)g=new Uint8Array(32),g.set(c),g.set(c,16),y=_0,h.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);Ri(a)||(a=a.slice(),h.push(a));const m=ve(g);if(r){if(a.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,m,ve(a.subarray(0,16)),m),a=a.subarray(16)}const I=16-o;if(I!==a.length)throw new Error(`arx: nonce must be ${I} or 16 bytes`);if(I!==12){const H=new Uint8Array(12);H.set(a,i?0:12-a.length),a=H,h.push(a)}const $=ve(a);for(B0(e,y,m,$,f,u,l,s);h.length>0;)h.pop().fill(0);return u}}function _f(e,t,n,r,o,i=20){let s=e[0],c=e[1],a=e[2],f=e[3],u=t[0],l=t[1],d=t[2],h=t[3],p=t[4],g=t[5],y=t[6],m=t[7],I=o,$=n[0],H=n[1],P=n[2],U=s,R=c,O=a,C=f,q=u,_=l,x=d,b=h,E=p,w=g,v=y,A=m,S=I,B=$,L=H,T=P;for(let z=0;z<i;z+=2)U=U+q|0,S=V(S^U,16),E=E+S|0,q=V(q^E,12),U=U+q|0,S=V(S^U,8),E=E+S|0,q=V(q^E,7),R=R+_|0,B=V(B^R,16),w=w+B|0,_=V(_^w,12),R=R+_|0,B=V(B^R,8),w=w+B|0,_=V(_^w,7),O=O+x|0,L=V(L^O,16),v=v+L|0,x=V(x^v,12),O=O+x|0,L=V(L^O,8),v=v+L|0,x=V(x^v,7),C=C+b|0,T=V(T^C,16),A=A+T|0,b=V(b^A,12),C=C+b|0,T=V(T^C,8),A=A+T|0,b=V(b^A,7),U=U+_|0,T=V(T^U,16),v=v+T|0,_=V(_^v,12),U=U+_|0,T=V(T^U,8),v=v+T|0,_=V(_^v,7),R=R+x|0,S=V(S^R,16),A=A+S|0,x=V(x^A,12),R=R+x|0,S=V(S^R,8),A=A+S|0,x=V(x^A,7),O=O+b|0,B=V(B^O,16),E=E+B|0,b=V(b^E,12),O=O+b|0,B=V(B^O,8),E=E+B|0,b=V(b^E,7),C=C+q|0,L=V(L^C,16),w=w+L|0,q=V(q^w,12),C=C+q|0,L=V(L^C,8),w=w+L|0,q=V(q^w,7);let N=0;r[N++]=s+U|0,r[N++]=c+R|0,r[N++]=a+O|0,r[N++]=f+C|0,r[N++]=u+q|0,r[N++]=l+_|0,r[N++]=d+x|0,r[N++]=h+b|0,r[N++]=p+E|0,r[N++]=g+w|0,r[N++]=y+v|0,r[N++]=m+A|0,r[N++]=I+S|0,r[N++]=$+B|0,r[N++]=H+L|0,r[N++]=P+T|0}function S0(e,t,n,r){let o=e[0],i=e[1],s=e[2],c=e[3],a=t[0],f=t[1],u=t[2],l=t[3],d=t[4],h=t[5],p=t[6],g=t[7],y=n[0],m=n[1],I=n[2],$=n[3];for(let P=0;P<20;P+=2)o=o+a|0,y=V(y^o,16),d=d+y|0,a=V(a^d,12),o=o+a|0,y=V(y^o,8),d=d+y|0,a=V(a^d,7),i=i+f|0,m=V(m^i,16),h=h+m|0,f=V(f^h,12),i=i+f|0,m=V(m^i,8),h=h+m|0,f=V(f^h,7),s=s+u|0,I=V(I^s,16),p=p+I|0,u=V(u^p,12),s=s+u|0,I=V(I^s,8),p=p+I|0,u=V(u^p,7),c=c+l|0,$=V($^c,16),g=g+$|0,l=V(l^g,12),c=c+l|0,$=V($^c,8),g=g+$|0,l=V(l^g,7),o=o+f|0,$=V($^o,16),p=p+$|0,f=V(f^p,12),o=o+f|0,$=V($^o,8),p=p+$|0,f=V(f^p,7),i=i+u|0,y=V(y^i,16),g=g+y|0,u=V(u^g,12),i=i+u|0,y=V(y^i,8),g=g+y|0,u=V(u^g,7),s=s+l|0,m=V(m^s,16),d=d+m|0,l=V(l^d,12),s=s+l|0,m=V(m^s,8),d=d+m|0,l=V(l^d,7),c=c+a|0,I=V(I^c,16),h=h+I|0,a=V(a^h,12),c=c+a|0,I=V(I^c,8),h=h+I|0,a=V(a^h,7);let H=0;r[H++]=o,r[H++]=i,r[H++]=s,r[H++]=c,r[H++]=y,r[H++]=m,r[H++]=I,r[H++]=$}const Af=xf(_f,{counterRight:!1,counterLength:4,allowShortKeys:!1}),T0=xf(_f,{counterRight:!1,counterLength:8,extendNonceFn:S0,allowShortKeys:!1}),I0=new Uint8Array(16),mc=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(I0.subarray(n))},$0=new Uint8Array(32);function Ec(e,t,n,r,o){const i=e(t,n,$0),s=m0.create(i);o&&mc(s,o),mc(s,r);const c=new Uint8Array(16),a=r0(c);yc(a,0,BigInt(o?o.length:0),!0),yc(a,8,BigInt(r.length),!0),s.update(c);const f=s.digest();return i.fill(0),f}const k0=e=>(t,n,r)=>(be(t,32),be(n),{encrypt:(i,s)=>{const c=i.length,a=c+16;s?be(s,a):s=new Uint8Array(a),e(t,n,i,s,1);const f=Ec(e,t,n,s.subarray(0,-16),r);return s.set(f,c),s},decrypt:(i,s)=>{const c=i.length,a=c-16;if(c<16)throw new Error("encrypted data must be at least 16 bytes");s?be(s,a):s=new Uint8Array(a);const f=i.subarray(0,-16),u=i.subarray(-16),l=Ec(e,t,n,f,r);if(!df(u,l))throw new Error("invalid tag");return e(t,n,f,s,1),s}}),Bf=hf({blockSize:64,nonceLength:24,tagLength:16},k0(T0));let Sf=class extends tf{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,ce.hash(t);const r=Tn(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return ce.exists(this),this.iHash.update(t),this}digestInto(t){ce.exists(this),ce.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:s,outputLen:c}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Ir=(e,t,n)=>new Sf(e,t).update(n).digest();Ir.create=(e,t)=>new Sf(e,t);function L0(e,t,n){return ce.hash(e),Ir(e,Tn(n),Tn(t))}const Xo=new Uint8Array([0]),xc=new Uint8Array;function U0(e,t,n,r=32){if(ce.hash(e),ce.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/e.outputLen);n===void 0&&(n=xc);const i=new Uint8Array(o*e.outputLen),s=Ir.create(e,t),c=s._cloneInto(),a=new Uint8Array(s.outputLen);for(let f=0;f<o;f++)Xo[0]=f+1,c.update(f===0?xc:a).update(n).update(Xo).digestInto(a),i.set(a,e.outputLen*f),s._cloneInto(c);return s.destroy(),c.destroy(),a.fill(0),Xo.fill(0),i.slice(0,r)}var N0=Object.defineProperty,te=(e,t)=>{for(var n in t)N0(e,n,{get:t[n],enumerable:!0})},nn=Symbol("verified"),R0=e=>e instanceof Object;function ds(e){if(!R0(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]!="string")return!1}return!0}var O0={};te(O0,{Queue:()=>If,QueueNode:()=>Tf,binarySearch:()=>hs,bytesToHex:()=>oe,hexToBytes:()=>Ce,insertEventIntoAscendingList:()=>H0,insertEventIntoDescendingList:()=>C0,normalizeURL:()=>on,utf8Decoder:()=>Et,utf8Encoder:()=>Ye});var Et=new TextDecoder("utf-8"),Ye=new TextEncoder;function on(e){try{e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.protocol==="http:"?t.protocol="ws:":t.protocol==="https:"&&(t.protocol="wss:"),t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}catch{throw new Error(`Invalid URL: ${e}`)}}function C0(e,t){const[n,r]=hs(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:o.created_at-t.created_at);return r||e.splice(n,0,t),e}function H0(e,t){const[n,r]=hs(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:t.created_at-o.created_at);return r||e.splice(n,0,t),e}function hs(e,t){let n=0,r=e.length-1;for(;n<=r;){const o=Math.floor((n+r)/2),i=t(e[o]);if(i===0)return[o,!0];i<0?r=o-1:n=o+1}return[n,!1]}var Tf=class{constructor(e){M(this,"value");M(this,"next",null);M(this,"prev",null);this.value=e}},If=class{constructor(){M(this,"first");M(this,"last");this.first=null,this.last=null}enqueue(e){const t=new Tf(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const e=this.first;return this.first=e.next,this.first&&(this.first.prev=null),e.value}},M0=class{generateSecretKey(){return cr.utils.randomPrivateKey()}getPublicKey(e){return oe(cr.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=oe(cr.getPublicKey(t)),n.id=Vr(n),n.sig=oe(cr.sign(Vr(n),t)),n[nn]=!0,n}verifyEvent(e){if(typeof e[nn]=="boolean")return e[nn];const t=Vr(e);if(t!==e.id)return e[nn]=!1,!1;try{const n=cr.verify(e.sig,t,e.pubkey);return e[nn]=n,n}catch{return e[nn]=!1,!1}}};function P0(e){if(!ds(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Vr(e){let t=$t(Ye.encode(P0(e)));return oe(t)}var To=new M0,q0=To.generateSecretKey,gs=To.getPublicKey,ft=To.finalizeEvent,Io=To.verifyEvent,V0={};te(V0,{Application:()=>qg,BadgeAward:()=>G0,BadgeDefinition:()=>Ng,BlockedRelaysList:()=>yg,BookmarkList:()=>gg,Bookmarksets:()=>kg,Calendar:()=>Zg,CalendarEventRSVP:()=>Wg,ChannelCreation:()=>Rf,ChannelHideMessage:()=>Hf,ChannelMessage:()=>Cf,ChannelMetadata:()=>Of,ChannelMuteUser:()=>Mf,ClassifiedListing:()=>Dg,ClientAuth:()=>qf,CommunitiesList:()=>pg,CommunityDefinition:()=>Xg,CommunityPostApproval:()=>rg,Contacts:()=>K0,CreateOrUpdateProduct:()=>Cg,CreateOrUpdateStall:()=>Og,Curationsets:()=>Lg,Date:()=>Fg,DirectMessageRelaysList:()=>Eg,DraftClassifiedListing:()=>zg,DraftLong:()=>Mg,Emojisets:()=>Pg,EncryptedDirectMessage:()=>Z0,EventDeletion:()=>W0,FileMetadata:()=>X0,FileServerPreference:()=>xg,Followsets:()=>Tg,GenericRepost:()=>vs,Genericlists:()=>Ig,GiftWrap:()=>Pf,HTTPAuth:()=>ms,Handlerinformation:()=>Yg,Handlerrecommendation:()=>Gg,Highlights:()=>lg,InterestsList:()=>vg,Interestsets:()=>Rg,JobFeedback:()=>sg,JobRequest:()=>og,JobResult:()=>ig,Label:()=>ng,LightningPubRPC:()=>Ag,LiveChatMessage:()=>J0,LiveEvent:()=>Vg,LongFormArticle:()=>Hg,Metadata:()=>z0,Mutelist:()=>ug,NWCWalletInfo:()=>_g,NWCWalletRequest:()=>Vf,NWCWalletResponse:()=>Bg,NostrConnect:()=>Sg,OpenTimestamps:()=>Y0,Pinlist:()=>dg,PrivateDirectMessage:()=>Nf,ProblemTracker:()=>Q0,ProfileBadges:()=>Ug,PublicChatsList:()=>wg,Reaction:()=>bs,RecommendRelay:()=>F0,RelayList:()=>hg,Relaysets:()=>$g,Report:()=>eg,Reporting:()=>tg,Repost:()=>ys,Seal:()=>Uf,SearchRelaysList:()=>bg,ShortTextNote:()=>Lf,Time:()=>Kg,UserEmojiList:()=>mg,UserStatuses:()=>jg,Zap:()=>fg,ZapGoal:()=>cg,ZapRequest:()=>ag,classifyKind:()=>j0,isAddressableKind:()=>ws,isEphemeralKind:()=>kf,isKind:()=>D0,isRegularKind:()=>$f,isReplaceableKind:()=>ps});function $f(e){return e<1e4&&e!==0&&e!==3}function ps(e){return e===0||e===3||1e4<=e&&e<2e4}function kf(e){return 2e4<=e&&e<3e4}function ws(e){return 3e4<=e&&e<4e4}function j0(e){return $f(e)?"regular":ps(e)?"replaceable":kf(e)?"ephemeral":ws(e)?"parameterized":"unknown"}function D0(e,t){const n=t instanceof Array?t:[t];return ds(e)&&n.includes(e.kind)||!1}var z0=0,Lf=1,F0=2,K0=3,Z0=4,W0=5,ys=6,bs=7,G0=8,Uf=13,Nf=14,vs=16,Rf=40,Of=41,Cf=42,Hf=43,Mf=44,Y0=1040,Pf=1059,X0=1063,J0=1311,Q0=1971,eg=1984,tg=1984,ng=1985,rg=4550,og=5999,ig=6999,sg=7e3,cg=9041,ag=9734,fg=9735,lg=9802,ug=1e4,dg=10001,hg=10002,gg=10003,pg=10004,wg=10005,yg=10006,bg=10007,vg=10015,mg=10030,Eg=10050,xg=10096,_g=13194,Ag=21e3,qf=22242,Vf=23194,Bg=23195,Sg=24133,ms=27235,Tg=3e4,Ig=30001,$g=30002,kg=30003,Lg=30004,Ug=30008,Ng=30009,Rg=30015,Og=30017,Cg=30018,Hg=30023,Mg=30024,Pg=30030,qg=30078,Vg=30311,jg=30315,Dg=30402,zg=30403,Fg=31922,Kg=31923,Zg=31924,Wg=31925,Gg=31989,Yg=31990,Xg=34550;function Jg(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1)return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([i,s])=>i===n.slice(1)&&o.indexOf(s)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function Qg(e,t){for(let n=0;n<e.length;n++)if(Jg(e[n],t))return!0;return!1}var ep={};te(ep,{getHex64:()=>$o,getInt:()=>jf,getSubscriptionId:()=>Df,matchEventId:()=>tp,matchEventKind:()=>rp,matchEventPubkey:()=>np});function $o(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function jf(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,o=e.slice(r),i=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,i),10)}function Df(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let i=r+1+o;return e.slice(r+1,i)}function tp(e,t){return t===$o(e,"id")}function np(e,t){return t===$o(e,"pubkey")}function rp(e,t){return t===jf(e,"kind")}var op={};te(op,{makeAuthEvent:()=>zf});function zf(e,t){return{kind:qf,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function ip(){return new Promise((e,t)=>{try{if(typeof MessageChannel<"u"){const n=new MessageChannel,r=()=>{n.port1.removeEventListener("message",r),e()};n.port1.addEventListener("message",r),n.port2.postMessage(0),n.port1.start()}else typeof setImmediate<"u"?setImmediate(e):typeof setTimeout<"u"?setTimeout(e,0):e()}catch(n){console.error("during yield: ",n),t(n)}})}var sp=e=>(e[nn]=!0,!0),Ff=class extends Error{constructor(e,t){super(`Tried to send message '${e} on a closed connection to ${t}.`),this.name="SendingOnClosedConnection"}},Kf=class{constructor(e,t){M(this,"url");M(this,"_connected",!1);M(this,"onclose",null);M(this,"onnotice",e=>console.debug(`NOTICE from ${this.url}: ${e}`));M(this,"baseEoseTimeout",4400);M(this,"connectionTimeout",4400);M(this,"publishTimeout",4400);M(this,"pingFrequency",2e4);M(this,"pingTimeout",2e4);M(this,"resubscribeBackoff",[1e4,1e4,1e4,2e4,2e4,3e4,6e4]);M(this,"openSubs",new Map);M(this,"enablePing");M(this,"enableReconnect");M(this,"connectionTimeoutHandle");M(this,"reconnectTimeoutHandle");M(this,"pingTimeoutHandle");M(this,"reconnectAttempts",0);M(this,"closedIntentionally",!1);M(this,"connectionPromise");M(this,"openCountRequests",new Map);M(this,"openEventPublishes",new Map);M(this,"ws");M(this,"incomingMessageQueue",new If);M(this,"queueRunning",!1);M(this,"challenge");M(this,"authPromise");M(this,"serial",0);M(this,"verifyEvent");M(this,"_WebSocket");this.url=on(e),this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation||WebSocket,this.enablePing=t.enablePing,this.enableReconnect=t.enableReconnect||!1}static async connect(e,t){const n=new Kf(e,t);return await n.connect(),n}closeAllSubscriptions(e){for(let[t,n]of this.openSubs)n.close(e);this.openSubs.clear();for(let[t,n]of this.openEventPublishes)n.reject(new Error(e));this.openEventPublishes.clear();for(let[t,n]of this.openCountRequests)n.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async reconnect(){const e=this.resubscribeBackoff[Math.min(this.reconnectAttempts,this.resubscribeBackoff.length-1)];this.reconnectAttempts++,this.reconnectTimeoutHandle=setTimeout(async()=>{try{await this.connect()}catch{}},e)}handleHardClose(e){var n;this.pingTimeoutHandle&&(clearTimeout(this.pingTimeoutHandle),this.pingTimeoutHandle=void 0),this._connected=!1,this.connectionPromise=void 0;const t=this.closedIntentionally;this.closedIntentionally=!1,(n=this.onclose)==null||n.call(this),this.enableReconnect&&!t?this.reconnect():this.closeAllSubscriptions(e)}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.authPromise=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;t("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(n){clearTimeout(this.connectionTimeoutHandle),t(n);return}this.ws.onopen=()=>{this.reconnectTimeoutHandle&&(clearTimeout(this.reconnectTimeoutHandle),this.reconnectTimeoutHandle=void 0),clearTimeout(this.connectionTimeoutHandle),this._connected=!0,this.reconnectAttempts=0;for(const n of this.openSubs.values())n.eosed=!1,typeof this.enableReconnect=="function"&&(n.filters=this.enableReconnect(n.filters)),n.fire();this.enablePing&&this.pingpong(),e()},this.ws.onerror=n=>{clearTimeout(this.connectionTimeoutHandle),t(n.message||"websocket error"),this.handleHardClose("relay connection errored")},this.ws.onclose=n=>{clearTimeout(this.connectionTimeoutHandle),t(n.message||"websocket closed"),this.handleHardClose("relay connection closed")},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}waitForPingPong(){return new Promise(e=>{this.ws.once("pong",()=>e(!0)),this.ws.ping()})}async waitForDummyReq(){return new Promise((e,t)=>{const n=this.subscribe([{ids:["a".repeat(64)]}],{oneose:()=>{n.close(),e(!0)},eoseTimeout:this.pingTimeout+1e3})})}async pingpong(){var e,t,n;((e=this.ws)==null?void 0:e.readyState)===1&&(await Promise.any([this.ws&&this.ws.ping&&this.ws.once?this.waitForPingPong():this.waitForDummyReq(),new Promise(o=>setTimeout(()=>o(!1),this.pingTimeout))])?this.pingTimeoutHandle=setTimeout(()=>this.pingpong(),this.pingFrequency):((t=this.ws)==null?void 0:t.readyState)===this._WebSocket.OPEN&&((n=this.ws)==null||n.close()))}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await ip();this.queueRunning=!1}handleNext(){var n,r,o;const e=this.incomingMessageQueue.dequeue();if(!e)return!1;const t=Df(e);if(t){const i=this.openSubs.get(t);if(!i)return;const s=$o(e,"id"),c=(n=i.alreadyHaveEvent)==null?void 0:n.call(i,s);if((r=i.receivedEvent)==null||r.call(i,this,s),c)return}try{let i=JSON.parse(e);switch(i[0]){case"EVENT":{const s=this.openSubs.get(i[1]),c=i[2];this.verifyEvent(c)&&Qg(s.filters,c)&&s.onevent(c);return}case"COUNT":{const s=i[1],c=i[2],a=this.openCountRequests.get(s);a&&(a.resolve(c.count),this.openCountRequests.delete(s));return}case"EOSE":{const s=this.openSubs.get(i[1]);if(!s)return;s.receivedEose();return}case"OK":{const s=i[1],c=i[2],a=i[3],f=this.openEventPublishes.get(s);f&&(clearTimeout(f.timeout),c?f.resolve(a):f.reject(new Error(a)),this.openEventPublishes.delete(s));return}case"CLOSED":{const s=i[1],c=this.openSubs.get(s);if(!c)return;c.closed=!0,c.close(i[2]);return}case"NOTICE":{this.onnotice(i[1]);return}case"AUTH":{this.challenge=i[1];return}default:{const s=this.openSubs.get(i[1]);(o=s==null?void 0:s.oncustom)==null||o.call(s,i);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Ff(e,this.url);this.connectionPromise.then(()=>{var t;(t=this.ws)==null||t.send(e)})}async auth(e){const t=this.challenge;if(!t)throw new Error("can't perform auth, no challenge was received");return this.authPromise?this.authPromise:(this.authPromise=new Promise(async(n,r)=>{try{let o=await e(zf(this.url,t)),i=setTimeout(()=>{let s=this.openEventPublishes.get(o.id);s&&(s.reject(new Error("auth timed out")),this.openEventPublishes.delete(o.id))},this.publishTimeout);this.openEventPublishes.set(o.id,{resolve:n,reject:r,timeout:i}),this.send('["AUTH",'+JSON.stringify(o)+"]")}catch(o){console.warn("subscribe auth function failed:",o)}}),this.authPromise)}async publish(e){const t=new Promise((n,r)=>{const o=setTimeout(()=>{const i=this.openEventPublishes.get(e.id);i&&(i.reject(new Error("publish timed out")),this.openEventPublishes.delete(e.id))},this.publishTimeout);this.openEventPublishes.set(e.id,{resolve:n,reject:r,timeout:o})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;const n=(t==null?void 0:t.id)||"count:"+this.serial,r=new Promise((o,i)=>{this.openCountRequests.set(n,{resolve:o,reject:i})});return this.send('["COUNT","'+n+'",'+JSON.stringify(e).substring(1)),r}subscribe(e,t){const n=this.prepareSubscription(e,t);return n.fire(),n}prepareSubscription(e,t){this.serial++;const n=t.id||(t.label?t.label+":":"sub:")+this.serial,r=new cp(this,n,e,t);return this.openSubs.set(n,r),r}close(){var e,t,n;this.closedIntentionally=!0,this.reconnectTimeoutHandle&&(clearTimeout(this.reconnectTimeoutHandle),this.reconnectTimeoutHandle=void 0),this.pingTimeoutHandle&&(clearTimeout(this.pingTimeoutHandle),this.pingTimeoutHandle=void 0),this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.onclose)==null||e.call(this),((t=this.ws)==null?void 0:t.readyState)===this._WebSocket.OPEN&&((n=this.ws)==null||n.close())}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},cp=class{constructor(e,t,n,r){M(this,"relay");M(this,"id");M(this,"closed",!1);M(this,"eosed",!1);M(this,"filters");M(this,"alreadyHaveEvent");M(this,"receivedEvent");M(this,"onevent");M(this,"oneose");M(this,"onclose");M(this,"oncustom");M(this,"eoseTimeout");M(this,"eoseTimeoutHandle");if(n.length===0)throw new Error("subscription can't be created with zero filters");this.relay=e,this.filters=n,this.id=t,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||e.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(o=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,o)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var t;if(!this.closed&&this.relay.connected){try{this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]")}catch(n){if(!(n instanceof Ff))throw n}this.closed=!0}this.relay.openSubs.delete(this.id),(t=this.onclose)==null||t.call(this,e)}},ap;try{ap=WebSocket}catch{}var fp=class{constructor(e){M(this,"relays",new Map);M(this,"seenOn",new Map);M(this,"trackRelays",!1);M(this,"verifyEvent");M(this,"enablePing");M(this,"enableReconnect");M(this,"trustedRelayURLs",new Set);M(this,"_WebSocket");this.verifyEvent=e.verifyEvent,this._WebSocket=e.websocketImplementation,this.enablePing=e.enablePing,this.enableReconnect=e.enableReconnect}async ensureRelay(e,t){e=on(e);let n=this.relays.get(e);return n||(n=new Kf(e,{verifyEvent:this.trustedRelayURLs.has(e)?sp:this.verifyEvent,websocketImplementation:this._WebSocket,enablePing:this.enablePing,enableReconnect:this.enableReconnect}),n.onclose=()=>{n&&!n.enableReconnect&&this.relays.delete(e)},t!=null&&t.connectionTimeout&&(n.connectionTimeout=t.connectionTimeout),this.relays.set(e,n)),await n.connect(),n}close(e){e.map(on).forEach(t=>{var n;(n=this.relays.get(t))==null||n.close(),this.relays.delete(t)})}subscribe(e,t,n){n.onauth=n.onauth||n.doauth;const r=[];for(let o=0;o<e.length;o++){const i=on(e[o]);r.find(s=>s.url===i)||r.push({url:i,filter:t})}return this.subscribeMap(r,n)}subscribeMany(e,t,n){n.onauth=n.onauth||n.doauth;const r=[],o=[];for(let i=0;i<e.length;i++){const s=on(e[i]);o.indexOf(s)===-1&&(o.push(s),r.push({url:s,filter:t}))}return this.subscribeMap(r,n)}subscribeMap(e,t){t.onauth=t.onauth||t.doauth;const n=new Map;for(const d of e){const{url:h,filter:p}=d;n.has(h)||n.set(h,[]),n.get(h).push(p)}const r=Array.from(n.entries()).map(([d,h])=>({url:d,filters:h}));this.trackRelays&&(t.receivedEvent=(d,h)=>{let p=this.seenOn.get(h);p||(p=new Set,this.seenOn.set(h,p)),p.add(d)});const o=new Set,i=[],s=[];let c=d=>{var h;s[d]||(s[d]=!0,s.filter(p=>p).length===r.length&&((h=t.oneose)==null||h.call(t),c=()=>{}))};const a=[];let f=(d,h)=>{var p;a[d]||(c(d),a[d]=h,a.filter(g=>g).length===r.length&&((p=t.onclose)==null||p.call(t,a),f=()=>{}))};const u=d=>{var p;if((p=t.alreadyHaveEvent)!=null&&p.call(t,d))return!0;const h=o.has(d);return o.add(d),h},l=Promise.all(r.map(async({url:d,filters:h},p)=>{let g;try{g=await this.ensureRelay(d,{connectionTimeout:t.maxWait?Math.max(t.maxWait*.8,t.maxWait-1e3):void 0})}catch(m){f(p,(m==null?void 0:m.message)||String(m));return}let y=g.subscribe(h,{...t,oneose:()=>c(p),onclose:m=>{m.startsWith("auth-required: ")&&t.onauth?g.auth(t.onauth).then(()=>{g.subscribe(h,{...t,oneose:()=>c(p),onclose:I=>{f(p,I)},alreadyHaveEvent:u,eoseTimeout:t.maxWait})}).catch(I=>{f(p,`auth was required and attempted, but failed with: ${I}`)}):f(p,m)},alreadyHaveEvent:u,eoseTimeout:t.maxWait});i.push(y)}));return{async close(d){await l,i.forEach(h=>{h.close(d)})}}}subscribeEose(e,t,n){n.onauth=n.onauth||n.doauth;const r=this.subscribe(e,t,{...n,oneose(){r.close("closed automatically on eose")}});return r}subscribeManyEose(e,t,n){n.onauth=n.onauth||n.doauth;const r=this.subscribeMany(e,t,{...n,oneose(){r.close("closed automatically on eose")}});return r}async querySync(e,t,n){return new Promise(async r=>{const o=[];this.subscribeEose(e,t,{...n,onevent(i){o.push(i)},onclose(i){r(o)}})})}async get(e,t,n){t.limit=1;const r=await this.querySync(e,t,n);return r.sort((o,i)=>i.created_at-o.created_at),r[0]||null}publish(e,t,n){return e.map(on).map(async(r,o,i)=>{if(i.indexOf(r)!==o)return Promise.reject("duplicate url");let s=await this.ensureRelay(r);return s.publish(t).catch(async c=>{if(c instanceof Error&&c.message.startsWith("auth-required: ")&&(n!=null&&n.onauth))return await s.auth(n.onauth),s.publish(t);throw c}).then(c=>{if(this.trackRelays){let a=this.seenOn.get(t.id);a||(a=new Set,this.seenOn.set(t.id,a)),a.add(s)}return c})})}listConnectionStatus(){const e=new Map;return this.relays.forEach((t,n)=>e.set(n,t.connected)),e}destroy(){this.relays.forEach(e=>e.close()),this.relays=new Map}},Zf;try{Zf=WebSocket}catch{}var Mb=class extends fp{constructor(e){super({verifyEvent:Io,websocketImplementation:Zf,...e})}},lp={};te(lp,{BECH32_REGEX:()=>Wf,Bech32MaxSize:()=>Es,NostrTypeGuard:()=>up,decode:()=>ko,decodeNostrURI:()=>hp,encodeBytes:()=>Uo,naddrEncode:()=>vp,neventEncode:()=>bp,noteEncode:()=>wp,nprofileEncode:()=>yp,npubEncode:()=>pp,nsecEncode:()=>gp});var up={isNProfile:e=>/^nprofile1[a-z\d]+$/.test(e||""),isNEvent:e=>/^nevent1[a-z\d]+$/.test(e||""),isNAddr:e=>/^naddr1[a-z\d]+$/.test(e||""),isNSec:e=>/^nsec1[a-z\d]{58}$/.test(e||""),isNPub:e=>/^npub1[a-z\d]{58}$/.test(e||""),isNote:e=>/^note1[a-z\d]+$/.test(e||""),isNcryptsec:e=>/^ncryptsec1[a-z\d]+$/.test(e||"")},Es=5e3,Wf=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function dp(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function hp(e){try{return e.startsWith("nostr:")&&(e=e.substring(6)),ko(e)}catch{return{type:"invalid",data:null}}}function ko(e){var o,i,s,c,a,f,u;let{prefix:t,words:n}=Ue.decode(e,Es),r=new Uint8Array(Ue.fromWords(n));switch(t){case"nprofile":{let l=Jo(r);if(!((o=l[0])!=null&&o[0]))throw new Error("missing TLV 0 for nprofile");if(l[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:oe(l[0][0]),relays:l[1]?l[1].map(d=>Et.decode(d)):[]}}}case"nevent":{let l=Jo(r);if(!((i=l[0])!=null&&i[0]))throw new Error("missing TLV 0 for nevent");if(l[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(l[2]&&l[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(l[3]&&l[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:oe(l[0][0]),relays:l[1]?l[1].map(d=>Et.decode(d)):[],author:(s=l[2])!=null&&s[0]?oe(l[2][0]):void 0,kind:(c=l[3])!=null&&c[0]?parseInt(oe(l[3][0]),16):void 0}}}case"naddr":{let l=Jo(r);if(!((a=l[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((f=l[2])!=null&&f[0]))throw new Error("missing TLV 2 for naddr");if(l[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=l[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(l[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Et.decode(l[0][0]),pubkey:oe(l[2][0]),kind:parseInt(oe(l[3][0]),16),relays:l[1]?l[1].map(d=>Et.decode(d)):[]}}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:oe(r)};default:throw new Error(`unknown prefix ${t}`)}}function Jo(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],i=n.slice(2,2+o);if(n=n.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(i)}return t}function gp(e){return Uo("nsec",e)}function pp(e){return Uo("npub",Ce(e))}function wp(e){return Uo("note",Ce(e))}function Lo(e,t){let n=Ue.toWords(t);return Ue.encode(e,n,Es)}function Uo(e,t){return Lo(e,t)}function yp(e){let t=xs({0:[Ce(e.pubkey)],1:(e.relays||[]).map(n=>Ye.encode(n))});return Lo("nprofile",t)}function bp(e){let t;e.kind!==void 0&&(t=dp(e.kind));let n=xs({0:[Ce(e.id)],1:(e.relays||[]).map(r=>Ye.encode(r)),2:e.author?[Ce(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return Lo("nevent",n)}function vp(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=xs({0:[Ye.encode(e.identifier)],1:(e.relays||[]).map(r=>Ye.encode(r)),2:[Ce(e.pubkey)],3:[new Uint8Array(t)]});return Lo("naddr",n)}function xs(e){let t=[];return Object.entries(e).reverse().forEach(([n,r])=>{r.forEach(o=>{let i=new Uint8Array(o.length+2);i.set([parseInt(n)],0),i.set([o.length],1),i.set(o,2),t.push(i)})}),nr(...t)}var mp={};te(mp,{decrypt:()=>Ep,encrypt:()=>Gf});function Gf(e,t,n){const r=e instanceof Uint8Array?oe(e):e,o=tr.getSharedSecret(r,"02"+t),i=Yf(o);let s=Uint8Array.from(Qr(16)),c=Ye.encode(n),a=bf(i,s).encrypt(c),f=At.encode(new Uint8Array(a)),u=At.encode(new Uint8Array(s.buffer));return`${f}?iv=${u}`}function Ep(e,t,n){const r=e instanceof Uint8Array?oe(e):e;let[o,i]=n.split("?iv="),s=tr.getSharedSecret(r,"02"+t),c=Yf(s),a=At.decode(i),f=At.decode(o),u=bf(c,a).decrypt(f);return Et.decode(u)}function Yf(e){return e.slice(1,33)}var xp={};te(xp,{NIP05_REGEX:()=>_s,isNip05:()=>_p,isValid:()=>Sp,queryProfile:()=>Xf,searchDomain:()=>Bp,useFetchImplementation:()=>Ap});var _s=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,_p=e=>_s.test(e||""),No;try{No=fetch}catch{}function Ap(e){No=e}async function Bp(e,t=""){try{const n=`https://${e}/.well-known/nostr.json?name=${t}`,r=await No(n,{redirect:"manual"});if(r.status!==200)throw Error("Wrong response code");return(await r.json()).names}catch{return{}}}async function Xf(e){var o;const t=e.match(_s);if(!t)return null;const[,n="_",r]=t;try{const i=`https://${r}/.well-known/nostr.json?name=${n}`,s=await No(i,{redirect:"manual"});if(s.status!==200)throw Error("Wrong response code");const c=await s.json(),a=c.names[n];return a?{pubkey:a,relays:(o=c.relays)==null?void 0:o[a]}:null}catch{return null}}async function Sp(e,t){const n=await Xf(t);return n?n.pubkey===e:!1}var Tp={};te(Tp,{parse:()=>Ip});function Ip(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};let n,r;for(let o=e.tags.length-1;o>=0;o--){const i=e.tags[o];if(i[0]==="e"&&i[1]){const[s,c,a,f,u]=i,l={id:c,relays:a?[a]:[],author:u};if(f==="root"){t.root=l;continue}if(f==="reply"){t.reply=l;continue}if(f==="mention"){t.mentions.push(l);continue}n?r=l:n=l,t.mentions.push(l);continue}if(i[0]==="q"&&i[1]){const[s,c,a]=i;t.quotes.push({id:c,relays:a?[a]:[]})}if(i[0]==="p"&&i[1]){t.profiles.push({pubkey:i[1],relays:i[2]?[i[2]]:[]});continue}}return t.root||(t.root=r||n||t.reply),t.reply||(t.reply=n||t.root),[t.reply,t.root].forEach(o=>{if(!o)return;let i=t.mentions.indexOf(o);if(i!==-1&&t.mentions.splice(i,1),o.author){let s=t.profiles.find(c=>c.pubkey===o.author);s&&s.relays&&(o.relays||(o.relays=[]),s.relays.forEach(c=>{var a;((a=o.relays)==null?void 0:a.indexOf(c))===-1&&o.relays.push(c)}),s.relays=o.relays)}}),t.mentions.forEach(o=>{if(o.author){let i=t.profiles.find(s=>s.pubkey===o.author);i&&i.relays&&(o.relays||(o.relays=[]),i.relays.forEach(s=>{o.relays.indexOf(s)===-1&&o.relays.push(s)}),i.relays=o.relays)}}),t}var $p={};te($p,{fetchRelayInformation:()=>Lp,useFetchImplementation:()=>kp});var Jf;try{Jf=fetch}catch{}function kp(e){Jf=e}async function Lp(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var Up={};te(Up,{fastEventHash:()=>el,getPow:()=>Qf,minePow:()=>Np});function Qf(e){let t=0;for(let n=0;n<64;n+=8){const r=parseInt(e.substring(n,n+8),16);if(r===0)t+=32;else{t+=Math.clz32(r);break}}return t}function Np(e,t){let n=0;const r=e,o=["nonce",n.toString(),t.toString()];for(r.tags.push(o);;){const i=Math.floor(new Date().getTime()/1e3);if(i!==r.created_at&&(n=0,r.created_at=i),o[1]=(++n).toString(),r.id=el(r),Qf(r.id)>=t)break}return r}function el(e){return oe($t(Ye.encode(JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content]))))}var Rp={};te(Rp,{unwrapEvent:()=>Kp,unwrapManyEvents:()=>Zp,wrapEvent:()=>hl,wrapManyEvents:()=>Fp});var Op={};te(Op,{createRumor:()=>fl,createSeal:()=>ll,createWrap:()=>ul,unwrapEvent:()=>Is,unwrapManyEvents:()=>dl,wrapEvent:()=>to,wrapManyEvents:()=>Dp});var Cp={};te(Cp,{decrypt:()=>Ts,encrypt:()=>Ss,getConversationKey:()=>As,v2:()=>Vp});var tl=1,nl=65535;function As(e,t){const n=tr.getSharedSecret(e,"02"+t).subarray(1,33);return L0($t,n,"nip44-v2")}function rl(e,t){const n=U0($t,e,t,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}function Bs(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)}function Hp(e){if(!Number.isSafeInteger(e)||e<tl||e>nl)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}function Mp(e){const t=Ye.encode(e),n=t.length,r=Hp(n),o=new Uint8Array(Bs(n)-n);return nr(r,t,o)}function Pp(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(t<tl||t>nl||n.length!==t||e.length!==2+Bs(t))throw new Error("invalid padding");return Et.decode(n)}function ol(e,t,n){if(n.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=nr(n,t);return Ir($t,e,r)}function qp(e){if(typeof e!="string")throw new Error("payload must be a valid string");const t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if(e[0]==="#")throw new Error("unknown encryption version");let n;try{n=At.decode(e)}catch(i){throw new Error("invalid base64: "+i.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const o=n[0];if(o!==2)throw new Error("unknown encryption version "+o);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}function Ss(e,t,n=Qr(32)){const{chacha_key:r,chacha_nonce:o,hmac_key:i}=rl(t,n),s=Mp(e),c=Af(r,o,s),a=ol(i,c,n);return At.encode(nr(new Uint8Array([2]),n,c,a))}function Ts(e,t){const{nonce:n,ciphertext:r,mac:o}=qp(e),{chacha_key:i,chacha_nonce:s,hmac_key:c}=rl(t,n),a=ol(c,r,n);if(!df(a,o))throw new Error("invalid MAC");const f=Af(i,s,r);return Pp(f)}var Vp={utils:{getConversationKey:As,calcPaddedLen:Bs},encrypt:Ss,decrypt:Ts},jp=2880*60,il=()=>Math.round(Date.now()/1e3),sl=()=>Math.round(il()-Math.random()*jp),cl=(e,t)=>As(e,t),al=(e,t,n)=>Ss(JSON.stringify(e),cl(t,n)),_c=(e,t)=>JSON.parse(Ts(e.content,cl(t,e.pubkey)));function fl(e,t){const n={created_at:il(),content:"",tags:[],...e,pubkey:gs(t)};return n.id=Vr(n),n}function ll(e,t,n){return ft({kind:Uf,content:al(e,t,n),created_at:sl(),tags:[]},t)}function ul(e,t){const n=q0();return ft({kind:Pf,content:al(e,n,t),created_at:sl(),tags:[["p",t]]},n)}function to(e,t,n){const r=fl(e,t),o=ll(r,t,n);return ul(o,n)}function Dp(e,t,n){if(!n||n.length===0)throw new Error("At least one recipient is required.");const r=gs(t),o=[to(e,t,r)];return n.forEach(i=>{o.push(to(e,t,i))}),o}function Is(e,t){const n=_c(e,t);return _c(n,t)}function dl(e,t){let n=[];return e.forEach(r=>{n.push(Is(r,t))}),n.sort((r,o)=>r.created_at-o.created_at),n}function zp(e,t,n,r){const o={created_at:Math.ceil(Date.now()/1e3),kind:Nf,tags:[],content:t};return(Array.isArray(e)?e:[e]).forEach(({publicKey:s,relayUrl:c})=>{o.tags.push(c?["p",s,c]:["p",s])}),r&&o.tags.push(["e",r.eventId,r.relayUrl||"","reply"]),n&&o.tags.push(["subject",n]),o}function hl(e,t,n,r,o){const i=zp(t,n,r,o);return to(i,e,t.publicKey)}function Fp(e,t,n,r,o){if(!t||t.length===0)throw new Error("At least one recipient is required.");return[{publicKey:gs(e)},...t].map(s=>hl(e,s,n,r,o))}var Kp=Is,Zp=dl,Wp={};te(Wp,{finishRepostEvent:()=>Gp,getRepostedEvent:()=>Yp,getRepostedEventPointer:()=>gl});function Gp(e,t,n,r){var s;let o;const i=[...e.tags??[],["e",t.id,n],["p",t.pubkey]];return t.kind===Lf?o=ys:(o=vs,i.push(["k",String(t.kind)])),ft({kind:o,tags:i,content:e.content===""||(s=t.tags)!=null&&s.find(c=>c[0]==="-")?"":JSON.stringify(t),created_at:e.created_at},r)}function gl(e){if(![ys,vs].includes(e.kind))return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const o=e.tags[r];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(t!==void 0)return{id:t[1],relays:[t[2],n==null?void 0:n[2]].filter(r=>typeof r=="string"),author:n==null?void 0:n[1]}}function Yp(e,{skipVerification:t}={}){const n=gl(e);if(n===void 0||e.content==="")return;let r;try{r=JSON.parse(e.content)}catch{return}if(r.id===n.id&&!(!t&&!Io(r)))return r}var Xp={};te(Xp,{NOSTR_URI_REGEX:()=>$s,parse:()=>Qp,test:()=>Jp});var $s=new RegExp(`nostr:(${Wf.source})`);function Jp(e){return typeof e=="string"&&new RegExp(`^${$s.source}$`).test(e)}function Qp(e){const t=e.match(new RegExp(`^${$s.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:ko(t[1])}}var ew={};te(ew,{finishReactionEvent:()=>tw,getReactedEventPointer:()=>nw});function tw(e,t,n){const r=t.tags.filter(o=>o.length>=2&&(o[0]==="e"||o[0]==="p"));return ft({...e,kind:bs,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function nw(e){if(e.kind!==bs)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const o=e.tags[r];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(!(t===void 0||n===void 0))return{id:t[1],relays:[t[2],n[2]].filter(r=>r!==void 0),author:n[1]}}var rw={};te(rw,{parse:()=>iw});var Ac=/\W/m,Bc=/\W |\W$|$|,| /m,ow=42;function*iw(e){let t=[];if(typeof e!="string"){for(let i=0;i<e.tags.length;i++){const s=e.tags[i];s[0]==="emoji"&&s.length>=3&&t.push({type:"emoji",shortcode:s[1],url:s[2]})}e=e.content}const n=e.length;let r=0,o=0;e:for(;o<n;){const i=e.indexOf(":",o),s=e.indexOf("#",o);if(i===-1&&s===-1)break e;if(i===-1||s>=0&&s<i){if(s===0||e[s-1]===" "){const c=e.slice(s+1,s+ow).match(Ac),a=c?s+1+c.index:n;yield{type:"text",text:e.slice(r,s)},yield{type:"hashtag",value:e.slice(s+1,a)},o=a,r=o;continue e}o=s+1;continue e}if(e.slice(i-5,i)==="nostr"){const c=e.slice(i+60).match(Ac),a=c?i+60+c.index:n;try{let f,{data:u,type:l}=ko(e.slice(i+1,a));switch(l){case"npub":f={pubkey:u};break;case"nsec":case"note":o=a+1;continue;default:f=u}r!==i-5&&(yield{type:"text",text:e.slice(r,i-5)}),yield{type:"reference",pointer:f},o=a,r=o;continue e}catch{o=i+1;continue e}}else if(e.slice(i-5,i)==="https"||e.slice(i-4,i)==="http"){const c=e.slice(i+4).match(Bc),a=c?i+4+c.index:n,f=e[i-1]==="s"?5:4;try{let u=new URL(e.slice(i-f,a));if(u.hostname.indexOf(".")===-1)throw new Error("invalid url");if(r!==i-f&&(yield{type:"text",text:e.slice(r,i-f)}),/\.(png|jpe?g|gif|webp|heic|svg)$/i.test(u.pathname)){yield{type:"image",url:u.toString()},o=a,r=o;continue e}if(/\.(mp4|avi|webm|mkv|mov)$/i.test(u.pathname)){yield{type:"video",url:u.toString()},o=a,r=o;continue e}if(/\.(mp3|aac|ogg|opus|wav|flac)$/i.test(u.pathname)){yield{type:"audio",url:u.toString()},o=a,r=o;continue e}yield{type:"url",url:u.toString()},o=a,r=o;continue e}catch{o=a+1;continue e}}else if(e.slice(i-3,i)==="wss"||e.slice(i-2,i)==="ws"){const c=e.slice(i+4).match(Bc),a=c?i+4+c.index:n,f=e[i-1]==="s"?3:2;try{let u=new URL(e.slice(i-f,a));if(u.hostname.indexOf(".")===-1)throw new Error("invalid ws url");r!==i-f&&(yield{type:"text",text:e.slice(r,i-f)}),yield{type:"relay",url:u.toString()},o=a,r=o;continue e}catch{o=a+1;continue e}}else{for(let c=0;c<t.length;c++){const a=t[c];if(e[i+a.shortcode.length+1]===":"&&e.slice(i+1,i+a.shortcode.length+1)===a.shortcode){r!==i&&(yield{type:"text",text:e.slice(r,i)}),yield a,o=i+a.shortcode.length+2,r=o;continue e}}o=i+1;continue e}}r!==n&&(yield{type:"text",text:e.slice(r)})}var sw={};te(sw,{channelCreateEvent:()=>cw,channelHideMessageEvent:()=>lw,channelMessageEvent:()=>fw,channelMetadataEvent:()=>aw,channelMuteUserEvent:()=>uw});var cw=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return ft({kind:Rf,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},aw=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return ft({kind:Of,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},fw=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),ft({kind:Cf,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},lw=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return ft({kind:Hf,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},uw=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return ft({kind:Mf,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)},dw={};te(dw,{EMOJI_SHORTCODE_REGEX:()=>pl,matchAll:()=>hw,regex:()=>ks,replaceAll:()=>gw});var pl=/:(\w+):/,ks=()=>new RegExp(`\\B${pl.source}\\B`,"g");function*hw(e){const t=e.matchAll(ks());for(const n of t)try{const[r,o]=n;yield{shortcode:r,name:o,start:n.index,end:n.index+r.length}}catch{}}function gw(e,t){return e.replaceAll(ks(),(n,r)=>t({shortcode:n,name:r}))}var pw={};te(pw,{useFetchImplementation:()=>ww,validateGithub:()=>yw});var Ls;try{Ls=fetch}catch{}function ww(e){Ls=e}async function yw(e,t,n){try{return await(await Ls(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var bw={};te(bw,{makeNwcRequestEvent:()=>mw,parseConnectionString:()=>vw});function vw(e){const{host:t,pathname:n,searchParams:r}=new URL(e),o=n||t,i=r.get("relay"),s=r.get("secret");if(!o||!i||!s)throw new Error("invalid connection string");return{pubkey:o,relay:i,secret:s}}async function mw(e,t,n){const o=Gf(t,e,JSON.stringify({method:"pay_invoice",params:{invoice:n}})),i={kind:Vf,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e]]};return ft(i,t)}var Ew={};te(Ew,{normalizeIdentifier:()=>xw});function xw(e){return e=e.trim().toLowerCase(),e=e.normalize("NFKC"),Array.from(e).map(t=>new RegExp("\\p{Letter}","u").test(t)||new RegExp("\\p{Number}","u").test(t)?t:"-").join("")}var _w={};te(_w,{getSatoshisAmountFromBolt11:()=>$w,getZapEndpoint:()=>Bw,makeZapReceipt:()=>Iw,makeZapRequest:()=>Sw,useFetchImplementation:()=>Aw,validateZapRequest:()=>Tw});var Us;try{Us=fetch}catch{}function Aw(e){Us=e}async function Bw(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(r){let[s,c]=r.split("@");t=new URL(`/.well-known/lnurlp/${s}`,`https://${c}`).toString()}else if(n){let{words:s}=Ue.decode(n,1e3),c=Ue.fromWords(s);t=Et.decode(c)}else return null;let i=await(await Us(t)).json();if(i.allowsNostr&&i.nostrPubkey)return i.callback}catch{}return null}function Sw(e){let t={kind:9734,created_at:Math.round(Date.now()/1e3),content:e.comment||"",tags:[["p","pubkey"in e?e.pubkey:e.event.pubkey],["amount",e.amount.toString()],["relays",...e.relays]]};if("event"in e){if(t.tags.push(["e",e.event.id]),ps(e.event.kind)){const n=["a",`${e.event.kind}:${e.event.pubkey}:`];t.tags.push(n)}else if(ws(e.event.kind)){let n=e.event.tags.find(([o,i])=>o==="d"&&i);if(!n)throw new Error("d tag not found or is empty");const r=["a",`${e.event.kind}:${e.event.pubkey}:${n[1]}`];t.tags.push(r)}t.tags.push(["k",e.event.kind.toString()])}return t}function Tw(e){let t;try{t=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!ds(t))return"Zap request is not a valid Nostr event.";if(!Io(t))return"Invalid signature on zap request.";let n=t.tags.find(([i,s])=>i==="p"&&s);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find(([i,s])=>i==="e"&&s);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([i,s])=>i==="relays"&&s)?null:"Zap request doesn't have a 'relays' tag."}function Iw({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let o=JSON.parse(e),i=o.tags.filter(([c])=>c==="e"||c==="p"||c==="a"),s={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...i,["P",o.pubkey],["bolt11",n],["description",e]]};return t&&s.tags.push(["preimage",t]),s}function $w(e){if(e.length<50)return 0;e=e.substring(0,50);const t=e.lastIndexOf("1");if(t===-1)return 0;const n=e.substring(0,t);if(!n.startsWith("lnbc"))return 0;const r=n.substring(4);if(r.length<1)return 0;const o=r[r.length-1],i=o.charCodeAt(0)-48,s=i>=0&&i<=9;let c=r.length-1;if(s&&c++,c<1)return 0;const a=parseInt(r.substring(0,c));switch(o){case"m":return a*1e5;case"u":return a*100;case"n":return a/10;case"p":return a/1e4;default:return a*1e8}}var kw={};te(kw,{Negentropy:()=>yl,NegentropyStorageVector:()=>Nw,NegentropySync:()=>Rw});var Qo=97,Mn=32,wl=16,en={Skip:0,Fingerprint:1,IdList:2},bt=class{constructor(e){M(this,"_raw");M(this,"length");typeof e=="number"?(this._raw=new Uint8Array(e),this.length=0):e instanceof Uint8Array?(this._raw=new Uint8Array(e),this.length=e.length):(this._raw=new Uint8Array(512),this.length=0)}unwrap(){return this._raw.subarray(0,this.length)}get capacity(){return this._raw.byteLength}extend(e){if(e instanceof bt&&(e=e.unwrap()),typeof e.length!="number")throw Error("bad length");const t=e.length+this.length;if(this.capacity<t){const n=this._raw,r=Math.max(this.capacity*2,t);this._raw=new Uint8Array(r),this._raw.set(n)}this._raw.set(e,this.length),this.length+=e.length}shift(){const e=this._raw[0];return this._raw=this._raw.subarray(1),this.length--,e}shiftN(e=1){const t=this._raw.subarray(0,e);return this._raw=this._raw.subarray(e),this.length-=e,t}};function Nr(e){let t=0;for(;;){if(e.length===0)throw Error("parse ends prematurely");let n=e.shift();if(t=t<<7|n&127,(n&128)===0)break}return t}function gt(e){if(e===0)return new bt(new Uint8Array([0]));let t=[];for(;e!==0;)t.push(e&127),e>>>=7;t.reverse();for(let n=0;n<t.length-1;n++)t[n]|=128;return new bt(new Uint8Array(t))}function Lw(e){return jr(e,1)[0]}function jr(e,t){if(e.length<t)throw Error("parse ends prematurely");return e.shiftN(t)}var Uw=class{constructor(){M(this,"buf");this.setToZero()}setToZero(){this.buf=new Uint8Array(Mn)}add(e){let t=0,n=0,r=new DataView(this.buf.buffer),o=new DataView(e.buffer);for(let i=0;i<8;i++){let s=i*4,c=r.getUint32(s,!0),a=o.getUint32(s,!0),f=c;f+=t,f+=a,f>4294967295&&(n=1),r.setUint32(s,f&4294967295,!0),t=n,n=0}}negate(){let e=new DataView(this.buf.buffer);for(let n=0;n<8;n++){let r=n*4;e.setUint32(r,~e.getUint32(r,!0))}let t=new Uint8Array(Mn);t[0]=1,this.add(t)}getFingerprint(e){let t=new bt;return t.extend(this.buf),t.extend(gt(e)),$t(t.unwrap()).subarray(0,wl)}},Nw=class{constructor(){M(this,"items");M(this,"sealed");this.items=[],this.sealed=!1}insert(e,t){if(this.sealed)throw Error("already sealed");const n=uf(t);if(n.byteLength!==Mn)throw Error("bad id size for added item");this.items.push({timestamp:e,id:n})}seal(){if(this.sealed)throw Error("already sealed");this.sealed=!0,this.items.sort(ei);for(let e=1;e<this.items.length;e++)if(ei(this.items[e-1],this.items[e])===0)throw Error("duplicate item inserted")}unseal(){this.sealed=!1}size(){return this._checkSealed(),this.items.length}getItem(e){if(this._checkSealed(),e>=this.items.length)throw Error("out of range");return this.items[e]}iterate(e,t,n){this._checkSealed(),this._checkBounds(e,t);for(let r=e;r<t&&n(this.items[r],r);++r);}findLowerBound(e,t,n){return this._checkSealed(),this._checkBounds(e,t),this._binarySearch(this.items,e,t,r=>ei(r,n)<0)}fingerprint(e,t){let n=new Uw;return n.setToZero(),this.iterate(e,t,r=>(n.add(r.id),!0)),n.getFingerprint(t-e)}_checkSealed(){if(!this.sealed)throw Error("not sealed")}_checkBounds(e,t){if(e>t||t>this.items.length)throw Error("bad range")}_binarySearch(e,t,n,r){let o=n-t;for(;o>0;){let i=t,s=Math.floor(o/2);i+=s,r(e[i])?(t=++i,o-=s+1):o=s}return t}},yl=class{constructor(e,t=6e4){M(this,"storage");M(this,"frameSizeLimit");M(this,"lastTimestampIn");M(this,"lastTimestampOut");if(t<4096)throw Error("frameSizeLimit too small");this.storage=e,this.frameSizeLimit=t,this.lastTimestampIn=0,this.lastTimestampOut=0}_bound(e,t){return{timestamp:e,id:t||new Uint8Array(0)}}initiate(){let e=new bt;return e.extend(new Uint8Array([Qo])),this.splitRange(0,this.storage.size(),this._bound(Number.MAX_VALUE),e),Rn(e.unwrap())}reconcile(e,t,n){const r=new bt(uf(e));this.lastTimestampIn=this.lastTimestampOut=0;let o=new bt;o.extend(new Uint8Array([Qo]));let i=Lw(r);if(i<96||i>111)throw Error("invalid negentropy protocol version byte");if(i!==Qo)throw Error("unsupported negentropy protocol version requested: "+(i-96));let s=this.storage.size(),c=this._bound(0),a=0,f=!1;for(;r.length!==0;){let u=new bt,l=()=>{f&&(f=!1,u.extend(this.encodeBound(c)),u.extend(gt(en.Skip)))},d=this.decodeBound(r),h=Nr(r),p=a,g=this.storage.findLowerBound(a,s,d);if(h===en.Skip)f=!0;else if(h===en.Fingerprint){let y=jr(r,wl),m=this.storage.fingerprint(p,g);bl(y,m)!==0?(l(),this.splitRange(p,g,d,u)):f=!0}else if(h===en.IdList){let y=Nr(r),m={};for(let I=0;I<y;I++){let $=jr(r,Mn);m[Rn($)]=$}if(f=!0,this.storage.iterate(p,g,I=>{let $=I.id;const H=Rn($);return m[H]?delete m[Rn($)]:t==null||t(H),!0}),n)for(let I of Object.values(m))n(Rn(I))}else throw Error("unexpected mode");if(this.exceededFrameSizeLimit(o.length+u.length)){let y=this.storage.fingerprint(g,s);o.extend(this.encodeBound(this._bound(Number.MAX_VALUE))),o.extend(gt(en.Fingerprint)),o.extend(y);break}else o.extend(u);a=g,c=d}return o.length===1?null:Rn(o.unwrap())}splitRange(e,t,n,r){let o=t-e,i=16;if(o<i*2)r.extend(this.encodeBound(n)),r.extend(gt(en.IdList)),r.extend(gt(o)),this.storage.iterate(e,t,s=>(r.extend(s.id),!0));else{let s=Math.floor(o/i),c=o%i,a=e;for(let f=0;f<i;f++){let u=s+(f<c?1:0),l=this.storage.fingerprint(a,a+u);a+=u;let d;if(a===t)d=n;else{let h,p;this.storage.iterate(a-1,a+1,(g,y)=>(y===a-1?h=g:p=g,!0)),d=this.getMinimalBound(h,p)}r.extend(this.encodeBound(d)),r.extend(gt(en.Fingerprint)),r.extend(l)}}}exceededFrameSizeLimit(e){return e>this.frameSizeLimit-200}decodeTimestampIn(e){let t=Nr(e);return t=t===0?Number.MAX_VALUE:t-1,this.lastTimestampIn===Number.MAX_VALUE||t===Number.MAX_VALUE?(this.lastTimestampIn=Number.MAX_VALUE,Number.MAX_VALUE):(t+=this.lastTimestampIn,this.lastTimestampIn=t,t)}decodeBound(e){let t=this.decodeTimestampIn(e),n=Nr(e);if(n>Mn)throw Error("bound key too long");let r=jr(e,n);return{timestamp:t,id:r}}encodeTimestampOut(e){if(e===Number.MAX_VALUE)return this.lastTimestampOut=Number.MAX_VALUE,gt(0);let t=e;return e-=this.lastTimestampOut,this.lastTimestampOut=t,gt(e+1)}encodeBound(e){let t=new bt;return t.extend(this.encodeTimestampOut(e.timestamp)),t.extend(gt(e.id.length)),t.extend(e.id),t}getMinimalBound(e,t){if(t.timestamp!==e.timestamp)return this._bound(t.timestamp);{let n=0,r=t.id,o=e.id;for(let i=0;i<Mn&&r[i]===o[i];i++)n++;return this._bound(t.timestamp,t.id.subarray(0,n+1))}}};function bl(e,t){for(let n=0;n<e.byteLength;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}function ei(e,t){return e.timestamp===t.timestamp?bl(e.id,t.id):e.timestamp-t.timestamp}var Rw=class{constructor(e,t,n,r={}){M(this,"relay");M(this,"storage");M(this,"neg");M(this,"filter");M(this,"subscription");M(this,"onhave");M(this,"onneed");this.relay=e,this.storage=t,this.neg=new yl(t),this.onhave=r.onhave,this.onneed=r.onneed,this.filter=n,this.subscription=this.relay.prepareSubscription([{}],{label:r.label||"negentropy"}),this.subscription.oncustom=o=>{var i,s,c,a;switch(o[0]){case"NEG-MSG":{o.length<3&&console.warn(`got invalid NEG-MSG from ${this.relay.url}: ${o}`);try{const f=this.neg.reconcile(o[2],this.onhave,this.onneed);f?this.relay.send(`["NEG-MSG", "${this.subscription.id}", "${f}"]`):(this.close(),(i=r.onclose)==null||i.call(r))}catch(f){console.error("negentropy reconcile error:",f),(s=r==null?void 0:r.onclose)==null||s.call(r,`reconcile error: ${f}`)}break}case"NEG-CLOSE":{const f=o[2];console.warn("negentropy error:",f),(c=r.onclose)==null||c.call(r,f);break}case"NEG-ERR":(a=r.onclose)==null||a.call(r)}}}async start(){const e=this.neg.initiate();this.relay.send(`["NEG-OPEN","${this.subscription.id}",${JSON.stringify(this.filter)},"${e}"]`)}close(){this.relay.send(`["NEG-CLOSE","${this.subscription.id}"]`),this.subscription.close()}},Ow={};te(Ow,{getToken:()=>Cw,hashPayload:()=>Ns,unpackEventFromToken:()=>ml,validateEvent:()=>Sl,validateEventKind:()=>xl,validateEventMethodTag:()=>Al,validateEventPayloadTag:()=>Bl,validateEventTimestamp:()=>El,validateEventUrlTag:()=>_l,validateToken:()=>Hw});var vl="Nostr ";async function Cw(e,t,n,r=!1,o){const i={kind:ms,tags:[["u",e],["method",t]],created_at:Math.round(new Date().getTime()/1e3),content:""};o&&i.tags.push(["payload",Ns(o)]);const s=await n(i);return(r?vl:"")+At.encode(Ye.encode(JSON.stringify(s)))}async function Hw(e,t,n){const r=await ml(e).catch(i=>{throw i});return await Sl(r,t,n).catch(i=>{throw i})}async function ml(e){if(!e)throw new Error("Missing token");e=e.replace(vl,"");const t=Et.decode(At.decode(e));if(!t||t.length===0||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}function El(e){return e.created_at?Math.round(new Date().getTime()/1e3)-e.created_at<60:!1}function xl(e){return e.kind===ms}function _l(e,t){const n=e.tags.find(r=>r[0]==="u");return n?n.length>0&&n[1]===t:!1}function Al(e,t){const n=e.tags.find(r=>r[0]==="method");return n?n.length>0&&n[1].toLowerCase()===t.toLowerCase():!1}function Ns(e){const t=$t(Ye.encode(JSON.stringify(e)));return oe(t)}function Bl(e,t){const n=e.tags.find(o=>o[0]==="payload");if(!n)return!1;const r=Ns(t);return n.length>0&&n[1]===r}async function Sl(e,t,n,r){if(!Io(e))throw new Error("Invalid nostr event, signature invalid");if(!xl(e))throw new Error("Invalid nostr event, kind invalid");if(!El(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!_l(e,t))throw new Error("Invalid nostr event, url tag invalid");if(!Al(e,n))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!Bl(e,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}const On=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ro(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Oi(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function kn(e,...t){if(!Ro(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Tl(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Oi(e.outputLen),Oi(e.blockLen)}function no(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Mw(e,t){kn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ro(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function ti(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Qe(e,t){return e<<32-t|e>>>t}const Il=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Pw=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Pn(e){if(kn(e),Il)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=Pw[e[n]];return t}const dt={_0:48,_9:57,A:65,F:70,a:97,f:102};function Sc(e){if(e>=dt._0&&e<=dt._9)return e-dt._0;if(e>=dt.A&&e<=dt.F)return e-(dt.A-10);if(e>=dt.a&&e<=dt.f)return e-(dt.a-10)}function oo(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Il)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const s=Sc(e.charCodeAt(i)),c=Sc(e.charCodeAt(i+1));if(s===void 0||c===void 0){const a=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+i)}r[o]=s*16+c}return r}function $l(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Rs(e){return typeof e=="string"&&(e=$l(e)),kn(e),e}function ot(...e){let t=0;for(let r=0;r<e.length;r++){const o=e[r];kn(o),t+=o.length}const n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const i=e[r];n.set(i,o),o+=i.length}return n}class kl{}function qw(e){const t=r=>e().update(Rs(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Oo(e=32){if(On&&typeof On.getRandomValues=="function")return On.getRandomValues(new Uint8Array(e));if(On&&typeof On.randomBytes=="function")return Uint8Array.from(On.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function Vw(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),c=Number(n&i),a=r?4:0,f=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}function jw(e,t,n){return e&t^~e&n}function Dw(e,t,n){return e&t^e&n^t&n}class zw extends kl{constructor(t,n,r,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.buffer=new Uint8Array(t),this.view=ti(this.buffer)}update(t){no(this),t=Rs(t),kn(t);const{view:n,buffer:r,blockLen:o}=this,i=t.length;for(let s=0;s<i;){const c=Math.min(o-this.pos,i-s);if(c===o){const a=ti(t);for(;o<=i-s;s+=o)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){no(this),Mw(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:i}=this;let{pos:s}=this;n[s++]=128,ro(this.buffer.subarray(s)),this.padOffset>o-s&&(this.process(r,0),s=0);for(let l=s;l<o;l++)n[l]=0;Vw(r,o-8,BigInt(this.length*8),i),this.process(r,0);const c=ti(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=a/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)c.setUint32(4*l,u[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:i,destroyed:s,pos:c}=this;return t.destroyed=s,t.finished=i,t.length=o,t.pos=c,o%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Pt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Fw=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qt=new Uint32Array(64);class Kw extends zw{constructor(t=32){super(64,t,8,!1),this.A=Pt[0]|0,this.B=Pt[1]|0,this.C=Pt[2]|0,this.D=Pt[3]|0,this.E=Pt[4]|0,this.F=Pt[5]|0,this.G=Pt[6]|0,this.H=Pt[7]|0}get(){const{A:t,B:n,C:r,D:o,E:i,F:s,G:c,H:a}=this;return[t,n,r,o,i,s,c,a]}set(t,n,r,o,i,s,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,n){for(let l=0;l<16;l++,n+=4)qt[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const d=qt[l-15],h=qt[l-2],p=Qe(d,7)^Qe(d,18)^d>>>3,g=Qe(h,17)^Qe(h,19)^h>>>10;qt[l]=g+qt[l-7]+p+qt[l-16]|0}let{A:r,B:o,C:i,D:s,E:c,F:a,G:f,H:u}=this;for(let l=0;l<64;l++){const d=Qe(c,6)^Qe(c,11)^Qe(c,25),h=u+d+jw(c,a,f)+Fw[l]+qt[l]|0,g=(Qe(r,2)^Qe(r,13)^Qe(r,22))+Dw(r,o,i)|0;u=f,f=a,a=c,c=s+h|0,s=i,i=o,o=r,r=h+g|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(r,o,i,s,c,a,f,u)}roundClean(){ro(qt)}destroy(){this.set(0,0,0,0,0,0,0,0),ro(this.buffer)}}const io=qw(()=>new Kw);class Ll extends kl{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Tl(t);const r=Rs(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),ro(i)}update(t){return no(this),this.iHash.update(t),this}digestInto(t){no(this),kn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:i,blockLen:s,outputLen:c}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ul=(e,t,n)=>new Ll(e,t).update(n).digest();Ul.create=(e,t)=>new Ll(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Os=BigInt(0),Ci=BigInt(1);function so(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function an(e,t,n=""){const r=Ro(e),o=e==null?void 0:e.length,i=t!==void 0;if(!r||i&&o!==t){const s=n&&`"${n}" `,c=i?` of length ${t}`:"",a=r?`length=${o}`:`type=${typeof e}`;throw new Error(s+"expected Uint8Array"+c+", got "+a)}return e}function Rr(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Nl(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Os:BigInt("0x"+e)}function or(e){return Nl(Pn(e))}function Rl(e){return kn(e),Nl(Pn(Uint8Array.from(e).reverse()))}function Co(e,t){return oo(e.toString(16).padStart(t*2,"0"))}function Ol(e,t){return Co(e,t).reverse()}function ae(e,t,n){let r;if(typeof t=="string")try{r=oo(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(Ro(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(e+" of length "+n+" expected, got "+o);return r}const ni=e=>typeof e=="bigint"&&Os<=e;function Hi(e,t,n){return ni(e)&&ni(t)&&ni(n)&&t<=e&&e<n}function Zw(e,t,n,r){if(!Hi(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Cl(e){let t;for(t=0;e>Os;e>>=Ci,t+=1);return t}const $r=e=>(Ci<<BigInt(e))-Ci;function Ww(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),o=h=>Uint8Array.of(h);let i=r(e),s=r(e),c=0;const a=()=>{i.fill(1),s.fill(0),c=0},f=(...h)=>n(s,i,...h),u=(h=r(0))=>{s=f(o(0),h),i=f(),h.length!==0&&(s=f(o(1),h),i=f())},l=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const p=[];for(;h<t;){i=f();const g=i.slice();p.push(g),h+=i.length}return ot(...p)};return(h,p)=>{a(),u(h);let g;for(;!(g=p(l()));)u();return a(),g}}function Cs(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(o,i,s){const c=e[o];if(s&&c===void 0)return;const a=typeof c;if(a!==i||c===null)throw new Error(`param "${o}" is invalid: expected ${i}, got ${a}`)}Object.entries(t).forEach(([o,i])=>r(o,i,!1)),Object.entries(n).forEach(([o,i])=>r(o,i,!0))}function Tc(e){const t=new WeakMap;return(n,...r)=>{const o=t.get(n);if(o!==void 0)return o;const i=e(n,...r);return t.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Te=BigInt(0),_e=BigInt(1),fn=BigInt(2),Hl=BigInt(3),Ml=BigInt(4),Pl=BigInt(5),Gw=BigInt(7),ql=BigInt(8),Yw=BigInt(9),Vl=BigInt(16);function ze(e,t){const n=e%t;return n>=Te?n:t+n}function Me(e,t,n){let r=e;for(;t-- >Te;)r*=r,r%=n;return r}function Ic(e,t){if(e===Te)throw new Error("invert: expected non-zero number");if(t<=Te)throw new Error("invert: expected positive modulus, got "+t);let n=ze(e,t),r=t,o=Te,i=_e;for(;n!==Te;){const c=r/n,a=r%n,f=o-i*c;r=n,n=a,o=i,i=f}if(r!==_e)throw new Error("invert: does not exist");return ze(o,t)}function Hs(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function jl(e,t){const n=(e.ORDER+_e)/Ml,r=e.pow(t,n);return Hs(e,r,t),r}function Xw(e,t){const n=(e.ORDER-Pl)/ql,r=e.mul(t,fn),o=e.pow(r,n),i=e.mul(t,o),s=e.mul(e.mul(i,fn),o),c=e.mul(i,e.sub(s,e.ONE));return Hs(e,c,t),c}function Jw(e){const t=kr(e),n=Dl(e),r=n(t,t.neg(t.ONE)),o=n(t,r),i=n(t,t.neg(r)),s=(e+Gw)/Vl;return(c,a)=>{let f=c.pow(a,s),u=c.mul(f,r);const l=c.mul(f,o),d=c.mul(f,i),h=c.eql(c.sqr(u),a),p=c.eql(c.sqr(l),a);f=c.cmov(f,u,h),u=c.cmov(d,l,p);const g=c.eql(c.sqr(u),a),y=c.cmov(f,u,g);return Hs(c,y,a),y}}function Dl(e){if(e<Hl)throw new Error("sqrt is not defined for small field");let t=e-_e,n=0;for(;t%fn===Te;)t/=fn,n++;let r=fn;const o=kr(e);for(;$c(o,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return jl;let i=o.pow(r,t);const s=(t+_e)/fn;return function(a,f){if(a.is0(f))return f;if($c(a,f)!==1)throw new Error("Cannot find square root");let u=n,l=a.mul(a.ONE,i),d=a.pow(f,t),h=a.pow(f,s);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let p=1,g=a.sqr(d);for(;!a.eql(g,a.ONE);)if(p++,g=a.sqr(g),p===u)throw new Error("Cannot find square root");const y=_e<<BigInt(u-p-1),m=a.pow(l,y);u=p,l=a.sqr(m),d=a.mul(d,l),h=a.mul(h,m)}return h}}function Qw(e){return e%Ml===Hl?jl:e%ql===Pl?Xw:e%Vl===Yw?Jw(e):Dl(e)}const ey=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ty(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=ey.reduce((r,o)=>(r[o]="function",r),t);return Cs(e,n),e}function ny(e,t,n){if(n<Te)throw new Error("invalid exponent, negatives unsupported");if(n===Te)return e.ONE;if(n===_e)return t;let r=e.ONE,o=t;for(;n>Te;)n&_e&&(r=e.mul(r,o)),o=e.sqr(o),n>>=_e;return r}function zl(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),o=t.reduce((s,c,a)=>e.is0(c)?s:(r[a]=s,e.mul(s,c)),e.ONE),i=e.inv(o);return t.reduceRight((s,c,a)=>e.is0(c)?s:(r[a]=e.mul(s,r[a]),e.mul(s,c)),i),r}function $c(e,t){const n=(e.ORDER-_e)/fn,r=e.pow(t,n),o=e.eql(r,e.ONE),i=e.eql(r,e.ZERO),s=e.eql(r,e.neg(e.ONE));if(!o&&!i&&!s)throw new Error("invalid Legendre symbol result");return o?1:i?0:-1}function Fl(e,t){t!==void 0&&Oi(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function kr(e,t,n=!1,r={}){if(e<=Te)throw new Error("invalid field: expected ORDER > 0, got "+e);let o,i,s=!1,c;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const d=t;d.BITS&&(o=d.BITS),d.sqrt&&(i=d.sqrt),typeof d.isLE=="boolean"&&(n=d.isLE),typeof d.modFromBytes=="boolean"&&(s=d.modFromBytes),c=d.allowedLengths}else typeof t=="number"&&(o=t),r.sqrt&&(i=r.sqrt);const{nBitLength:a,nByteLength:f}=Fl(e,o);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const l=Object.freeze({ORDER:e,isLE:n,BITS:a,BYTES:f,MASK:$r(a),ZERO:Te,ONE:_e,allowedLengths:c,create:d=>ze(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return Te<=d&&d<e},is0:d=>d===Te,isValidNot0:d=>!l.is0(d)&&l.isValid(d),isOdd:d=>(d&_e)===_e,neg:d=>ze(-d,e),eql:(d,h)=>d===h,sqr:d=>ze(d*d,e),add:(d,h)=>ze(d+h,e),sub:(d,h)=>ze(d-h,e),mul:(d,h)=>ze(d*h,e),pow:(d,h)=>ny(l,d,h),div:(d,h)=>ze(d*Ic(h,e),e),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>Ic(d,e),sqrt:i||(d=>(u||(u=Qw(e)),u(l,d))),toBytes:d=>n?Ol(d,f):Co(d,f),fromBytes:(d,h=!0)=>{if(c){if(!c.includes(d.length)||d.length>f)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+d.length);const g=new Uint8Array(f);g.set(d,n?0:g.length-d.length),d=g}if(d.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+d.length);let p=n?Rl(d):or(d);if(s&&(p=ze(p,e)),!h&&!l.isValid(p))throw new Error("invalid field element: outside of range 0..ORDER");return p},invertBatch:d=>zl(l,d),cmov:(d,h,p)=>p?h:d});return Object.freeze(l)}function Kl(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Zl(e){const t=Kl(e);return t+Math.ceil(t/2)}function Wl(e,t,n=!1){const r=e.length,o=Kl(t),i=Zl(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const s=n?Rl(e):or(e),c=ze(s,t-_e)+_e;return n?Ol(c,o):Co(c,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yn=BigInt(0),ln=BigInt(1);function co(e,t){const n=t.negate();return e?n:t}function ri(e,t){const n=zl(e.Fp,t.map(r=>r.Z));return t.map((r,o)=>e.fromAffine(r.toAffine(n[o])))}function Gl(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function oi(e,t){Gl(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),o=2**e,i=$r(e),s=BigInt(e);return{windows:n,windowSize:r,mask:i,maxNumber:o,shiftBy:s}}function kc(e,t,n){const{windowSize:r,mask:o,maxNumber:i,shiftBy:s}=n;let c=Number(e&o),a=e>>s;c>r&&(c-=i,a+=ln);const f=t*r,u=f+Math.abs(c)-1,l=c===0,d=c<0,h=t%2!==0;return{nextN:a,offset:u,isZero:l,isNeg:d,isNegF:h,offsetF:f}}function ry(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function oy(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const ii=new WeakMap,Yl=new WeakMap;function si(e){return Yl.get(e)||1}function Lc(e){if(e!==Yn)throw new Error("invalid wNAF")}class iy{constructor(t,n){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}_unsafeLadder(t,n,r=this.ZERO){let o=t;for(;n>Yn;)n&ln&&(r=r.add(o)),o=o.double(),n>>=ln;return r}precomputeWindow(t,n){const{windows:r,windowSize:o}=oi(n,this.bits),i=[];let s=t,c=s;for(let a=0;a<r;a++){c=s,i.push(c);for(let f=1;f<o;f++)c=c.add(s),i.push(c);s=c.double()}return i}wNAF(t,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let o=this.ZERO,i=this.BASE;const s=oi(t,this.bits);for(let c=0;c<s.windows;c++){const{nextN:a,offset:f,isZero:u,isNeg:l,isNegF:d,offsetF:h}=kc(r,c,s);r=a,u?i=i.add(co(d,n[h])):o=o.add(co(l,n[f]))}return Lc(r),{p:o,f:i}}wNAFUnsafe(t,n,r,o=this.ZERO){const i=oi(t,this.bits);for(let s=0;s<i.windows&&r!==Yn;s++){const{nextN:c,offset:a,isZero:f,isNeg:u}=kc(r,s,i);if(r=c,!f){const l=n[a];o=o.add(u?l.negate():l)}}return Lc(r),o}getPrecomputes(t,n,r){let o=ii.get(n);return o||(o=this.precomputeWindow(n,t),t!==1&&(typeof r=="function"&&(o=r(o)),ii.set(n,o))),o}cached(t,n,r){const o=si(t);return this.wNAF(o,this.getPrecomputes(o,t,r),n)}unsafe(t,n,r,o){const i=si(t);return i===1?this._unsafeLadder(t,n,o):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),n,o)}createCache(t,n){Gl(n,this.bits),Yl.set(t,n),ii.delete(t)}hasCache(t){return si(t)!==1}}function sy(e,t,n,r){let o=t,i=e.ZERO,s=e.ZERO;for(;n>Yn||r>Yn;)n&ln&&(i=i.add(o)),r&ln&&(s=s.add(o)),o=o.double(),n>>=ln,r>>=ln;return{p1:i,p2:s}}function cy(e,t,n,r){ry(n,e),oy(r,t);const o=n.length,i=r.length;if(o!==i)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,c=Cl(BigInt(o));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const f=$r(a),u=new Array(Number(f)+1).fill(s),l=Math.floor((t.BITS-1)/a)*a;let d=s;for(let h=l;h>=0;h-=a){u.fill(s);for(let g=0;g<i;g++){const y=r[g],m=Number(y>>BigInt(h)&f);u[m]=u[m].add(n[g])}let p=s;for(let g=u.length-1,y=s;g>0;g--)y=y.add(u[g]),p=p.add(y);if(d=d.add(p),h!==0)for(let g=0;g<a;g++)d=d.double()}return d}function Uc(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return ty(t),t}else return kr(e,{isLE:n})}function ay(e,t,n={},r){if(r===void 0&&(r=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const a of["p","n","h"]){const f=t[a];if(!(typeof f=="bigint"&&f>Yn))throw new Error(`CURVE.${a} must be positive bigint`)}const o=Uc(t.p,n.Fp,r),i=Uc(t.n,n.Fn,r),c=["Gx","Gy","a","b"];for(const a of c)if(!o.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:o,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nc=(e,t)=>(e+(e>=0?t:-t)/Xl)/t;function fy(e,t,n){const[[r,o],[i,s]]=t,c=Nc(s*e,n),a=Nc(-o*e,n);let f=e-c*r-a*i,u=-c*o-a*s;const l=f<xt,d=u<xt;l&&(f=-f),d&&(u=-u);const h=$r(Math.ceil(Cl(n)/2))+qn;if(f<xt||f>=h||u<xt||u>=h)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:l,k1:f,k2neg:d,k2:u}}function Mi(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function ci(e,t){const n={};for(let r of Object.keys(t))n[r]=e[r]===void 0?t[r]:e[r];return so(n.lowS,"lowS"),so(n.prehash,"prehash"),n.format!==void 0&&Mi(n.format),n}class ly extends Error{constructor(t=""){super(t)}}const pt={Err:ly,_tlv:{encode:(e,t)=>{const{Err:n}=pt;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,o=Rr(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Rr(o.length/2|128):"";return Rr(e)+i+o+t},decode(e,t){const{Err:n}=pt;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const o=t[r++],i=!!(o&128);let s=0;if(!i)s=o;else{const a=o&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const f=t.subarray(r,r+a);if(f.length!==a)throw new n("tlv.decode: length bytes not complete");if(f[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of f)s=s<<8|u;if(r+=a,s<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+s);if(c.length!==s)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=pt;if(e<xt)throw new t("integer: negative integers are not allowed");let n=Rr(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=pt;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return or(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=pt,o=ae("signature",e),{v:i,l:s}=r.decode(48,o);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,i),{v:f,l:u}=r.decode(2,a);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(f)}},hexFromSig(e){const{_tlv:t,_int:n}=pt,r=t.encode(2,n.encode(e.r)),o=t.encode(2,n.encode(e.s)),i=r+o;return t.encode(48,i)}},xt=BigInt(0),qn=BigInt(1),Xl=BigInt(2),Or=BigInt(3),uy=BigInt(4);function un(e,t){const{BYTES:n}=e;let r;if(typeof t=="bigint")r=t;else{let o=ae("private key",t);try{r=e.fromBytes(o)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function dy(e,t={}){const n=ay("weierstrass",e,t),{Fp:r,Fn:o}=n;let i=n.CURVE;const{h:s,n:c}=i;Cs(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:a}=t;if(a&&(!r.is0(i.a)||typeof a.beta!="bigint"||!Array.isArray(a.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=Ql(r,o);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function l(x,b,E){const{x:w,y:v}=b.toAffine(),A=r.toBytes(w);if(so(E,"isCompressed"),E){u();const S=!r.isOdd(v);return ot(Jl(S),A)}else return ot(Uint8Array.of(4),A,r.toBytes(v))}function d(x){an(x,void 0,"Point");const{publicKey:b,publicKeyUncompressed:E}=f,w=x.length,v=x[0],A=x.subarray(1);if(w===b&&(v===2||v===3)){const S=r.fromBytes(A);if(!r.isValid(S))throw new Error("bad point: is not on curve, wrong x");const B=g(S);let L;try{L=r.sqrt(B)}catch(z){const j=z instanceof Error?": "+z.message:"";throw new Error("bad point: is not on curve, sqrt error"+j)}u();const T=r.isOdd(L);return(v&1)===1!==T&&(L=r.neg(L)),{x:S,y:L}}else if(w===E&&v===4){const S=r.BYTES,B=r.fromBytes(A.subarray(0,S)),L=r.fromBytes(A.subarray(S,S*2));if(!y(B,L))throw new Error("bad point: is not on curve");return{x:B,y:L}}else throw new Error(`bad point: got length ${w}, expected compressed=${b} or uncompressed=${E}`)}const h=t.toBytes||l,p=t.fromBytes||d;function g(x){const b=r.sqr(x),E=r.mul(b,x);return r.add(r.add(E,r.mul(x,i.a)),i.b)}function y(x,b){const E=r.sqr(b),w=g(x);return r.eql(E,w)}if(!y(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const m=r.mul(r.pow(i.a,Or),uy),I=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(m,I)))throw new Error("bad curve params: a or b");function $(x,b,E=!1){if(!r.isValid(b)||E&&r.is0(b))throw new Error(`bad point coordinate ${x}`);return b}function H(x){if(!(x instanceof C))throw new Error("ProjectivePoint expected")}function P(x){if(!a||!a.basises)throw new Error("no endo");return fy(x,a.basises,o.ORDER)}const U=Tc((x,b)=>{const{X:E,Y:w,Z:v}=x;if(r.eql(v,r.ONE))return{x:E,y:w};const A=x.is0();b==null&&(b=A?r.ONE:r.inv(v));const S=r.mul(E,b),B=r.mul(w,b),L=r.mul(v,b);if(A)return{x:r.ZERO,y:r.ZERO};if(!r.eql(L,r.ONE))throw new Error("invZ was invalid");return{x:S,y:B}}),R=Tc(x=>{if(x.is0()){if(t.allowInfinityPoint&&!r.is0(x.Y))return;throw new Error("bad point: ZERO")}const{x:b,y:E}=x.toAffine();if(!r.isValid(b)||!r.isValid(E))throw new Error("bad point: x or y not field elements");if(!y(b,E))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function O(x,b,E,w,v){return E=new C(r.mul(E.X,x),E.Y,E.Z),b=co(w,b),E=co(v,E),b.add(E)}class C{constructor(b,E,w){this.X=$("x",b),this.Y=$("y",E,!0),this.Z=$("z",w),Object.freeze(this)}static CURVE(){return i}static fromAffine(b){const{x:E,y:w}=b||{};if(!b||!r.isValid(E)||!r.isValid(w))throw new Error("invalid affine point");if(b instanceof C)throw new Error("projective point not allowed");return r.is0(E)&&r.is0(w)?C.ZERO:new C(E,w,r.ONE)}static fromBytes(b){const E=C.fromAffine(p(an(b,void 0,"point")));return E.assertValidity(),E}static fromHex(b){return C.fromBytes(ae("pointHex",b))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(b=8,E=!0){return _.createCache(this,b),E||this.multiply(Or),this}assertValidity(){R(this)}hasEvenY(){const{y:b}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(b)}equals(b){H(b);const{X:E,Y:w,Z:v}=this,{X:A,Y:S,Z:B}=b,L=r.eql(r.mul(E,B),r.mul(A,v)),T=r.eql(r.mul(w,B),r.mul(S,v));return L&&T}negate(){return new C(this.X,r.neg(this.Y),this.Z)}double(){const{a:b,b:E}=i,w=r.mul(E,Or),{X:v,Y:A,Z:S}=this;let B=r.ZERO,L=r.ZERO,T=r.ZERO,N=r.mul(v,v),z=r.mul(A,A),j=r.mul(S,S),D=r.mul(v,A);return D=r.add(D,D),T=r.mul(v,S),T=r.add(T,T),B=r.mul(b,T),L=r.mul(w,j),L=r.add(B,L),B=r.sub(z,L),L=r.add(z,L),L=r.mul(B,L),B=r.mul(D,B),T=r.mul(w,T),j=r.mul(b,j),D=r.sub(N,j),D=r.mul(b,D),D=r.add(D,T),T=r.add(N,N),N=r.add(T,N),N=r.add(N,j),N=r.mul(N,D),L=r.add(L,N),j=r.mul(A,S),j=r.add(j,j),N=r.mul(j,D),B=r.sub(B,N),T=r.mul(j,z),T=r.add(T,T),T=r.add(T,T),new C(B,L,T)}add(b){H(b);const{X:E,Y:w,Z:v}=this,{X:A,Y:S,Z:B}=b;let L=r.ZERO,T=r.ZERO,N=r.ZERO;const z=i.a,j=r.mul(i.b,Or);let D=r.mul(E,A),K=r.mul(w,S),Z=r.mul(v,B),Q=r.add(E,w),W=r.add(A,S);Q=r.mul(Q,W),W=r.add(D,K),Q=r.sub(Q,W),W=r.add(E,v);let ne=r.add(A,B);return W=r.mul(W,ne),ne=r.add(D,Z),W=r.sub(W,ne),ne=r.add(w,v),L=r.add(S,B),ne=r.mul(ne,L),L=r.add(K,Z),ne=r.sub(ne,L),N=r.mul(z,W),L=r.mul(j,Z),N=r.add(L,N),L=r.sub(K,N),N=r.add(K,N),T=r.mul(L,N),K=r.add(D,D),K=r.add(K,D),Z=r.mul(z,Z),W=r.mul(j,W),K=r.add(K,Z),Z=r.sub(D,Z),Z=r.mul(z,Z),W=r.add(W,Z),D=r.mul(K,W),T=r.add(T,D),D=r.mul(ne,W),L=r.mul(Q,L),L=r.sub(L,D),D=r.mul(Q,K),N=r.mul(ne,N),N=r.add(N,D),new C(L,T,N)}subtract(b){return this.add(b.negate())}is0(){return this.equals(C.ZERO)}multiply(b){const{endo:E}=t;if(!o.isValidNot0(b))throw new Error("invalid scalar: out of range");let w,v;const A=S=>_.cached(this,S,B=>ri(C,B));if(E){const{k1neg:S,k1:B,k2neg:L,k2:T}=P(b),{p:N,f:z}=A(B),{p:j,f:D}=A(T);v=z.add(D),w=O(E.beta,N,j,S,L)}else{const{p:S,f:B}=A(b);w=S,v=B}return ri(C,[w,v])[0]}multiplyUnsafe(b){const{endo:E}=t,w=this;if(!o.isValid(b))throw new Error("invalid scalar: out of range");if(b===xt||w.is0())return C.ZERO;if(b===qn)return w;if(_.hasCache(this))return this.multiply(b);if(E){const{k1neg:v,k1:A,k2neg:S,k2:B}=P(b),{p1:L,p2:T}=sy(C,w,A,B);return O(E.beta,L,T,v,S)}else return _.unsafe(w,b)}multiplyAndAddUnsafe(b,E,w){const v=this.multiplyUnsafe(E).add(b.multiplyUnsafe(w));return v.is0()?void 0:v}toAffine(b){return U(this,b)}isTorsionFree(){const{isTorsionFree:b}=t;return s===qn?!0:b?b(C,this):_.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:b}=t;return s===qn?this:b?b(C,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(b=!0){return so(b,"isCompressed"),this.assertValidity(),h(C,this,b)}toHex(b=!0){return Pn(this.toBytes(b))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(b=!0){return this.toBytes(b)}_setWindowSize(b){this.precompute(b)}static normalizeZ(b){return ri(C,b)}static msm(b,E){return cy(C,o,b,E)}static fromPrivateKey(b){return C.BASE.multiply(un(o,b))}}C.BASE=new C(i.Gx,i.Gy,r.ONE),C.ZERO=new C(r.ZERO,r.ONE,r.ZERO),C.Fp=r,C.Fn=o;const q=o.BITS,_=new iy(C,t.endo?Math.ceil(q/2):q);return C.BASE.precompute(8),C}function Jl(e){return Uint8Array.of(e?2:3)}function Ql(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function hy(e,t={}){const{Fn:n}=e,r=t.randomBytes||Oo,o=Object.assign(Ql(e.Fp,n),{seed:Zl(n.ORDER)});function i(h){try{return!!un(n,h)}catch{return!1}}function s(h,p){const{publicKey:g,publicKeyUncompressed:y}=o;try{const m=h.length;return p===!0&&m!==g||p===!1&&m!==y?!1:!!e.fromBytes(h)}catch{return!1}}function c(h=r(o.seed)){return Wl(an(h,o.seed,"seed"),n.ORDER)}function a(h,p=!0){return e.BASE.multiply(un(n,h)).toBytes(p)}function f(h){const p=c(h);return{secretKey:p,publicKey:a(p)}}function u(h){if(typeof h=="bigint")return!1;if(h instanceof e)return!0;const{secretKey:p,publicKey:g,publicKeyUncompressed:y}=o;if(n.allowedLengths||p===g)return;const m=ae("key",h).length;return m===g||m===y}function l(h,p,g=!0){if(u(h)===!0)throw new Error("first arg must be private key");if(u(p)===!1)throw new Error("second arg must be public key");const y=un(n,h);return e.fromHex(p).multiply(y).toBytes(g)}return Object.freeze({getPublicKey:a,getSharedSecret:l,keygen:f,Point:e,utils:{isValidSecretKey:i,isValidPublicKey:s,randomSecretKey:c,isValidPrivateKey:i,randomPrivateKey:c,normPrivateKeyToScalar:h=>un(n,h),precompute(h=8,p=e.BASE){return p.precompute(h,!1)}},lengths:o})}function gy(e,t,n={}){Tl(t),Cs(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||Oo,o=n.hmac||((E,...w)=>Ul(t,E,ot(...w))),{Fp:i,Fn:s}=e,{ORDER:c,BITS:a}=s,{keygen:f,getPublicKey:u,getSharedSecret:l,utils:d,lengths:h}=hy(e,n),p={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},g="compact";function y(E){const w=c>>qn;return E>w}function m(E,w){if(!s.isValidNot0(w))throw new Error(`invalid signature ${E}: out of range 1..Point.Fn.ORDER`);return w}function I(E,w){Mi(w);const v=h.signature,A=w==="compact"?v:w==="recovered"?v+1:void 0;return an(E,A,`${w} signature`)}class ${constructor(w,v,A){this.r=m("r",w),this.s=m("s",v),A!=null&&(this.recovery=A),Object.freeze(this)}static fromBytes(w,v=g){I(w,v);let A;if(v==="der"){const{r:T,s:N}=pt.toSig(an(w));return new $(T,N)}v==="recovered"&&(A=w[0],v="compact",w=w.subarray(1));const S=s.BYTES,B=w.subarray(0,S),L=w.subarray(S,S*2);return new $(s.fromBytes(B),s.fromBytes(L),A)}static fromHex(w,v){return this.fromBytes(oo(w),v)}addRecoveryBit(w){return new $(this.r,this.s,w)}recoverPublicKey(w){const v=i.ORDER,{r:A,s:S,recovery:B}=this;if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");if(c*Xl<v&&B>1)throw new Error("recovery id is ambiguous for h>1 curve");const T=B===2||B===3?A+c:A;if(!i.isValid(T))throw new Error("recovery id 2 or 3 invalid");const N=i.toBytes(T),z=e.fromBytes(ot(Jl((B&1)===0),N)),j=s.inv(T),D=P(ae("msgHash",w)),K=s.create(-D*j),Z=s.create(S*j),Q=e.BASE.multiplyUnsafe(K).add(z.multiplyUnsafe(Z));if(Q.is0())throw new Error("point at infinify");return Q.assertValidity(),Q}hasHighS(){return y(this.s)}toBytes(w=g){if(Mi(w),w==="der")return oo(pt.hexFromSig(this));const v=s.toBytes(this.r),A=s.toBytes(this.s);if(w==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return ot(Uint8Array.of(this.recovery),v,A)}return ot(v,A)}toHex(w){return Pn(this.toBytes(w))}assertValidity(){}static fromCompact(w){return $.fromBytes(ae("sig",w),"compact")}static fromDER(w){return $.fromBytes(ae("sig",w),"der")}normalizeS(){return this.hasHighS()?new $(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Pn(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Pn(this.toBytes("compact"))}}const H=n.bits2int||function(w){if(w.length>8192)throw new Error("input is too large");const v=or(w),A=w.length*8-a;return A>0?v>>BigInt(A):v},P=n.bits2int_modN||function(w){return s.create(H(w))},U=$r(a);function R(E){return Zw("num < 2^"+a,E,xt,U),s.toBytes(E)}function O(E,w){return an(E,void 0,"message"),w?an(t(E),void 0,"prehashed message"):E}function C(E,w,v){if(["recovered","canonical"].some(K=>K in v))throw new Error("sign() legacy options not supported");const{lowS:A,prehash:S,extraEntropy:B}=ci(v,p);E=O(E,S);const L=P(E),T=un(s,w),N=[R(T),R(L)];if(B!=null&&B!==!1){const K=B===!0?r(h.secretKey):B;N.push(ae("extraEntropy",K))}const z=ot(...N),j=L;function D(K){const Z=H(K);if(!s.isValidNot0(Z))return;const Q=s.inv(Z),W=e.BASE.multiply(Z).toAffine(),ne=s.create(W.x);if(ne===xt)return;const Qt=s.create(Q*s.create(j+ne*T));if(Qt===xt)return;let lt=(W.x===ne?0:2)|Number(W.y&qn),Ae=Qt;return A&&y(Qt)&&(Ae=s.neg(Qt),lt^=1),new $(ne,Ae,lt)}return{seed:z,k2sig:D}}function q(E,w,v={}){E=ae("message",E);const{seed:A,k2sig:S}=C(E,w,v);return Ww(t.outputLen,s.BYTES,o)(A,S)}function _(E){let w;const v=typeof E=="string"||Ro(E),A=!v&&E!==null&&typeof E=="object"&&typeof E.r=="bigint"&&typeof E.s=="bigint";if(!v&&!A)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(A)w=new $(E.r,E.s);else if(v){try{w=$.fromBytes(ae("sig",E),"der")}catch(S){if(!(S instanceof pt.Err))throw S}if(!w)try{w=$.fromBytes(ae("sig",E),"compact")}catch{return!1}}return w||!1}function x(E,w,v,A={}){const{lowS:S,prehash:B,format:L}=ci(A,p);if(v=ae("publicKey",v),w=O(ae("message",w),B),"strict"in A)throw new Error("options.strict was renamed to lowS");const T=L===void 0?_(E):$.fromBytes(ae("sig",E),L);if(T===!1)return!1;try{const N=e.fromBytes(v);if(S&&T.hasHighS())return!1;const{r:z,s:j}=T,D=P(w),K=s.inv(j),Z=s.create(D*K),Q=s.create(z*K),W=e.BASE.multiplyUnsafe(Z).add(N.multiplyUnsafe(Q));return W.is0()?!1:s.create(W.x)===z}catch{return!1}}function b(E,w,v={}){const{prehash:A}=ci(v,p);return w=O(w,A),$.fromBytes(E,"recovered").recoverPublicKey(w).toBytes()}return Object.freeze({keygen:f,getPublicKey:u,getSharedSecret:l,utils:d,lengths:h,Point:e,sign:q,verify:x,recoverPublicKey:b,Signature:$,hash:t})}function py(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(s=>Math.ceil(s/2)))):void 0;const o=kr(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),i={Fp:n,Fn:o,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:i}}function wy(e){const{CURVE:t,curveOpts:n}=py(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}function yy(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,Fl(n.Fn.ORDER,n.Fn.BITS))})}function by(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:o}=wy(e),i=dy(t,n),s=gy(i,r,o);return yy(e,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function vy(e,t){const n=r=>by({...e,hash:r});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xn={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},my={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Ey=BigInt(0),Rc=BigInt(1),Pi=BigInt(2);function xy(e){const t=Xn.p,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),c=BigInt(44),a=BigInt(88),f=e*e*e%t,u=f*f*e%t,l=Me(u,n,t)*u%t,d=Me(l,n,t)*u%t,h=Me(d,Pi,t)*f%t,p=Me(h,o,t)*h%t,g=Me(p,i,t)*p%t,y=Me(g,c,t)*g%t,m=Me(y,a,t)*y%t,I=Me(m,c,t)*g%t,$=Me(I,n,t)*u%t,H=Me($,s,t)*p%t,P=Me(H,r,t)*f%t,U=Me(P,Pi,t);if(!ao.eql(ao.sqr(U),e))throw new Error("Cannot find square root");return U}const ao=kr(Xn.p,{sqrt:xy}),eu=vy({...Xn,Fp:ao,lowS:!0,endo:my},io),Oc={};function fo(e,...t){let n=Oc[e];if(n===void 0){const r=io($l(e));n=ot(r,r),Oc[e]=n}return io(ot(n,...t))}const Ms=e=>e.toBytes(!0).slice(1),ir=eu.Point,Ps=e=>e%Pi===Ey;function qi(e){const{Fn:t,BASE:n}=ir,r=un(t,e),o=n.multiply(r);return{scalar:Ps(o.y)?r:t.neg(r),bytes:Ms(o)}}function tu(e){const t=ao;if(!t.isValidNot0(e))throw new Error("invalid x: Fail if x  p");const n=t.create(e*e),r=t.create(n*e+BigInt(7));let o=t.sqrt(r);Ps(o)||(o=t.neg(o));const i=ir.fromAffine({x:e,y:o});return i.assertValidity(),i}const wr=or;function nu(...e){return ir.Fn.create(wr(fo("BIP0340/challenge",...e)))}function Cc(e){return qi(e).bytes}function _y(e,t,n=Oo(32)){const{Fn:r}=ir,o=ae("message",e),{bytes:i,scalar:s}=qi(t),c=ae("auxRand",n,32),a=r.toBytes(s^wr(fo("BIP0340/aux",c))),f=fo("BIP0340/nonce",a,i,o),{bytes:u,scalar:l}=qi(f),d=nu(u,i,o),h=new Uint8Array(64);if(h.set(u,0),h.set(r.toBytes(r.create(l+d*s)),32),!ru(h,o,i))throw new Error("sign: Invalid signature produced");return h}function ru(e,t,n){const{Fn:r,BASE:o}=ir,i=ae("signature",e,64),s=ae("message",t),c=ae("publicKey",n,32);try{const a=tu(wr(c)),f=wr(i.subarray(0,32));if(!Hi(f,Rc,Xn.p))return!1;const u=wr(i.subarray(32,64));if(!Hi(u,Rc,Xn.n))return!1;const l=nu(r.toBytes(f),Ms(a),s),d=o.multiplyUnsafe(u).add(a.multiplyUnsafe(r.neg(l))),{x:h,y:p}=d.toAffine();return!(d.is0()||!Ps(p)||h!==f)}catch{return!1}}const Pb=(()=>{const n=(o=Oo(48))=>Wl(o,Xn.n);eu.utils.randomSecretKey;function r(o){const i=n(o);return{secretKey:i,publicKey:Cc(i)}}return{keygen:r,getPublicKey:Cc,sign:_y,verify:ru,Point:ir,utils:{randomSecretKey:n,randomPrivateKey:n,taggedHash:fo,lift_x:tu,pointToBytes:Ms,numberToBytesBE:Co,bytesToNumberBE:or,mod:ze},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:64,seed:48}}})(),qb=io;function Ay(e,t,n,r){ce.hash(e);const o=nf({dkLen:32,asyncTick:10},r),{c:i,dkLen:s,asyncTick:c}=o;if(ce.number(i),ce.number(s),ce.number(c),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const a=Tn(t),f=Tn(n),u=new Uint8Array(s),l=Ir.create(e,a),d=l._cloneInto().update(f);return{c:i,dkLen:s,asyncTick:c,DK:u,PRF:l,PRFSalt:d}}function By(e,t,n,r,o){return e.destroy(),t.destroy(),r&&r.destroy(),o.fill(0),n}function ou(e,t,n,r){const{c:o,dkLen:i,DK:s,PRF:c,PRFSalt:a}=Ay(e,t,n,r);let f;const u=new Uint8Array(4),l=qr(u),d=new Uint8Array(c.outputLen);for(let h=1,p=0;p<i;h++,p+=c.outputLen){const g=s.subarray(p,p+c.outputLen);l.setInt32(0,h,!1),(f=a._cloneInto(f)).update(u).digestInto(d),g.set(d.subarray(0,g.length));for(let y=1;y<o;y++){c._cloneInto(f).update(d).digestInto(d);for(let m=0;m<g.length;m++)g[m]^=d[m]}}return By(c,a,s,f,d)}const J=(e,t)=>e<<t|e>>>32-t;function Hc(e,t,n,r,o,i){let s=e[t++]^n[r++],c=e[t++]^n[r++],a=e[t++]^n[r++],f=e[t++]^n[r++],u=e[t++]^n[r++],l=e[t++]^n[r++],d=e[t++]^n[r++],h=e[t++]^n[r++],p=e[t++]^n[r++],g=e[t++]^n[r++],y=e[t++]^n[r++],m=e[t++]^n[r++],I=e[t++]^n[r++],$=e[t++]^n[r++],H=e[t++]^n[r++],P=e[t++]^n[r++],U=s,R=c,O=a,C=f,q=u,_=l,x=d,b=h,E=p,w=g,v=y,A=m,S=I,B=$,L=H,T=P;for(let N=0;N<8;N+=2)q^=J(U+S|0,7),E^=J(q+U|0,9),S^=J(E+q|0,13),U^=J(S+E|0,18),w^=J(_+R|0,7),B^=J(w+_|0,9),R^=J(B+w|0,13),_^=J(R+B|0,18),L^=J(v+x|0,7),O^=J(L+v|0,9),x^=J(O+L|0,13),v^=J(x+O|0,18),C^=J(T+A|0,7),b^=J(C+T|0,9),A^=J(b+C|0,13),T^=J(A+b|0,18),R^=J(U+C|0,7),O^=J(R+U|0,9),C^=J(O+R|0,13),U^=J(C+O|0,18),x^=J(_+q|0,7),b^=J(x+_|0,9),q^=J(b+x|0,13),_^=J(q+b|0,18),A^=J(v+w|0,7),E^=J(A+v|0,9),w^=J(E+A|0,13),v^=J(w+E|0,18),S^=J(T+L|0,7),B^=J(S+T|0,9),L^=J(B+S|0,13),T^=J(L+B|0,18);o[i++]=s+U|0,o[i++]=c+R|0,o[i++]=a+O|0,o[i++]=f+C|0,o[i++]=u+q|0,o[i++]=l+_|0,o[i++]=d+x|0,o[i++]=h+b|0,o[i++]=p+E|0,o[i++]=g+w|0,o[i++]=y+v|0,o[i++]=m+A|0,o[i++]=I+S|0,o[i++]=$+B|0,o[i++]=H+L|0,o[i++]=P+T|0}function ai(e,t,n,r,o){let i=r+0,s=r+16*o;for(let c=0;c<16;c++)n[s+c]=e[t+(2*o-1)*16+c];for(let c=0;c<o;c++,i+=16,t+=16)Hc(n,s,e,t,n,i),c>0&&(s+=16),Hc(n,i,e,t+=16,n,s)}function Sy(e,t,n){const r=nf({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:o,r:i,p:s,dkLen:c,asyncTick:a,maxmem:f,onProgress:u}=r;if(ce.number(o),ce.number(i),ce.number(s),ce.number(c),ce.number(a),ce.number(f),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const l=128*i,d=l/4;if(o<=1||(o&o-1)!==0||o>=2**(l/8)||o>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(s<0||s>(2**32-1)*32/l)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(c<0||c>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const h=l*(o+s);if(h>f)throw new Error(`Scrypt: parameters too large, ${h} (128 * r * (N + p)) > ${f} (maxmem)`);const p=ou($t,e,t,{c:1,dkLen:l*s}),g=Wo(p),y=Wo(new Uint8Array(l*o)),m=Wo(new Uint8Array(l));let I=()=>{};if(u){const $=2*o*s,H=Math.max(Math.floor($/1e4),1);let P=0;I=()=>{P++,u&&(!(P%H)||P===$)&&u(P/$)}}return{N:o,r:i,p:s,dkLen:c,blockSize32:d,V:y,B32:g,B:p,tmp:m,blockMixCb:I,asyncTick:a}}function Ty(e,t,n,r,o){const i=ou($t,e,n,{c:1,dkLen:t});return n.fill(0),r.fill(0),o.fill(0),i}function iu(e,t,n){const{N:r,r:o,p:i,dkLen:s,blockSize32:c,V:a,B32:f,B:u,tmp:l,blockMixCb:d}=Sy(e,t,n);for(let h=0;h<i;h++){const p=c*h;for(let g=0;g<c;g++)a[g]=f[p+g];for(let g=0,y=0;g<r-1;g++)ai(a,y,a,y+=c,o),d();ai(a,(r-1)*c,f,p,o),d();for(let g=0;g<r;g++){const y=f[p+c-16]%r;for(let m=0;m<c;m++)l[m]=f[p+m]^a[y*c+m];ai(l,0,f,p,o),d()}}return Ty(e,s,u,a,l)}var su=5e3;function Iy(e,t){let n=Ue.toWords(t);return Ue.encode(e,n,su)}function $y(e,t){return Iy(e,t)}function ky(e,t,n=16,r=2){let o=Qr(16),i=2**n,s=iu(t.normalize("NFKC"),o,{N:i,r:8,p:1,dkLen:32}),c=Qr(24),a=Uint8Array.from([r]),u=Bf(s,c,a).encrypt(e),l=nr(Uint8Array.from([2]),Uint8Array.from([n]),o,c,a,u);return $y("ncryptsec",l)}function Ly(e,t){let{prefix:n,words:r}=Ue.decode(e,su);if(n!=="ncryptsec")throw new Error(`invalid prefix ${n}, expected 'ncryptsec'`);let o=new Uint8Array(Ue.fromWords(r)),i=o[0];if(i!==2)throw new Error(`invalid version ${i}, expected 0x02`);let c=2**o[1],a=o.slice(2,18),f=o.slice(18,42),u=o[42],l=Uint8Array.from([u]),d=o.slice(43),h=iu(t.normalize("NFKC"),a,{N:c,r:8,p:1,dkLen:32});return Bf(h,f,l).decrypt(d)}const Vb=Object.freeze(Object.defineProperty({__proto__:null,decrypt:Ly,encrypt:ky},Symbol.toStringTag,{value:"Module"}));var Cr=new TextDecoder("utf-8"),lo=new TextEncoder,Uy={isNProfile:e=>/^nprofile1[a-z\d]+$/.test(e||""),isNEvent:e=>/^nevent1[a-z\d]+$/.test(e||""),isNAddr:e=>/^naddr1[a-z\d]+$/.test(e||""),isNSec:e=>/^nsec1[a-z\d]{58}$/.test(e||""),isNPub:e=>/^npub1[a-z\d]{58}$/.test(e||""),isNote:e=>/^note1[a-z\d]+$/.test(e||""),isNcryptsec:e=>/^ncryptsec1[a-z\d]+$/.test(e||"")},qs=5e3,Ny=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Ry(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function Oy(e){try{return e.startsWith("nostr:")&&(e=e.substring(6)),cu(e)}catch{return{type:"invalid",data:null}}}function cu(e){var o,i,s,c,a,f,u;let{prefix:t,words:n}=Ue.decode(e,qs),r=new Uint8Array(Ue.fromWords(n));switch(t){case"nprofile":{let l=fi(r);if(!((o=l[0])!=null&&o[0]))throw new Error("missing TLV 0 for nprofile");if(l[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:oe(l[0][0]),relays:l[1]?l[1].map(d=>Cr.decode(d)):[]}}}case"nevent":{let l=fi(r);if(!((i=l[0])!=null&&i[0]))throw new Error("missing TLV 0 for nevent");if(l[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(l[2]&&l[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(l[3]&&l[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:oe(l[0][0]),relays:l[1]?l[1].map(d=>Cr.decode(d)):[],author:(s=l[2])!=null&&s[0]?oe(l[2][0]):void 0,kind:(c=l[3])!=null&&c[0]?parseInt(oe(l[3][0]),16):void 0}}}case"naddr":{let l=fi(r);if(!((a=l[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((f=l[2])!=null&&f[0]))throw new Error("missing TLV 2 for naddr");if(l[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=l[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(l[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Cr.decode(l[0][0]),pubkey:oe(l[2][0]),kind:parseInt(oe(l[3][0]),16),relays:l[1]?l[1].map(d=>Cr.decode(d)):[]}}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:oe(r)};default:throw new Error(`unknown prefix ${t}`)}}function fi(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],i=n.slice(2,2+o);if(n=n.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(i)}return t}function Cy(e){return Mo("nsec",e)}function Hy(e){return Mo("npub",Ce(e))}function My(e){return Mo("note",Ce(e))}function Ho(e,t){let n=Ue.toWords(t);return Ue.encode(e,n,qs)}function Mo(e,t){return Ho(e,t)}function Py(e){let t=Vs({0:[Ce(e.pubkey)],1:(e.relays||[]).map(n=>lo.encode(n))});return Ho("nprofile",t)}function qy(e){let t;e.kind!==void 0&&(t=Ry(e.kind));let n=Vs({0:[Ce(e.id)],1:(e.relays||[]).map(r=>lo.encode(r)),2:e.author?[Ce(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return Ho("nevent",n)}function Vy(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=Vs({0:[lo.encode(e.identifier)],1:(e.relays||[]).map(r=>lo.encode(r)),2:[Ce(e.pubkey)],3:[new Uint8Array(t)]});return Ho("naddr",n)}function Vs(e){let t=[];return Object.entries(e).reverse().forEach(([n,r])=>{r.forEach(o=>{let i=new Uint8Array(o.length+2);i.set([parseInt(n)],0),i.set([o.length],1),i.set(o,2),t.push(i)})}),nr(...t)}const jb=Object.freeze(Object.defineProperty({__proto__:null,BECH32_REGEX:Ny,Bech32MaxSize:qs,NostrTypeGuard:Uy,decode:cu,decodeNostrURI:Oy,encodeBytes:Mo,naddrEncode:Vy,neventEncode:qy,noteEncode:My,nprofileEncode:Py,npubEncode:Hy,nsecEncode:Cy},Symbol.toStringTag,{value:"Module"}));var li={},Mc;function Db(){return Mc||(Mc=1,(function(e){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function t(_){if(!Number.isSafeInteger(_))throw new Error(`Wrong integer: ${_}`)}e.assertNumber=t;function n(..._){const x=(w,v)=>A=>w(v(A)),b=Array.from(_).reverse().reduce((w,v)=>w?x(w,v.encode):v.encode,void 0),E=_.reduce((w,v)=>w?x(w,v.decode):v.decode,void 0);return{encode:b,decode:E}}function r(_){return{encode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return x.map(b=>{if(t(b),b<0||b>=_.length)throw new Error(`Digit index outside alphabet: ${b} (alphabet: ${_.length})`);return _[b]})},decode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="string")throw new Error("alphabet.decode input should be array of strings");return x.map(b=>{if(typeof b!="string")throw new Error(`alphabet.decode: not string element=${b}`);const E=_.indexOf(b);if(E===-1)throw new Error(`Unknown letter: "${b}". Allowed: ${_}`);return E})}}}function o(_=""){if(typeof _!="string")throw new Error("join separator should be string");return{encode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="string")throw new Error("join.encode input should be array of strings");for(let b of x)if(typeof b!="string")throw new Error(`join.encode: non-string input=${b}`);return x.join(_)},decode:x=>{if(typeof x!="string")throw new Error("join.decode input should be string");return x.split(_)}}}function i(_,x="="){if(t(_),typeof x!="string")throw new Error("padding chr should be string");return{encode(b){if(!Array.isArray(b)||b.length&&typeof b[0]!="string")throw new Error("padding.encode input should be array of strings");for(let E of b)if(typeof E!="string")throw new Error(`padding.encode: non-string input=${E}`);for(;b.length*_%8;)b.push(x);return b},decode(b){if(!Array.isArray(b)||b.length&&typeof b[0]!="string")throw new Error("padding.encode input should be array of strings");for(let w of b)if(typeof w!="string")throw new Error(`padding.decode: non-string input=${w}`);let E=b.length;if(E*_%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;E>0&&b[E-1]===x;E--)if(!((E-1)*_%8))throw new Error("Invalid padding: string has too much padding");return b.slice(0,E)}}}function s(_){if(typeof _!="function")throw new Error("normalize fn should be function");return{encode:x=>x,decode:x=>_(x)}}function c(_,x,b){if(x<2)throw new Error(`convertRadix: wrong from=${x}, base cannot be less than 2`);if(b<2)throw new Error(`convertRadix: wrong to=${b}, base cannot be less than 2`);if(!Array.isArray(_))throw new Error("convertRadix: data should be array");if(!_.length)return[];let E=0;const w=[],v=Array.from(_);for(v.forEach(A=>{if(t(A),A<0||A>=x)throw new Error(`Wrong integer: ${A}`)});;){let A=0,S=!0;for(let B=E;B<v.length;B++){const L=v[B],T=x*A+L;if(!Number.isSafeInteger(T)||x*A/x!==A||T-L!==x*A)throw new Error("convertRadix: carry overflow");if(A=T%b,v[B]=Math.floor(T/b),!Number.isSafeInteger(v[B])||v[B]*b+A!==T)throw new Error("convertRadix: carry overflow");if(S)v[B]?S=!1:E=B;else continue}if(w.push(A),S)break}for(let A=0;A<_.length-1&&_[A]===0;A++)w.push(0);return w.reverse()}const a=(_,x)=>x?a(x,_%x):_,f=(_,x)=>_+(x-a(_,x));function u(_,x,b,E){if(!Array.isArray(_))throw new Error("convertRadix2: data should be array");if(x<=0||x>32)throw new Error(`convertRadix2: wrong from=${x}`);if(b<=0||b>32)throw new Error(`convertRadix2: wrong to=${b}`);if(f(x,b)>32)throw new Error(`convertRadix2: carry overflow from=${x} to=${b} carryBits=${f(x,b)}`);let w=0,v=0;const A=2**b-1,S=[];for(const B of _){if(t(B),B>=2**x)throw new Error(`convertRadix2: invalid data word=${B} from=${x}`);if(w=w<<x|B,v+x>32)throw new Error(`convertRadix2: carry overflow pos=${v} from=${x}`);for(v+=x;v>=b;v-=b)S.push((w>>v-b&A)>>>0);w&=2**v-1}if(w=w<<b-v&A,!E&&v>=x)throw new Error("Excess padding");if(!E&&w)throw new Error(`Non-zero padding: ${w}`);return E&&v>0&&S.push(w>>>0),S}function l(_){return t(_),{encode:x=>{if(!(x instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return c(Array.from(x),2**8,_)},decode:x=>{if(!Array.isArray(x)||x.length&&typeof x[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(c(x,_,2**8))}}}function d(_,x=!1){if(t(_),_<=0||_>32)throw new Error("radix2: bits should be in (0..32]");if(f(8,_)>32||f(_,8)>32)throw new Error("radix2: carry overflow");return{encode:b=>{if(!(b instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return u(Array.from(b),8,_,!x)},decode:b=>{if(!Array.isArray(b)||b.length&&typeof b[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(u(b,_,8,x))}}}function h(_){if(typeof _!="function")throw new Error("unsafeWrapper fn should be function");return function(...x){try{return _.apply(null,x)}catch{}}}function p(_,x){if(t(_),typeof x!="function")throw new Error("checksum fn should be function");return{encode(b){if(!(b instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const E=x(b).slice(0,_),w=new Uint8Array(b.length+_);return w.set(b),w.set(E,b.length),w},decode(b){if(!(b instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const E=b.slice(0,-_),w=x(E).slice(0,_),v=b.slice(-_);for(let A=0;A<_;A++)if(w[A]!==v[A])throw new Error("Invalid checksum");return E}}}e.utils={alphabet:r,chain:n,checksum:p,radix:l,radix2:d,join:o,padding:i},e.base16=n(d(4),r("0123456789ABCDEF"),o("")),e.base32=n(d(5),r("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),i(5),o("")),e.base32hex=n(d(5),r("0123456789ABCDEFGHIJKLMNOPQRSTUV"),i(5),o("")),e.base32crockford=n(d(5),r("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),s(_=>_.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=n(d(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),i(6),o("")),e.base64url=n(d(6),r("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),i(6),o(""));const g=_=>n(l(58),r(_),o(""));e.base58=g("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=g("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=g("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const y=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(_){let x="";for(let b=0;b<_.length;b+=8){const E=_.subarray(b,b+8);x+=e.base58.encode(E).padStart(y[E.length],"1")}return x},decode(_){let x=[];for(let b=0;b<_.length;b+=11){const E=_.slice(b,b+11),w=y.indexOf(E.length),v=e.base58.decode(E);for(let A=0;A<v.length-w;A++)if(v[A]!==0)throw new Error("base58xmr: wrong padding");x=x.concat(Array.from(v.slice(v.length-w)))}return Uint8Array.from(x)}};const m=_=>n(p(4,x=>_(_(x))),e.base58);e.base58check=m;const I=n(r("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),$=[996825010,642813549,513874426,1027748829,705979059];function H(_){const x=_>>25;let b=(_&33554431)<<5;for(let E=0;E<$.length;E++)(x>>E&1)===1&&(b^=$[E]);return b}function P(_,x,b=1){const E=_.length;let w=1;for(let v=0;v<E;v++){const A=_.charCodeAt(v);if(A<33||A>126)throw new Error(`Invalid prefix (${_})`);w=H(w)^A>>5}w=H(w);for(let v=0;v<E;v++)w=H(w)^_.charCodeAt(v)&31;for(let v of x)w=H(w)^v;for(let v=0;v<6;v++)w=H(w);return w^=b,I.encode(u([w%2**30],30,5,!1))}function U(_){const x=_==="bech32"?1:734539939,b=d(5),E=b.decode,w=b.encode,v=h(E);function A(T,N,z=90){if(typeof T!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof T}`);if(!Array.isArray(N)||N.length&&typeof N[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof N}`);const j=T.length+7+N.length;if(z!==!1&&j>z)throw new TypeError(`Length ${j} exceeds limit ${z}`);return T=T.toLowerCase(),`${T}1${I.encode(N)}${P(T,N,x)}`}function S(T,N=90){if(typeof T!="string")throw new Error(`bech32.decode input should be string, not ${typeof T}`);if(T.length<8||N!==!1&&T.length>N)throw new TypeError(`Wrong string length: ${T.length} (${T}). Expected (8..${N})`);const z=T.toLowerCase();if(T!==z&&T!==T.toUpperCase())throw new Error("String must be lowercase or uppercase");T=z;const j=T.lastIndexOf("1");if(j===0||j===-1)throw new Error('Letter "1" must be present between prefix and data only');const D=T.slice(0,j),K=T.slice(j+1);if(K.length<6)throw new Error("Data must be at least 6 characters long");const Z=I.decode(K).slice(0,-6),Q=P(D,Z,x);if(!K.endsWith(Q))throw new Error(`Invalid checksum in ${T}: expected "${Q}"`);return{prefix:D,words:Z}}const B=h(S);function L(T){const{prefix:N,words:z}=S(T,!1);return{prefix:N,words:z,bytes:E(z)}}return{encode:A,decode:S,decodeToBytes:L,decodeUnsafe:B,fromWords:E,fromWordsUnsafe:v,toWords:w}}e.bech32=U("bech32"),e.bech32m=U("bech32m"),e.utf8={encode:_=>new TextDecoder().decode(_),decode:_=>new TextEncoder().encode(_)},e.hex=n(d(4),r("0123456789abcdef"),o(""),s(_=>{if(typeof _!="string"||_.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof _} with length ${_.length}`);return _.toLowerCase()}));const R={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},O=`Invalid encoding type. Available types: ${Object.keys(R).join(", ")}`,C=(_,x)=>{if(typeof _!="string"||!R.hasOwnProperty(_))throw new TypeError(O);if(!(x instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return R[_].encode(x)};e.bytesToString=C,e.str=e.bytesToString;const q=(_,x)=>{if(!R.hasOwnProperty(_))throw new TypeError(O);if(typeof x!="string")throw new TypeError("stringToBytes() expects string");return R[_].decode(x)};e.stringToBytes=q,e.bytes=e.stringToBytes})(li)),li}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function au(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function fu(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function jy(e){if(typeof e!="function")throw new Error("function expected");return!0}function Er(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function lu(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function Vi(e){if(!Array.isArray(e))throw new Error("array expected")}function uu(e,t){if(!fu(!0,t))throw new Error(`${e}: array of strings expected`)}function du(e,t){if(!fu(!1,t))throw new Error(`${e}: array of numbers expected`)}function Dy(...e){const t=i=>i,n=(i,s)=>c=>i(s(c)),r=e.map(i=>i.encode).reduceRight(n,t),o=e.map(i=>i.decode).reduce(n,t);return{encode:r,decode:o}}function zy(e){const t=typeof e=="string"?e.split(""):e,n=t.length;uu("alphabet",t);const r=new Map(t.map((o,i)=>[o,i]));return{encode:o=>(Vi(o),o.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${e}`);return t[i]})),decode:o=>(Vi(o),o.map(i=>{Er("alphabet.decode",i);const s=r.get(i);if(s===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${e}`);return s}))}}function Fy(e=""){return Er("join",e),{encode:t=>(uu("join.decode",t),t.join(e)),decode:t=>(Er("join.decode",t),t.split(e))}}const hu=(e,t)=>t===0?e:hu(t,e%t),uo=(e,t)=>e+(t-hu(e,t)),Dr=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function ji(e,t,n,r){if(Vi(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(uo(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${uo(t,n)}`);let o=0,i=0;const s=Dr[t],c=Dr[n]-1,a=[];for(const f of e){if(lu(f),f>=s)throw new Error(`convertRadix2: invalid data word=${f} from=${t}`);if(o=o<<t|f,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)a.push((o>>i-n&c)>>>0);const u=Dr[i];if(u===void 0)throw new Error("invalid carry");o&=u-1}if(o=o<<n-i&c,!r&&i>=t)throw new Error("Excess padding");if(!r&&o>0)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&a.push(o>>>0),a}function Ky(e,t=!1){if(lu(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(uo(8,e)>32||uo(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!au(n))throw new Error("radix2.encode input should be Uint8Array");return ji(Array.from(n),8,e,!t)},decode:n=>(du("radix2.decode",n),Uint8Array.from(ji(n,e,8,t)))}}function Pc(e){return jy(e),function(...t){try{return e.apply(null,t)}catch{}}}const Di=Dy(zy("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Fy("")),qc=[996825010,642813549,513874426,1027748829,705979059];function fr(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<qc.length;r++)(t>>r&1)===1&&(n^=qc[r]);return n}function Vc(e,t,n=1){const r=e.length;let o=1;for(let i=0;i<r;i++){const s=e.charCodeAt(i);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);o=fr(o)^s>>5}o=fr(o);for(let i=0;i<r;i++)o=fr(o)^e.charCodeAt(i)&31;for(let i of t)o=fr(o)^i;for(let i=0;i<6;i++)o=fr(o);return o^=n,Di.encode(ji([o%Dr[30]],30,5,!1))}function Zy(e){const t=e==="bech32"?1:734539939,n=Ky(5),r=n.decode,o=n.encode,i=Pc(r);function s(l,d,h=90){Er("bech32.encode prefix",l),au(d)&&(d=Array.from(d)),du("bech32.encode",d);const p=l.length;if(p===0)throw new TypeError(`Invalid prefix length ${p}`);const g=p+7+d.length;if(h!==!1&&g>h)throw new TypeError(`Length ${g} exceeds limit ${h}`);const y=l.toLowerCase(),m=Vc(y,d,t);return`${y}1${Di.encode(d)}${m}`}function c(l,d=90){Er("bech32.decode input",l);const h=l.length;if(h<8||d!==!1&&h>d)throw new TypeError(`invalid string length: ${h} (${l}). Expected (8..${d})`);const p=l.toLowerCase();if(l!==p&&l!==l.toUpperCase())throw new Error("String must be lowercase or uppercase");const g=p.lastIndexOf("1");if(g===0||g===-1)throw new Error('Letter "1" must be present between prefix and data only');const y=p.slice(0,g),m=p.slice(g+1);if(m.length<6)throw new Error("Data must be at least 6 characters long");const I=Di.decode(m).slice(0,-6),$=Vc(y,I,t);if(!m.endsWith($))throw new Error(`Invalid checksum in ${l}: expected "${$}"`);return{prefix:y,words:I}}const a=Pc(c);function f(l){const{prefix:d,words:h}=c(l,!1);return{prefix:d,words:h,bytes:r(h)}}function u(l,d){return s(l,o(d))}return{encode:s,decode:c,encodeFromBytes:u,decodeToBytes:f,decodeUnsafe:a,fromWords:r,fromWordsUnsafe:i,toWords:o}}const zb=Zy("bech32");/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Wy(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function gu(e,t,n=""){const r=Wy(e),o=e==null?void 0:e.length;if(!r||t!==void 0){const s=n&&`"${n}" `,c="",a=r?`length=${o}`:`type=${typeof e}`;throw new Error(s+"expected Uint8Array"+c+", got "+a)}return e}const pu=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Gy=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Fb(e){if(gu(e),pu)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=Gy[e[n]];return t}const ht={_0:48,_9:57,A:65,F:70,a:97,f:102};function jc(e){if(e>=ht._0&&e<=ht._9)return e-ht._0;if(e>=ht.A&&e<=ht.F)return e-(ht.A-10);if(e>=ht.a&&e<=ht.f)return e-(ht.a-10)}function Kb(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(pu)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const s=jc(e.charCodeAt(i)),c=jc(e.charCodeAt(i+1));if(s===void 0||c===void 0){const a=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+i)}r[o]=s*16+c}return r}function Zb(...e){let t=0;for(let r=0;r<e.length;r++){const o=e[r];gu(o),t+=o.length}const n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const i=e[r];n.set(i,o),o+=i.length}return n}export{Ab as $,ib as A,nb as B,yb as C,bb as D,Eb as E,st as F,Jy as G,Qy as H,ab as I,Fu as J,cb as K,eb as L,db as M,Tb as N,Sb as O,dd as P,Vt as Q,Nt as R,Mb as S,wb as T,rb as U,tb as V,hb as W,fb as X,ob as Y,xb as Z,lr as _,Fb as a,sb as a0,Id as a1,md as a2,ub as a3,vb as a4,mb as a5,gb as a6,pb as a7,Ib as a8,_b as a9,lb as aa,zb as b,Zb as c,gs as d,Bb as e,Cp as f,qd as g,Kb as h,q0 as i,ft as j,Pb as k,Pn as l,Qg as m,lp as n,oo as o,ky as p,Ly as q,Db as r,qb as s,mp as t,jb as u,Vb as v,Pd as w,Jg as x,zu as y,$b as z};
